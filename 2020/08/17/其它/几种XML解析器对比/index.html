<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="介绍DOMDOM 是用与平台和语言无关的方式表示 XML 文档的官方 W3C 标准。DOM 是以层次结构组织的节点或信息片断的集合。这个层次结构允许开发人员在树中寻找特定信息。分析该结构通常需要加载整个文档和构造层次结构，然后才能做任何工作。由于它是基于信息层次的，因而 DOM 被认为是基于树或基于对象的。DOM 以及广义的基于树的处理具有几个优点。首先，由于树在内存中是持久的，因此可以修改它以便">
<meta property="og:type" content="article">
<meta property="og:title" content="几种XML解析器对比">
<meta property="og:url" content="http://yoursite.com/2020/08/17/其它/几种XML解析器对比/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="介绍DOMDOM 是用与平台和语言无关的方式表示 XML 文档的官方 W3C 标准。DOM 是以层次结构组织的节点或信息片断的集合。这个层次结构允许开发人员在树中寻找特定信息。分析该结构通常需要加载整个文档和构造层次结构，然后才能做任何工作。由于它是基于信息层次的，因而 DOM 被认为是基于树或基于对象的。DOM 以及广义的基于树的处理具有几个优点。首先，由于树在内存中是持久的，因此可以修改它以便">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2021-06-17T09:26:05.977Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="几种XML解析器对比">
<meta name="twitter:description" content="介绍DOMDOM 是用与平台和语言无关的方式表示 XML 文档的官方 W3C 标准。DOM 是以层次结构组织的节点或信息片断的集合。这个层次结构允许开发人员在树中寻找特定信息。分析该结构通常需要加载整个文档和构造层次结构，然后才能做任何工作。由于它是基于信息层次的，因而 DOM 被认为是基于树或基于对象的。DOM 以及广义的基于树的处理具有几个优点。首先，由于树在内存中是持久的，因此可以修改它以便">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>几种XML解析器对比</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/08/18/设计模式/J2EE 模式/传输对象模式/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/07/23/部署运维/Linux 教程/被挖矿/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&text=几种XML解析器对比"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&title=几种XML解析器对比"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&is_video=false&description=几种XML解析器对比"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=几种XML解析器对比&body=Check out this article: http://yoursite.com/2020/08/17/其它/几种XML解析器对比/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&title=几种XML解析器对比"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&title=几种XML解析器对比"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&title=几种XML解析器对比"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&title=几种XML解析器对比"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&name=几种XML解析器对比&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#介绍"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DOM"><span class="toc-number">1.0.1.</span> <span class="toc-text">DOM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SAX"><span class="toc-number">1.0.2.</span> <span class="toc-text">SAX</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JDOM"><span class="toc-number">1.0.3.</span> <span class="toc-text">JDOM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DOM4J"><span class="toc-number">1.0.4.</span> <span class="toc-text">DOM4J</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#引入依赖"><span class="toc-number">2.</span> <span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用"><span class="toc-number">3.</span> <span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#生成-XML"><span class="toc-number">3.0.1.</span> <span class="toc-text">生成 XML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取属性值"><span class="toc-number">3.0.2.</span> <span class="toc-text">获取属性值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设置属性值"><span class="toc-number">3.0.3.</span> <span class="toc-text">设置属性值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除属性"><span class="toc-number">3.0.4.</span> <span class="toc-text">删除属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取节点值"><span class="toc-number">3.0.5.</span> <span class="toc-text">获取节点值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设置节点值"><span class="toc-number">3.0.6.</span> <span class="toc-text">设置节点值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除节点值"><span class="toc-number">3.0.7.</span> <span class="toc-text">删除节点值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#综合对比"><span class="toc-number">4.</span> <span class="toc-text">综合对比</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结论"><span class="toc-number">5.</span> <span class="toc-text">结论</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        几种XML解析器对比
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Hexo</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-08-17T00:00:00.000Z" itemprop="datePublished">2020-08-17</time>
        
        (Updated: <time datetime="2021-06-17T09:26:05.977Z" itemprop="dateModified">2021-06-17</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/其它/">其它</a>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><h4 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h4><p>DOM 是用与平台和语言无关的方式表示 XML 文档的官方 W3C 标准。DOM 是以层次结构组织的节点或信息片断的集合。这个层次结构允许开发人员在树中寻找特定信息。分析该结构通常需要加载整个文档和构造层次结构，然后才能做任何工作。由于它是基于信息层次的，因而 DOM 被认为是基于树或基于对象的。DOM 以及广义的基于树的处理具有几个优点。首先，由于树在内存中是持久的，因此可以修改它以便应用程序能对数据和结构作出更改。它还可以在任何时候在树中上下导航，而不是像 SAX 那样是一次性的处理。DOM 使用起来也要简单得多。 </p>
<h4 id="SAX"><a href="#SAX" class="headerlink" title="SAX"></a>SAX</h4><p>SAX 处理的优点非常类似于流媒体的优点。分析能够立即开始，而不是等待所有的数据被处理。而且，由于应用程序只是在读取数据时检查数据，因此不需要将数据存储在内存中。这对于大型文档来说是个巨大的优点。事实上，应用程序甚至不必解析整个文档；它可以在某个条件得到满足时停止解析。一般来说，SAX 还比它的替代者 DOM 快许多。 </p>
<h4 id="JDOM"><a href="#JDOM" class="headerlink" title="JDOM"></a>JDOM</h4><p>JDOM 的目的是成为 Java 特定文档模型，它简化与 XML 的交互并且比使用 DOM 实现更快。由于是第一个 Java 特定模型，JDOM 一直得到大力推广和促进。正在考虑通过“Java 规范请求 JSR-102 ”将它最终用作“ Java 标准扩展”。从 2000年 初就已经开始了 JDOM 开发。 </p>
<p>JDOM 与 DOM 主要有两方面不同。首先，JDOM 仅使用具体类而不使用接口。这在某些方面简化了 API，但是也限制了灵活性。第二，API 大量使用了 <code>Collections</code> 类，简化了那些已经熟悉这些类的 Java 开发者的使用。 </p>
<p>JDOM 文档声明其目的是“使用 20%（或更少）的精力解决 80%（或更多）Java/XML 问题”（根据学习曲线假定为 20%）。JDOM 对于大多数 Java/XML 应用程序来说当然是有用的，并且大多数开发者发现 API 比 DOM 容易理解得多。JDOM 还包括对程序行为的相当广泛检查以防止用户做任何在 XML 中无意义的事。然而，它仍需要您充分理解 XML 以便做一些超出基本的工作（或者甚至理解某些情况下的错误）。这也许是比学习 DOM 或 JDOM 接口都更有意义的工作。 </p>
<p>JDOM 自身不包含解析器。它通常使用 SAX2 解析器来解析和验证输入 XML 文档（尽管它还可以将以前构造的 DOM 表示作为输入）。它包含一些转换器以将 JDOM 表示输出成 SAX2 事件流、DOM 模型或 XML 文本文档。JDOM 是在 Apache 许可证变体下发布的开放源码。 </p>
<h4 id="DOM4J"><a href="#DOM4J" class="headerlink" title="DOM4J"></a>DOM4J</h4><p>虽然 DOM4J 代表了完全独立的开发结果，但最初，它是 JDOM 的一种智能分支。它合并了许多超出基本 XML 文档表示的功能，包括集成的 XPath 支持、XML Schema 支持以及用于大文档或流化文档的基于事件的处理。它还提供了构建文档表示的选项，它通过 DOM4J API 和标准 DOM 接口具有并行访问功能。从 2000 下半年开始，它就一直处于开发之中。 </p>
<p>为支持所有这些功能，DOM4J 使用接口和抽象基本类方法。DOM4J 大量使用了 API 中的 <code>Collections</code> 类，但是在许多情况下，它还提供一些替代方法以允许更好的性能或更直接的编码方法。直接好处是，虽然 DOM4J 付出了更复杂的 API 的代价，但是它提供了比 JDOM 大得多的灵活性。 </p>
<p>在添加灵活性、XPath 集成和对大文档处理的目标时，DOM4J 的目标与 JDOM 是一样的：针对 Java 开发者的易用性和直观操作。它还致力于成为比 JDOM 更完整的解决方案，实现在本质上处理所有 Java/XML 问题的目标。在完成该目标时，它比 JDOM 更少强调防止不正确的应用程序行为。 </p>
<p>DOM4J 是一个非常非常优秀的 Java XML API，具有性能优异、功能强大和极端易用使用的特点，同时它也是一个开放源代码的软件。如今你可以看到越来越多的 Java 软件都在使用 DOM4J 来读写 XML，特别值得一提的是连 Sun 的 JAXM 也在用 DOM4J。</p>
<h2 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h2><p>DOM 是 Java 自带的 XML 解析器，无需引入。</p>
<p>引入 SAX 依赖，大小约 30KB：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>sax<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sax<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>引入 JDOM 依赖，大小约 160KB：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jdom<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jdom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>引入 dom4j 依赖，大小约 946KB：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>dom4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dom4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jaxen<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxen<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h4 id="生成-XML"><a href="#生成-XML" class="headerlink" title="生成 XML"></a>生成 XML</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">product</span> <span class="attr">name</span>=<span class="string">"QQ"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">account</span> <span class="attr">id</span>=<span class="string">"123456789"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">nickname</span>&gt;</span>qq-account-1<span class="tag">&lt;/<span class="name">nickname</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">password</span>&gt;</span>qwe123qwe123<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>56<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">account</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">account</span> <span class="attr">id</span>=<span class="string">"987654321"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">nickname</span>&gt;</span>qq-account-2<span class="tag">&lt;/<span class="name">nickname</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">password</span>&gt;</span>ios9ios9ios9<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>12<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">account</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">product</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">product</span> <span class="attr">name</span>=<span class="string">"Netease"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">account</span> <span class="attr">id</span>=<span class="string">"tom"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">password</span>&gt;</span>pwdOfTom<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">capacity</span>&gt;</span>1024<span class="tag">&lt;/<span class="name">capacity</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">account</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">account</span> <span class="attr">name</span>=<span class="string">"Jim"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">password</span>&gt;</span>pwdOfJim<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">capacity</span>&gt;</span>2560<span class="tag">&lt;/<span class="name">capacity</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">account</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">product</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们分别使用 4 种解析器对上面 XML 文本内容进行生成，查看它们之间的效率。</p>
<p>这是 DOM 的生成代码，较为复杂：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//建立DocumentBuilderFactor，用于获得DocumentBuilder对象：</span></span><br><span class="line">DocumentBuilderFactory bbf = DocumentBuilderFactory.newInstance();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取构建对象</span></span><br><span class="line">DocumentBuilder builder = bbf.newDocumentBuilder();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析路径得到文档对象</span></span><br><span class="line">Document doc = builder.parse(<span class="keyword">new</span> File(filePath));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取根元素</span></span><br><span class="line">Element resources = doc.getDocumentElement();</span><br><span class="line"></span><br><span class="line">Element product1 = doc.createElement(<span class="string">"product"</span>);</span><br><span class="line">product1.setAttribute(<span class="string">"name"</span>, <span class="string">"QQ"</span>);</span><br><span class="line">resources.appendChild(product1);</span><br><span class="line"></span><br><span class="line">Element account1 = doc.createElement(<span class="string">"account"</span>);</span><br><span class="line">account1.setAttribute(<span class="string">"id"</span>, <span class="string">"123456789"</span>);</span><br><span class="line">product1.appendChild(account1);</span><br><span class="line"></span><br><span class="line">Element nickname1 = doc.createElement(<span class="string">"nickname"</span>);</span><br><span class="line">nickname1.setTextContent(<span class="string">"qq-account-1"</span>);</span><br><span class="line">Element password1 = doc.createElement(<span class="string">"password"</span>);</span><br><span class="line">password1.setTextContent(<span class="string">"qwe123qwe123"</span>);</span><br><span class="line">Element level1 = doc.createElement(<span class="string">"level"</span>);</span><br><span class="line">level1.setTextContent(<span class="string">"56"</span>);</span><br><span class="line">account1.appendChild(nickname1);</span><br><span class="line">account1.appendChild(password1);</span><br><span class="line">account1.appendChild(level1);</span><br><span class="line"></span><br><span class="line">Element account2 = doc.createElement(<span class="string">"account"</span>);</span><br><span class="line">account2.setAttribute(<span class="string">"id"</span>, <span class="string">"123456789"</span>);</span><br><span class="line">product1.appendChild(account2);</span><br><span class="line"></span><br><span class="line">Element nickname2 = doc.createElement(<span class="string">"nickname"</span>);</span><br><span class="line">nickname2.setTextContent(<span class="string">"qq-account-1"</span>);</span><br><span class="line">Element password2 = doc.createElement(<span class="string">"password"</span>);</span><br><span class="line">password2.setTextContent(<span class="string">"qwe123qwe123"</span>);</span><br><span class="line">Element level2 = doc.createElement(<span class="string">"level"</span>);</span><br><span class="line">level2.setTextContent(<span class="string">"56"</span>);</span><br><span class="line">account2.appendChild(nickname2);</span><br><span class="line">account2.appendChild(password2);</span><br><span class="line">account2.appendChild(level2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Element product2 = doc.createElement(<span class="string">"product"</span>);</span><br><span class="line">product2.setAttribute(<span class="string">"name"</span>, <span class="string">"Netease"</span>);</span><br><span class="line">resources.appendChild(product2);</span><br><span class="line"></span><br><span class="line">Element account3 = doc.createElement(<span class="string">"account"</span>);</span><br><span class="line">account3.setAttribute(<span class="string">"id"</span>, <span class="string">"tom"</span>);</span><br><span class="line">product2.appendChild(account3);</span><br><span class="line"></span><br><span class="line">Element password3 = doc.createElement(<span class="string">"password"</span>);</span><br><span class="line">password3.setTextContent(<span class="string">"pwdOfTom"</span>);</span><br><span class="line">Element capacity3 = doc.createElement(<span class="string">"capacity"</span>);</span><br><span class="line">capacity3.setTextContent(<span class="string">"1024"</span>);</span><br><span class="line">account3.appendChild(password3);</span><br><span class="line">account3.appendChild(capacity3);</span><br><span class="line"></span><br><span class="line">Element account4 = doc.createElement(<span class="string">"account"</span>);</span><br><span class="line">account4.setAttribute(<span class="string">"id"</span>, <span class="string">"tom"</span>);</span><br><span class="line">product2.appendChild(account4);</span><br><span class="line"></span><br><span class="line">Element password4 = doc.createElement(<span class="string">"password"</span>);</span><br><span class="line">password4.setTextContent(<span class="string">"pwdOfTom"</span>);</span><br><span class="line">Element capacity4 = doc.createElement(<span class="string">"capacity"</span>);</span><br><span class="line">capacity4.setTextContent(<span class="string">"1024"</span>);</span><br><span class="line">account4.appendChild(password4);</span><br><span class="line">account4.appendChild(capacity4);</span><br></pre></td></tr></table></figure></p>
<p>这是 SAX 的生成代码，也较为复杂。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个SAX转换工厂</span></span><br><span class="line">SAXTransformerFactory factory = (SAXTransformerFactory) SAXTransformerFactory.newInstance();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个TransformerHandler实例</span></span><br><span class="line">TransformerHandler handler = factory.newTransformerHandler();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个handler转换器</span></span><br><span class="line">Transformer transformer = handler.getTransformer();</span><br><span class="line">transformer.setOutputProperty(OutputKeys.INDENT, <span class="string">"yes"</span>);</span><br><span class="line">transformer.setOutputProperty(OutputKeys.ENCODING, <span class="string">"utf-8"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个Result实例连接到XML文件</span></span><br><span class="line">Result result = <span class="keyword">new</span> StreamResult(<span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(filePath)));</span><br><span class="line">handler.setResult(result);</span><br><span class="line"></span><br><span class="line">AttributesImpl attr = <span class="keyword">new</span> AttributesImpl();</span><br><span class="line">handler.startDocument();</span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"resources"</span>, attr);</span><br><span class="line">attr.clear();</span><br><span class="line"></span><br><span class="line">attr.addAttribute(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"name"</span>, <span class="string">""</span>, <span class="string">"QQ"</span>);</span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"product"</span>, attr);</span><br><span class="line">attr.clear();</span><br><span class="line"></span><br><span class="line">attr.addAttribute(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"id"</span>, <span class="string">""</span>, <span class="string">"123456789"</span>);</span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"account"</span>, attr);</span><br><span class="line">attr.clear();</span><br><span class="line"></span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"nickname"</span>, attr);</span><br><span class="line">handler.characters(<span class="string">"qq-account-1"</span>.toCharArray(), <span class="number">0</span>, <span class="string">"qq-account-1"</span>.length());</span><br><span class="line">attr.clear();</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"nickname"</span>);</span><br><span class="line"></span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"password"</span>, attr);</span><br><span class="line">handler.characters(<span class="string">"qwe123qwe123"</span>.toCharArray(), <span class="number">0</span>, <span class="string">"qwe123qwe123"</span>.length());</span><br><span class="line">attr.clear();</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"level"</span>, attr);</span><br><span class="line">handler.characters(<span class="string">"56"</span>.toCharArray(), <span class="number">0</span>, <span class="string">"56"</span>.length());</span><br><span class="line">attr.clear();</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"level"</span>);</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"account"</span>);</span><br><span class="line"></span><br><span class="line">attr.addAttribute(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"id"</span>, <span class="string">""</span>, <span class="string">"987654321"</span>);</span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"account"</span>, attr);</span><br><span class="line">attr.clear();</span><br><span class="line"></span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"nickname"</span>, attr);</span><br><span class="line">handler.characters(<span class="string">"qq-account-1"</span>.toCharArray(), <span class="number">0</span>, <span class="string">"qq-account-2"</span>.length());</span><br><span class="line">attr.clear();</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"nickname"</span>);</span><br><span class="line"></span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"password"</span>, attr);</span><br><span class="line">handler.characters(<span class="string">"qwe123qwe123"</span>.toCharArray(), <span class="number">0</span>, <span class="string">"ios9ios9ios9"</span>.length());</span><br><span class="line">attr.clear();</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"level"</span>, attr);</span><br><span class="line">handler.characters(<span class="string">"56"</span>.toCharArray(), <span class="number">0</span>, <span class="string">"12"</span>.length());</span><br><span class="line">attr.clear();</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"level"</span>);</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"account"</span>);</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"product"</span>);</span><br><span class="line"></span><br><span class="line">attr.addAttribute(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"name"</span>, <span class="string">""</span>, <span class="string">"Netease"</span>);</span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"product"</span>, attr);</span><br><span class="line">attr.clear();</span><br><span class="line"></span><br><span class="line">attr.addAttribute(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"id"</span>, <span class="string">""</span>, <span class="string">"tom"</span>);</span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"account"</span>, attr);</span><br><span class="line">attr.clear();</span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"password"</span>, attr);</span><br><span class="line">handler.characters(<span class="string">"pwdOfTom"</span>.toCharArray(), <span class="number">0</span>, <span class="string">"pwdOfTom"</span>.length());</span><br><span class="line">attr.clear();</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"password"</span>);</span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"capacity"</span>, attr);</span><br><span class="line">handler.characters(<span class="string">"1024"</span>.toCharArray(), <span class="number">0</span>, <span class="string">"1024"</span>.length());</span><br><span class="line">attr.clear();</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"capacity"</span>);</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"account"</span>);</span><br><span class="line"></span><br><span class="line">attr.addAttribute(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"id"</span>, <span class="string">""</span>, <span class="string">"Jim"</span>);</span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"account"</span>, attr);</span><br><span class="line">attr.clear();</span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"password"</span>, attr);</span><br><span class="line">handler.characters(<span class="string">"pwdOfJim"</span>.toCharArray(), <span class="number">0</span>, <span class="string">"pwdOfJim"</span>.length());</span><br><span class="line">attr.clear();</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"password"</span>);</span><br><span class="line">handler.startElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"capacity"</span>, attr);</span><br><span class="line">handler.characters(<span class="string">"2560"</span>.toCharArray(), <span class="number">0</span>, <span class="string">"2560"</span>.length());</span><br><span class="line">attr.clear();</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"capacity"</span>);</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"account"</span>);</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"product"</span>);</span><br><span class="line">handler.endElement(<span class="string">""</span>, <span class="string">""</span>, <span class="string">"resources"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭doc对象</span></span><br><span class="line">handler.endDocument();</span><br></pre></td></tr></table></figure>
<p>这是 JDOM 的生成代码，较上面抽象了许多复杂的过程，看起来精简了很多。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">Document document = <span class="keyword">new</span> Document();</span><br><span class="line"></span><br><span class="line">Element resources = <span class="keyword">new</span> Element(<span class="string">"resources"</span>);</span><br><span class="line">document.addContent(resources);</span><br><span class="line"></span><br><span class="line">Element product1 = <span class="keyword">new</span> Element(<span class="string">"product"</span>);</span><br><span class="line">resources.addContent(product1);</span><br><span class="line">product1.setAttribute(<span class="string">"name"</span>, <span class="string">"QQ"</span>);</span><br><span class="line"></span><br><span class="line">Element account1 = <span class="keyword">new</span> Element(<span class="string">"account"</span>);</span><br><span class="line">account1.setAttribute(<span class="string">"id"</span>, <span class="string">"123456789"</span>);</span><br><span class="line"></span><br><span class="line">Element nickname1 = <span class="keyword">new</span> Element(<span class="string">"nickname"</span>);</span><br><span class="line">nickname1.setText(<span class="string">"qq-account-1"</span>);</span><br><span class="line">Element password1 = <span class="keyword">new</span> Element(<span class="string">"password"</span>);</span><br><span class="line">password1.setText(<span class="string">"qwe123qwe123"</span>);</span><br><span class="line">Element level1 = <span class="keyword">new</span> Element(<span class="string">"level"</span>);</span><br><span class="line">level1.setText(<span class="string">"56"</span>);</span><br><span class="line">account1.addContent(nickname1);</span><br><span class="line">account1.addContent(password1);</span><br><span class="line">account1.addContent(level1);</span><br><span class="line">product1.addContent(account1);</span><br><span class="line"></span><br><span class="line">Element account2 = <span class="keyword">new</span> Element(<span class="string">"account"</span>);</span><br><span class="line">account2.setAttribute(<span class="string">"id"</span>, <span class="string">"987654321"</span>);</span><br><span class="line"></span><br><span class="line">Element nickname2 = <span class="keyword">new</span> Element(<span class="string">"nickname"</span>);</span><br><span class="line">nickname2.setText(<span class="string">"qq-account-2"</span>);</span><br><span class="line">Element password2 = <span class="keyword">new</span> Element(<span class="string">"password"</span>);</span><br><span class="line">password2.setText(<span class="string">"ios9ios9ios9"</span>);</span><br><span class="line">Element level2 = <span class="keyword">new</span> Element(<span class="string">"level"</span>);</span><br><span class="line">level2.setText(<span class="string">"12"</span>);</span><br><span class="line">account2.addContent(nickname2);</span><br><span class="line">account2.addContent(password2);</span><br><span class="line">account2.addContent(level2);</span><br><span class="line">product1.addContent(account2);</span><br><span class="line"></span><br><span class="line">Element product2 = <span class="keyword">new</span> Element(<span class="string">"product"</span>);</span><br><span class="line">product2.setAttribute(<span class="string">"name"</span>, <span class="string">"QQ"</span>);</span><br><span class="line">resources.addContent(product2);</span><br><span class="line"></span><br><span class="line">Element account3 = <span class="keyword">new</span> Element(<span class="string">"account"</span>);</span><br><span class="line">account3.setAttribute(<span class="string">"id"</span>, <span class="string">"tom"</span>);</span><br><span class="line"></span><br><span class="line">Element password3 = <span class="keyword">new</span> Element(<span class="string">"password"</span>);</span><br><span class="line">password3.setText(<span class="string">"pwdOfTom"</span>);</span><br><span class="line">Element capacity3 = <span class="keyword">new</span> Element(<span class="string">"capacity"</span>);</span><br><span class="line">capacity3.setText(<span class="string">"1024"</span>);</span><br><span class="line">account3.addContent(password3);</span><br><span class="line">account3.addContent(capacity3);</span><br><span class="line"></span><br><span class="line">Element account4 = <span class="keyword">new</span> Element(<span class="string">"account"</span>);</span><br><span class="line">account4.setAttribute(<span class="string">"id"</span>, <span class="string">"Jim"</span>);</span><br><span class="line"></span><br><span class="line">Element password4 = <span class="keyword">new</span> Element(<span class="string">"password"</span>);</span><br><span class="line">password4.setText(<span class="string">"qwe123qwe123"</span>);</span><br><span class="line">Element capacity4 = <span class="keyword">new</span> Element(<span class="string">"capacity"</span>);</span><br><span class="line">capacity4.setText(<span class="string">"1024"</span>);</span><br><span class="line">account4.addContent(password4);</span><br><span class="line">account4.addContent(capacity4);</span><br><span class="line"></span><br><span class="line">product2.addContent(account3);</span><br><span class="line">product2.addContent(account4);</span><br></pre></td></tr></table></figure>
<p>这是 DOM4J 的生成代码，无论是易读性还是简洁性都比上面的好很多：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Document document = DocumentHelper.createDocument();</span><br><span class="line">Element resources = document.addElement(<span class="string">"resources"</span>);</span><br><span class="line">Element product1 = resources.addElement(<span class="string">"product"</span>);</span><br><span class="line">product1.addAttribute(<span class="string">"name"</span>, <span class="string">"QQ"</span>);</span><br><span class="line">Element account1 = product1.addElement(<span class="string">"account"</span>);</span><br><span class="line">account1.addAttribute(<span class="string">"id"</span>, <span class="string">"123456789"</span>);</span><br><span class="line">account1.addElement(<span class="string">"nickname"</span>, <span class="string">"qq-account-1"</span>);</span><br><span class="line">account1.addElement(<span class="string">"password"</span>, <span class="string">"qwe123qwe123"</span>);</span><br><span class="line">account1.addElement(<span class="string">"level"</span>, <span class="string">"56"</span>);</span><br><span class="line"></span><br><span class="line">Element account2 = product1.addElement(<span class="string">"account"</span>);</span><br><span class="line">account2.addAttribute(<span class="string">"id"</span>, <span class="string">"987654321"</span>);</span><br><span class="line">account2.addElement(<span class="string">"nickname"</span>, <span class="string">"qq-account-2"</span>);</span><br><span class="line">account2.addElement(<span class="string">"password"</span>, <span class="string">"ios9ios9ios9"</span>);</span><br><span class="line">account2.addElement(<span class="string">"level"</span>, <span class="string">"12"</span>);</span><br><span class="line"></span><br><span class="line">Element product2 = resources.addElement(<span class="string">"product"</span>);</span><br><span class="line">product2.addAttribute(<span class="string">"name"</span>, <span class="string">"Netease"</span>);</span><br><span class="line">Element account3 = product2.addElement(<span class="string">"account"</span>);</span><br><span class="line">account3.addAttribute(<span class="string">"id"</span>, <span class="string">"tom"</span>);</span><br><span class="line">account3.addElement(<span class="string">"password"</span>, <span class="string">"qwe123qwe123"</span>);</span><br><span class="line">account3.addElement(<span class="string">"capacity"</span>, <span class="string">"1024"</span>);</span><br><span class="line"></span><br><span class="line">Element account4 = product2.addElement(<span class="string">"account"</span>);</span><br><span class="line">account4.addAttribute(<span class="string">"id"</span>, <span class="string">"Jim"</span>);</span><br><span class="line">account4.addElement(<span class="string">"password"</span>, <span class="string">"ios9ios9ios9"</span>);</span><br><span class="line">account4.addElement(<span class="string">"capacity"</span>, <span class="string">"2048"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="获取属性值"><a href="#获取属性值" class="headerlink" title="获取属性值"></a>获取属性值</h4><p>这里对比的是不同的解析器对读取元素属性的表达能力。</p>
<p>DOM 代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NodeList products = resources.getElementsByTagName(<span class="string">"product"</span>);</span><br><span class="line">NodeList accounts = products.item(<span class="number">0</span>).getChildNodes();</span><br><span class="line">Node account = accounts.item(<span class="number">0</span>);</span><br><span class="line">Node id = account.getAttributes().getNamedItem(<span class="string">"id"</span>);</span><br><span class="line">id.getNodeValue();</span><br></pre></td></tr></table></figure></p>
<p>SAX 代码，SAX 需要实行解析逻辑才能使用，极其不友好：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1Handler</span> <span class="keyword">extends</span> <span class="title">DefaultHandler</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 0未进入 1进入 2离开</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> product1status;</span><br><span class="line">    <span class="comment">// 0未进入 1进入 2离开</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> account1status;</span><br><span class="line">    <span class="comment">// 是否结束</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isfinish;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startElement</span><span class="params">(String uri, String localName, String qName, Attributes attributes)</span> <span class="keyword">throws</span> SAXException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.startElement(uri, localName, qName, attributes);</span><br><span class="line">        <span class="keyword">if</span> (isfinish) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (qName.equals(<span class="string">"product"</span>) &amp;&amp; product1status == <span class="number">0</span>) &#123;</span><br><span class="line">            product1status = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (qName.equals(<span class="string">"account"</span>) &amp;&amp; product1status == <span class="number">1</span> &amp;&amp; account1status == <span class="number">0</span>) &#123;</span><br><span class="line">            account1status = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"------------------------------------"</span>);</span><br><span class="line">            System.out.println(<span class="string">"id: "</span> + attributes.getValue(<span class="string">"id"</span>));</span><br><span class="line">            System.out.println(<span class="string">"------------------------------------"</span>);</span><br><span class="line">            id = attributes.getValue(<span class="string">"id"</span>);</span><br><span class="line"></span><br><span class="line">            isfinish = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">characters</span><span class="params">(<span class="keyword">char</span>[] ch, <span class="keyword">int</span> start, <span class="keyword">int</span> length)</span> <span class="keyword">throws</span> SAXException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.characters(ch, start, length);</span><br><span class="line">        <span class="keyword">if</span> (isfinish) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (product1status == <span class="number">1</span> &amp;&amp; account1status == <span class="number">1</span>) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">endElement</span><span class="params">(String uri, String localName, String qName)</span> <span class="keyword">throws</span> SAXException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.endElement(uri, localName, qName);</span><br><span class="line">        <span class="keyword">if</span> (isfinish) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (qName.equals(<span class="string">"product"</span>) &amp;&amp; product1status == <span class="number">1</span>) &#123;</span><br><span class="line">            product1status = <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (qName.equals(<span class="string">"account"</span>) &amp;&amp; product1status == <span class="number">1</span>) &#123;</span><br><span class="line">            account1status = <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">result</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"id is : "</span> + id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1. 得到SAX解析工厂</span></span><br><span class="line">        SAXParserFactory saxParserFactory = SAXParserFactory.newInstance();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 让工厂生产一个sax解析器</span></span><br><span class="line">        SAXParser newSAXParser = saxParserFactory.newSAXParser();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 传入输入流和handler，解析</span></span><br><span class="line">        Test1Handler handler = <span class="keyword">new</span> Test1Handler();</span><br><span class="line">        newSAXParser.parse(is, handler);</span><br><span class="line">        is.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 得到结果</span></span><br><span class="line">        handler.result();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>JDOM 代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List products = resource.getChildren();</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).getChildren();</span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">Attribute id = account.getAttribute(<span class="string">"id"</span>);</span><br><span class="line">id.getValue();</span><br></pre></td></tr></table></figure></p>
<p>DOM4J 代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List products = resources.elements(<span class="string">"product"</span>);</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).elements(<span class="string">"account"</span>);</span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">Attribute id = account.attribute(<span class="string">"id"</span>);</span><br><span class="line">id.getValue();</span><br></pre></td></tr></table></figure></p>
<h4 id="设置属性值"><a href="#设置属性值" class="headerlink" title="设置属性值"></a>设置属性值</h4><p>这里比较不同解析器设置属性值写法。</p>
<p>JAX 过于复杂，排除在外。</p>
<p>DOM 写法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NodeList products = resources.getElementsByTagName(<span class="string">"product"</span>);</span><br><span class="line">NodeList accounts = products.item(<span class="number">0</span>).getChildNodes();</span><br><span class="line">Node account = accounts.item(<span class="number">0</span>);</span><br><span class="line">Node id = account.getAttributes().getNamedItem(<span class="string">"id"</span>);</span><br><span class="line">id.setNodeValue(<span class="string">"123"</span>);</span><br></pre></td></tr></table></figure>
<p>JDOM 写法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List products = resource.getChildren();</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).getChildren();</span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">Attribute id = account.getAttribute(<span class="string">"id"</span>);</span><br><span class="line">id.setValue(<span class="string">"123"</span>);</span><br></pre></td></tr></table></figure>
<p>DOM4J 写法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List products = resources.elements(<span class="string">"product"</span>);</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).elements(<span class="string">"account"</span>);</span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">Attribute id = account.attribute(<span class="string">"id"</span>);</span><br><span class="line">id.setValue(<span class="string">"123"</span>);</span><br></pre></td></tr></table></figure>
<p>可以看出，DOM、JDOM、DOM4J 的差别不大，DOM4J 相对而言更符合人的逻辑。</p>
<h4 id="删除属性"><a href="#删除属性" class="headerlink" title="删除属性"></a>删除属性</h4><p>这里测试的不同的解析器如何删除元素。</p>
<p>同样的，JAX 排除掉。</p>
<p>DOM 写法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NodeList products = resources.getElementsByTagName(<span class="string">"product"</span>);</span><br><span class="line">NodeList accounts = products.item(<span class="number">0</span>).getChildNodes();</span><br><span class="line">Node account = accounts.item(<span class="number">0</span>);</span><br><span class="line">account.getAttributes().removeNamedItem(<span class="string">"id"</span>);</span><br></pre></td></tr></table></figure>
<p>JDOM 写法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List products = resource.getChildren();</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).getChildren();</span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">account.removeAttribute(<span class="string">"id"</span>);</span><br></pre></td></tr></table></figure>
<p>DOM4J 写法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List products = resources.elements(<span class="string">"product"</span>);</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).elements(<span class="string">"account"</span>);</span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">Attribute id = account.attribute(<span class="string">"id"</span>);</span><br><span class="line">account.remove(id);</span><br></pre></td></tr></table></figure>
<h4 id="获取节点值"><a href="#获取节点值" class="headerlink" title="获取节点值"></a>获取节点值</h4><p>这里测试不同解析器如何获取元素节点的值。</p>
<p>同样的，JAX 排除在外。</p>
<p>DOM 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NodeList products = resources.getElementsByTagName(<span class="string">"product"</span>);</span><br><span class="line">NodeList accounts = products.item(<span class="number">0</span>).getChildNodes();</span><br><span class="line">Node account = accounts.item(<span class="number">0</span>);</span><br><span class="line">Node nickname = account.getChildNodes().item(<span class="number">0</span>);</span><br><span class="line">nickname.getTextContent();</span><br></pre></td></tr></table></figure>
<p>JDOM 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List products = resource.getChildren();</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).getChildren();</span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">Element nickname = account.getChild(<span class="string">"nickname"</span>);</span><br><span class="line">nickname.getText();</span><br></pre></td></tr></table></figure>
<p>DOM4J 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List products = resources.elements(<span class="string">"product"</span>);</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).elements(<span class="string">"account"</span>);</span><br><span class="line"></span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line">Element nickname = account.element(<span class="string">"nickname"</span>);</span><br><span class="line">nickname.getText();</span><br></pre></td></tr></table></figure>
<h4 id="设置节点值"><a href="#设置节点值" class="headerlink" title="设置节点值"></a>设置节点值</h4><p>这里测试的是不同解析器如果设置元素节点的值。</p>
<p>JAX 排除在外。</p>
<p>DOM 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NodeList products = resources.getElementsByTagName(<span class="string">"product"</span>);</span><br><span class="line">NodeList accounts = products.item(<span class="number">0</span>).getChildNodes();</span><br><span class="line">Node account = accounts.item(<span class="number">0</span>);</span><br><span class="line">Node nickname = account.getChildNodes().item(<span class="number">0</span>);</span><br><span class="line">nickname.setTextContent(<span class="string">"123"</span>);</span><br></pre></td></tr></table></figure>
<p>JDOM 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List products = resource.getChildren();</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).getChildren();</span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">Element nickname = account.getChild(<span class="string">"nickname"</span>);</span><br><span class="line">nickname.setText(<span class="string">"123"</span>);</span><br></pre></td></tr></table></figure>
<p>DOM4J 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List products = resources.elements(<span class="string">"product"</span>);</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).elements(<span class="string">"account"</span>);</span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">Element nickname = account.element(<span class="string">"nickname"</span>);</span><br><span class="line">nickname.setText(<span class="string">"123"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="删除节点值"><a href="#删除节点值" class="headerlink" title="删除节点值"></a>删除节点值</h4><p>这里测试不同解析器如何删除元素节点的值。</p>
<p>同样的，JAX 排除在外。</p>
<p>DOM 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NodeList products = resources.getElementsByTagName(<span class="string">"product"</span>);</span><br><span class="line">NodeList accounts = products.item(<span class="number">0</span>).getChildNodes();</span><br><span class="line">Node account = accounts.item(<span class="number">0</span>);</span><br><span class="line">Node nickname = account.getChildNodes().item(<span class="number">0</span>);</span><br><span class="line">account.removeChild(nickname);</span><br></pre></td></tr></table></figure>
<p>JDOM 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List products = resource.getChildren();</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).getChildren();</span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">account.removeChild(<span class="string">"nickname"</span>);</span><br></pre></td></tr></table></figure>
<p>DOM4J 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List products = resources.elements(<span class="string">"product"</span>);</span><br><span class="line">List accounts = ((Element) products.get(<span class="number">0</span>)).elements(<span class="string">"account"</span>);</span><br><span class="line">Element account = (Element) accounts.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">Element nickname = account.element(<span class="string">"nickname"</span>);</span><br><span class="line">account.remove(nickname);</span><br></pre></td></tr></table></figure>
<h2 id="综合对比"><a href="#综合对比" class="headerlink" title="综合对比"></a>综合对比</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">解析器</th>
<th>体积</th>
<th>开发效率</th>
<th>创建性能</th>
<th>查询性能</th>
<th>修改性能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">SAX</td>
<td>30KB</td>
<td>极低</td>
<td>6238/s</td>
<td>4526/s</td>
<td>-</td>
</tr>
<tr>
<td style="text-align:left">DOM</td>
<td>0KB</td>
<td>较低</td>
<td>2928/s</td>
<td>8928571/s</td>
<td>6578947/s</td>
</tr>
<tr>
<td style="text-align:left">JDOM</td>
<td>160KB</td>
<td>低</td>
<td>491642/s</td>
<td>17241379/s</td>
<td>8064516/s</td>
</tr>
<tr>
<td style="text-align:left">DOM4J</td>
<td>946KB</td>
<td>中等</td>
<td>674308/s</td>
<td>6896551/s</td>
<td>6060606/s</td>
</tr>
</tbody>
</table>
</div>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><ol>
<li>DOM4J 性能最好，连 Sun 的 JAXM 也在用 DOM4J。目前许多开源项目中大量采用 DOM4J，例如大名鼎鼎的 Hibernate 也用 DOM4J 来读取 XML 配置文件。如果不考虑可移植性，那就采用DOM4J。</li>
<li>JDOM 和 DOM 在性能测试时表现不佳，在测试 10M 文档时内存溢出。在小文档情况下还值得考虑使用 DOM 和 JDOM。虽然 JDOM 的开发者已经说明他们期望在正式发行版前专注性能问题，但是从性能观点来看，它确实没有值得推荐之处。另外，DOM 仍是一个非常好的选择。DOM 实现广泛应用于多种编程语言。它还是许多其它与XML相关的标准的基础，因为它正式获得 W3C 推荐（与基于非标准的 Java 模型相对），所以在某些类型的项目中可能也需要它（如在 JavaScript 中使用 DOM）。 </li>
<li>SAX 表现较好，这要依赖于它特定的解析方式－事件驱动。一个 SAX 检测即将到来的XML流，但并没有载入到内存（当然当 XML 流被读入时，会有部分文档暂时隐藏在内存中）。</li>
</ol>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#介绍"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DOM"><span class="toc-number">1.0.1.</span> <span class="toc-text">DOM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SAX"><span class="toc-number">1.0.2.</span> <span class="toc-text">SAX</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JDOM"><span class="toc-number">1.0.3.</span> <span class="toc-text">JDOM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DOM4J"><span class="toc-number">1.0.4.</span> <span class="toc-text">DOM4J</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#引入依赖"><span class="toc-number">2.</span> <span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用"><span class="toc-number">3.</span> <span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#生成-XML"><span class="toc-number">3.0.1.</span> <span class="toc-text">生成 XML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取属性值"><span class="toc-number">3.0.2.</span> <span class="toc-text">获取属性值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设置属性值"><span class="toc-number">3.0.3.</span> <span class="toc-text">设置属性值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除属性"><span class="toc-number">3.0.4.</span> <span class="toc-text">删除属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取节点值"><span class="toc-number">3.0.5.</span> <span class="toc-text">获取节点值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设置节点值"><span class="toc-number">3.0.6.</span> <span class="toc-text">设置节点值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除节点值"><span class="toc-number">3.0.7.</span> <span class="toc-text">删除节点值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#综合对比"><span class="toc-number">4.</span> <span class="toc-text">综合对比</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结论"><span class="toc-number">5.</span> <span class="toc-text">结论</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&text=几种XML解析器对比"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&title=几种XML解析器对比"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&is_video=false&description=几种XML解析器对比"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=几种XML解析器对比&body=Check out this article: http://yoursite.com/2020/08/17/其它/几种XML解析器对比/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&title=几种XML解析器对比"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&title=几种XML解析器对比"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&title=几种XML解析器对比"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&title=几种XML解析器对比"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/08/17/其它/几种XML解析器对比/&name=几种XML解析器对比&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 John Doe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        
        <li><a href="/">Home</a></li>
        
        <li><a href="/archives/">Articles</a></li>
        
        <li><a href="/categories/">Categories</a></li>
        
        <li><a href="/search/">Search</a></li>
        
        <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
