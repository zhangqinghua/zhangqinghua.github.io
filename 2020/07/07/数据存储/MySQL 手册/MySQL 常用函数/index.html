<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="数值型函数求绝对值1234567SELECT ABS(5),ABS(-2.4),ABS(-24),ABS(0);+--------+-----------+----------+--------+| ABS(5) | ABS(-2.4) | ABS(-24) | ABS(0) |+--------+-----------+----------+--------+|      5 |       2">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 常用函数">
<meta property="og:url" content="http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="数值型函数求绝对值1234567SELECT ABS(5),ABS(-2.4),ABS(-24),ABS(0);+--------+-----------+----------+--------+| ABS(5) | ABS(-2.4) | ABS(-24) | ABS(0) |+--------+-----------+----------+--------+|      5 |       2">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2021-05-20T10:06:44.034Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL 常用函数">
<meta name="twitter:description" content="数值型函数求绝对值1234567SELECT ABS(5),ABS(-2.4),ABS(-24),ABS(0);+--------+-----------+----------+--------+| ABS(5) | ABS(-2.4) | ABS(-24) | ABS(0) |+--------+-----------+----------+--------+|      5 |       2">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>MySQL 常用函数</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/07/07/数据存储/MySQL 手册/MySQL 字段索引/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/07/07/数据存储/MySQL 手册/MySQL 语言分类/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&text=MySQL 常用函数"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&title=MySQL 常用函数"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&is_video=false&description=MySQL 常用函数"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=MySQL 常用函数&body=Check out this article: http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&title=MySQL 常用函数"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&title=MySQL 常用函数"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&title=MySQL 常用函数"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&title=MySQL 常用函数"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&name=MySQL 常用函数&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#数值型函数"><span class="toc-number">1.</span> <span class="toc-text">数值型函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#求绝对值"><span class="toc-number">1.0.1.</span> <span class="toc-text">求绝对值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求二次方根"><span class="toc-number">1.0.2.</span> <span class="toc-text">求二次方根</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求余数"><span class="toc-number">1.0.3.</span> <span class="toc-text">求余数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#向上取整"><span class="toc-number">1.0.4.</span> <span class="toc-text">向上取整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#向下取整"><span class="toc-number">1.0.5.</span> <span class="toc-text">向下取整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#生成随机数"><span class="toc-number">1.0.6.</span> <span class="toc-text">生成随机数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#四舍五入"><span class="toc-number">1.0.7.</span> <span class="toc-text">四舍五入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#返回参数的符号"><span class="toc-number">1.0.8.</span> <span class="toc-text">返回参数的符号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求次方"><span class="toc-number">1.0.9.</span> <span class="toc-text">求次方</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求正弦值"><span class="toc-number">1.0.10.</span> <span class="toc-text">求正弦值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求反正弦值"><span class="toc-number">1.0.11.</span> <span class="toc-text">求反正弦值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求余弦值"><span class="toc-number">1.0.12.</span> <span class="toc-text">求余弦值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求反余弦值"><span class="toc-number">1.0.13.</span> <span class="toc-text">求反余弦值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求正切值"><span class="toc-number">1.0.14.</span> <span class="toc-text">求正切值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求反正切值"><span class="toc-number">1.0.15.</span> <span class="toc-text">求反正切值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求余切值"><span class="toc-number">1.0.16.</span> <span class="toc-text">求余切值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串函数"><span class="toc-number">2.</span> <span class="toc-text">字符串函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#计算字符串长度"><span class="toc-number">2.0.1.</span> <span class="toc-text">计算字符串长度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串拼接"><span class="toc-number">2.0.2.</span> <span class="toc-text">字符串拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#替换字符串"><span class="toc-number">2.0.3.</span> <span class="toc-text">替换字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#将字母转换成小写"><span class="toc-number">2.0.4.</span> <span class="toc-text">将字母转换成小写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#将字母转换成大写"><span class="toc-number">2.0.5.</span> <span class="toc-text">将字母转换成大写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#从左侧截取字符串"><span class="toc-number">2.0.6.</span> <span class="toc-text">从左侧截取字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#从右侧截取字符串"><span class="toc-number">2.0.7.</span> <span class="toc-text">从右侧截取字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除空格"><span class="toc-number">2.0.8.</span> <span class="toc-text">删除空格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串替换"><span class="toc-number">2.0.9.</span> <span class="toc-text">字符串替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#截取字符串"><span class="toc-number">2.0.10.</span> <span class="toc-text">截取字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#反转字符串"><span class="toc-number">2.0.11.</span> <span class="toc-text">反转字符串</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#日期和时间函数"><span class="toc-number">3.</span> <span class="toc-text">日期和时间函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#获取系统当前日期"><span class="toc-number">3.0.1.</span> <span class="toc-text">获取系统当前日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取系统当前时间"><span class="toc-number">3.0.2.</span> <span class="toc-text">获取系统当前时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取当前时间日期"><span class="toc-number">3.0.3.</span> <span class="toc-text">获取当前时间日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取-UNIX-时间戳"><span class="toc-number">3.0.4.</span> <span class="toc-text">获取 UNIX 时间戳</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#时间戳转日期"><span class="toc-number">3.0.5.</span> <span class="toc-text">时间戳转日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期的月份"><span class="toc-number">3.0.6.</span> <span class="toc-text">获取指定日期的月份</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期月份的英文名称"><span class="toc-number">3.0.7.</span> <span class="toc-text">获取指定日期月份的英文名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期的星期名称"><span class="toc-number">3.0.8.</span> <span class="toc-text">获取指定日期的星期名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取日期对应的周索引"><span class="toc-number">3.0.9.</span> <span class="toc-text">获取日期对应的周索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期是一年中的第几周"><span class="toc-number">3.0.10.</span> <span class="toc-text">获取指定日期是一年中的第几周</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期在一年中的位置"><span class="toc-number">3.0.11.</span> <span class="toc-text">获取指定日期在一年中的位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期在一个月的位置"><span class="toc-number">3.0.12.</span> <span class="toc-text">获取指定日期在一个月的位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取年份"><span class="toc-number">3.0.13.</span> <span class="toc-text">获取年份</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#将时间转换为秒值"><span class="toc-number">3.0.14.</span> <span class="toc-text">将时间转换为秒值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#将秒值转换为时间格式"><span class="toc-number">3.0.15.</span> <span class="toc-text">将秒值转换为时间格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#向日期添加指定时间间隔"><span class="toc-number">3.0.16.</span> <span class="toc-text">向日期添加指定时间间隔</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#日期减法运算"><span class="toc-number">3.0.17.</span> <span class="toc-text">日期减法运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#时间加法运算"><span class="toc-number">3.0.18.</span> <span class="toc-text">时间加法运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#时间减法运算"><span class="toc-number">3.0.19.</span> <span class="toc-text">时间减法运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取两个日期的时间间隔"><span class="toc-number">3.0.20.</span> <span class="toc-text">获取两个日期的时间间隔</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#格式化指定的日期"><span class="toc-number">3.0.21.</span> <span class="toc-text">格式化指定的日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期在一周内的索引位置"><span class="toc-number">3.0.22.</span> <span class="toc-text">获取指定日期在一周内的索引位置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#聚合函数"><span class="toc-number">4.</span> <span class="toc-text">聚合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询指定列的最大值"><span class="toc-number">4.0.1.</span> <span class="toc-text">查询指定列的最大值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询指定列的最小值"><span class="toc-number">4.0.2.</span> <span class="toc-text">查询指定列的最小值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#统计查询结果的行数"><span class="toc-number">4.0.3.</span> <span class="toc-text">统计查询结果的行数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求和"><span class="toc-number">4.0.4.</span> <span class="toc-text">求和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求平均值"><span class="toc-number">4.0.5.</span> <span class="toc-text">求平均值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#流程控制函数"><span class="toc-number">5.</span> <span class="toc-text">流程控制函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#判断"><span class="toc-number">5.0.0.1.</span> <span class="toc-text">判断</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#判断是否为空"><span class="toc-number">5.0.1.</span> <span class="toc-text">判断是否为空</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#搜索语句"><span class="toc-number">5.0.2.</span> <span class="toc-text">搜索语句</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#特殊函数"><span class="toc-number">6.</span> <span class="toc-text">特殊函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#最后插入行的生成序列号"><span class="toc-number">6.0.1.</span> <span class="toc-text">最后插入行的生成序列号</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题"><span class="toc-number">7.</span> <span class="toc-text">问题</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        MySQL 常用函数
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Hexo</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-07-07T00:00:11.000Z" itemprop="datePublished">2020-07-07</time>
        
        (Updated: <time datetime="2021-05-20T10:06:44.034Z" itemprop="dateModified">2021-05-20</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/数据存储/">数据存储</a> › <a class="category-link" href="/categories/数据存储/MySQL-手册/">MySQL 手册</a>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="数值型函数"><a href="#数值型函数" class="headerlink" title="数值型函数"></a>数值型函数</h2><h4 id="求绝对值"><a href="#求绝对值" class="headerlink" title="求绝对值"></a>求绝对值</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ABS</span>(<span class="number">5</span>),<span class="keyword">ABS</span>(<span class="number">-2.4</span>),<span class="keyword">ABS</span>(<span class="number">-24</span>),<span class="keyword">ABS</span>(<span class="number">0</span>);</span><br><span class="line">+<span class="comment">--------+-----------+----------+--------+</span></span><br><span class="line">| ABS(5) | ABS(-2.4) | ABS(-24) | ABS(0) |</span><br><span class="line">+<span class="comment">--------+-----------+----------+--------+</span></span><br><span class="line">|      5 |       2.4 |       24 |      0 |</span><br><span class="line">+<span class="comment">--------+-----------+----------+--------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.10</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="求二次方根"><a href="#求二次方根" class="headerlink" title="求二次方根"></a>求二次方根</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SQRT</span>(<span class="number">25</span>),<span class="keyword">SQRT</span>(<span class="number">120</span>),<span class="keyword">SQRT</span>(<span class="number">-9</span>);</span><br><span class="line">+<span class="comment">----------+--------------------+----------+</span></span><br><span class="line">| SQRT(25) | SQRT(120)          | SQRT(-9) |</span><br><span class="line">+<span class="comment">----------+--------------------+----------+</span></span><br><span class="line">|        5 | 10.954451150103322 |     NULL |</span><br><span class="line">+<span class="comment">----------+--------------------+----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.06</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="求余数"><a href="#求余数" class="headerlink" title="求余数"></a>求余数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MOD</span>(<span class="number">63</span>,<span class="number">8</span>),<span class="keyword">MOD</span>(<span class="number">120</span>,<span class="number">10</span>),<span class="keyword">MOD</span>(<span class="number">15.5</span>,<span class="number">3</span>);</span><br><span class="line">+<span class="comment">-----------+-------------+-------------+</span></span><br><span class="line">| MOD(63,8) | MOD(120,10) | MOD(15.5,3) |</span><br><span class="line">+<span class="comment">-----------+-------------+-------------+</span></span><br><span class="line">|         7 |           0 |         0.5 |</span><br><span class="line">+<span class="comment">-----------+-------------+-------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="向上取整"><a href="#向上取整" class="headerlink" title="向上取整"></a>向上取整</h4><p><code>CEIL(x)</code> 和 <code>CEILING(x)</code> 的意义相同，返回不小于 x 的最小整数值，返回值转化为一个 BIGINT。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CEIL</span>(<span class="number">-2.5</span>),<span class="keyword">CEILING</span>(<span class="number">2.5</span>);</span><br><span class="line">+<span class="comment">------------+--------------+</span></span><br><span class="line">| CEIL(-2.5) | CEILING(2.5) |</span><br><span class="line">+<span class="comment">------------+--------------+</span></span><br><span class="line">|         -2 |            3 |</span><br><span class="line">+<span class="comment">------------+--------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="向下取整"><a href="#向下取整" class="headerlink" title="向下取整"></a>向下取整</h4><p><code>FLOOR(x)</code> 函数返回小于 x 的最大整数值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">FLOOR</span>(<span class="number">5</span>),<span class="keyword">FLOOR</span>(<span class="number">5.66</span>),<span class="keyword">FLOOR</span>(<span class="number">-4</span>),<span class="keyword">FLOOR</span>(<span class="number">-4.66</span>);</span><br><span class="line">+<span class="comment">----------+-------------+-----------+--------------+</span></span><br><span class="line">| FLOOR(5) | FLOOR(5.66) | FLOOR(-4) | FLOOR(-4.66) |</span><br><span class="line">+<span class="comment">----------+-------------+-----------+--------------+</span></span><br><span class="line">|        5 |           5 |        -4 |           -5 |</span><br><span class="line">+<span class="comment">----------+-------------+-----------+--------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="生成随机数"><a href="#生成随机数" class="headerlink" title="生成随机数"></a>生成随机数</h4><p><code>RAND()</code> 函数被调用时，可以产生一个在 0 和 1 之间的随机数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RAND</span>(), <span class="keyword">RAND</span>(), <span class="keyword">RAND</span>();</span><br><span class="line">+<span class="comment">------------------+-----------------+------------------+</span></span><br><span class="line">| RAND()           | RAND()          | RAND()           |</span><br><span class="line">+<span class="comment">------------------+-----------------+------------------+</span></span><br><span class="line">| 0.45464584925645 | 0.1824410643265 | 0.54826780459682 |</span><br><span class="line">+<span class="comment">------------------+-----------------+------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>当使用整数作为参数调用时，<code>RAND()</code> 使用该值作为随机数的种子发生器。每次种子使用给定值生成，<code>RAND()</code> 将产生一个可重复的系列数字。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RAND</span>(<span class="number">1</span>),<span class="keyword">RAND</span>(),<span class="keyword">RAND</span>(<span class="number">1</span>);</span><br><span class="line">+<span class="comment">---------------------+--------------------+---------------------+</span></span><br><span class="line">| RAND(1)             | RAND()             | RAND(1)             |</span><br><span class="line">+<span class="comment">---------------------+--------------------+---------------------+</span></span><br><span class="line">| 0.40540353712197724 | 0.7901452330780637 | 0.40540353712197724 |</span><br><span class="line">+<span class="comment">---------------------+--------------------+---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="四舍五入"><a href="#四舍五入" class="headerlink" title="四舍五入"></a>四舍五入</h4><p><code>ROUND(x)</code> 函数返回最接近于参数 x 的整数；<code>ROUND(x,y)</code> 函数对参数 x 进行四舍五入的操作，返回值保留小数点后面指定的 y 位。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT ROUND(-6.6),ROUND(-8.44),ROUND(3.44);</span><br><span class="line">+<span class="comment">-------------+--------------+-------------+</span></span><br><span class="line">| ROUND(-6.6) | ROUND(-8.44) | ROUND(3.44) |</span><br><span class="line">+<span class="comment">-------------+--------------+-------------+</span></span><br><span class="line">|          -7 |           -8 |           3 |</span><br><span class="line">+<span class="comment">-------------+--------------+-------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ROUND</span>(<span class="number">-6.66</span>,<span class="number">1</span>),<span class="keyword">ROUND</span>(<span class="number">3.33</span>,<span class="number">3</span>),<span class="keyword">ROUND</span>(<span class="number">88.66</span>,<span class="number">-1</span>),<span class="keyword">ROUND</span>(<span class="number">88.46</span>,<span class="number">-2</span>);</span><br><span class="line">+<span class="comment">----------------+---------------+-----------------+-----------------+</span></span><br><span class="line">| ROUND(-6.66,1) | ROUND(3.33,3) | ROUND(88.66,-1) | ROUND(88.46,-2) |</span><br><span class="line">+<span class="comment">----------------+---------------+-----------------+-----------------+</span></span><br><span class="line">|           -6.7 |         3.330 |              90 |             100 |</span><br><span class="line">+<span class="comment">----------------+---------------+-----------------+-----------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="返回参数的符号"><a href="#返回参数的符号" class="headerlink" title="返回参数的符号"></a>返回参数的符号</h4><p>符号函数 <code>SIGN(x)</code> 返回参数的符号，x 的值为负、零和正时返回结果依次为 -1、0 和 1。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SIGN</span>(<span class="number">-6</span>),<span class="keyword">SIGN</span>(<span class="number">0</span>),<span class="keyword">SIGN</span>(<span class="number">34</span>);</span><br><span class="line">+<span class="comment">----------+---------+----------+</span></span><br><span class="line">| SIGN(-6) | SIGN(0) | SIGN(34) |</span><br><span class="line">+<span class="comment">----------+---------+----------+</span></span><br><span class="line">|       -1 |       0 |        1 |</span><br><span class="line">+<span class="comment">----------+---------+----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="求次方"><a href="#求次方" class="headerlink" title="求次方"></a>求次方</h4><p><code>POW(x,y)</code> 函数和 <code>POWER(x,y)</code> 函数用于计算 x 的 y 次方。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">POW</span>(<span class="number">5</span>,<span class="number">-2</span>),<span class="keyword">POW</span>(<span class="number">10</span>,<span class="number">3</span>),<span class="keyword">POW</span>(<span class="number">100</span>,<span class="number">0</span>),<span class="keyword">POWER</span>(<span class="number">4</span>,<span class="number">3</span>),<span class="keyword">POWER</span>(<span class="number">6</span>,<span class="number">-3</span>);</span><br><span class="line">+<span class="comment">-----------+-----------+------------+------------+----------------------+</span></span><br><span class="line">| POW(5,-2) | POW(10,3) | POW(100,0) | POWER(4,3) | POWER(6,-3)          |</span><br><span class="line">+<span class="comment">-----------+-----------+------------+------------+----------------------+</span></span><br><span class="line">|      0.04 |      1000 |          1 |         64 | 0.004629629629629629 |</span><br><span class="line">+<span class="comment">-----------+-----------+------------+------------+----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="求正弦值"><a href="#求正弦值" class="headerlink" title="求正弦值"></a>求正弦值</h4><p>中正弦函数 <code>SIN(x)</code> 返回 x 的正弦值，其中 x 为弧度值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SIN</span>(<span class="number">1</span>),<span class="keyword">SIN</span>(<span class="number">0.5</span>*<span class="keyword">PI</span>());</span><br><span class="line">+<span class="comment">--------------------+---------------+</span></span><br><span class="line">| SIN(1)             | SIN(0.5*PI()) |</span><br><span class="line">+<span class="comment">--------------------+---------------+</span></span><br><span class="line">| 0.8414709848078965 |             1 |</span><br><span class="line">+<span class="comment">--------------------+---------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.15</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="求反正弦值"><a href="#求反正弦值" class="headerlink" title="求反正弦值"></a>求反正弦值</h4><p>反正弦函数 <code>ASIN(x)</code> 返回 x 的反正弦值，若 x 不在 -1 到 1 的范围之内，则返回 NULL。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ASIN</span>(<span class="number">0.8414709848078965</span>),<span class="keyword">ASIN</span>(<span class="number">2</span>);</span><br><span class="line">+<span class="comment">--------------------------+---------+</span></span><br><span class="line">| ASIN(0.8414709848078965) | ASIN(2) |</span><br><span class="line">+<span class="comment">--------------------------+---------+</span></span><br><span class="line">|                        1 |    NULL |</span><br><span class="line">+<span class="comment">--------------------------+---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="求余弦值"><a href="#求余弦值" class="headerlink" title="求余弦值"></a>求余弦值</h4><p>余弦函数 <code>COS(x)</code> 返回 x 的余弦值，x 为弧度值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COS</span>(<span class="number">1</span>),<span class="keyword">COS</span>(<span class="number">0</span>),<span class="keyword">COS</span>(<span class="keyword">PI</span>());</span><br><span class="line">+<span class="comment">--------------------+--------+-----------+</span></span><br><span class="line">| COS(1)             | COS(0) | COS(PI()) |</span><br><span class="line">+<span class="comment">--------------------+--------+-----------+</span></span><br><span class="line">| 0.5403023058681398 |      1 |        -1 |</span><br><span class="line">+<span class="comment">--------------------+--------+-----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="求反余弦值"><a href="#求反余弦值" class="headerlink" title="求反余弦值"></a>求反余弦值</h4><p>反余弦函数 <code>ACOS(x)</code> 。x 值的范围必须在 -1 和 1 之间，否则返回 NULL。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ACOS</span>(<span class="number">2</span>),<span class="keyword">ACOS</span>(<span class="number">1</span>),<span class="keyword">ACOS</span>(<span class="number">-1</span>);</span><br><span class="line">+<span class="comment">---------+---------+-------------------+</span></span><br><span class="line">| ACOS(2) | ACOS(1) | ACOS(-1)          |</span><br><span class="line">+<span class="comment">---------+---------+-------------------+</span></span><br><span class="line">|    NULL |       0 | 3.141592653589793 |</span><br><span class="line">+<span class="comment">---------+---------+-------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="求正切值"><a href="#求正切值" class="headerlink" title="求正切值"></a>求正切值</h4><p>正切函数 <code>TAN(x)</code> 返回 x 的正切值，x 为给定的弧度值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">TAN</span>(<span class="number">1</span>),<span class="keyword">TAN</span>(<span class="number">0</span>);</span><br><span class="line">+<span class="comment">--------------------+--------+</span></span><br><span class="line">| TAN(1)             | TAN(0) |</span><br><span class="line">+<span class="comment">--------------------+--------+</span></span><br><span class="line">| 1.5574077246549023 |      0 |</span><br><span class="line">+<span class="comment">--------------------+--------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="求反正切值"><a href="#求反正切值" class="headerlink" title="求反正切值"></a>求反正切值</h4><p>反正切 <code>ATAN(x)</code> 返回 x 的反正切值，正切为 x 的值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ATAN</span>(<span class="number">1.5574077246549023</span>),<span class="keyword">ATAN</span>(<span class="number">0</span>);</span><br><span class="line">+<span class="comment">--------------------------+---------+</span></span><br><span class="line">| ATAN(1.5574077246549023) | ATAN(0) |</span><br><span class="line">+<span class="comment">--------------------------+---------+</span></span><br><span class="line">|                        1 |       0 |</span><br><span class="line">+<span class="comment">--------------------------+---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.05</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="求余切值"><a href="#求余切值" class="headerlink" title="求余切值"></a>求余切值</h4><p>余切函数 <code>COT(x)</code> 返回 x 的余切值，x 是给定的弧度值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> COT(<span class="number">1</span>);</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| COT(1)             |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| 0.6420926159343306 |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><h4 id="计算字符串长度"><a href="#计算字符串长度" class="headerlink" title="计算字符串长度"></a>计算字符串长度</h4><p><code>LENGTH(str)</code> 函数的返回值为字符串的字节长度，使用 uft8（UNICODE 的一种变长字符编码，又称万国码）编码字符集时，一个汉字是 3 个字节，一个数字或字母是一个字节。<code>CHAR_LENGTH(str)</code> 返回字符串的长度。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LENGTH</span>(<span class="string">'name'</span>),<span class="keyword">LENGTH</span>(<span class="string">'数据库'</span>), <span class="keyword">CHAR_LENGTH</span>(<span class="string">'name'</span>), <span class="keyword">CHAR_LENGTH</span>(<span class="string">'数据库'</span>);</span><br><span class="line">+<span class="comment">----------------+---------------------+----------------+---------------------+</span></span><br><span class="line">|LENGTH('name')  | LENGTH('数据库')    |LENGTH('name')  | LENGTH('数据库')    |</span><br><span class="line">+<span class="comment">----------------+---------------------+----------------+---------------------+</span></span><br><span class="line">|              4 |                   9 |              4 |                   3 |</span><br><span class="line">+<span class="comment">----------------+---------------------+----------------+---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h4><p>中的 <code>CONCAT(sl，s2，...)</code> 函数返回结果为连接参数产生的字符串，或许有一个或多个参数。</p>
<p>若有任何一个参数为 <code>NULL</code>，则返回值为 <code>NULL</code>。若所有参数均为非二进制字符串，则结果为非二进制字符串。若自变量中含有任一二进制字符串，则结果为一个二进制字符串。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="string">'MySQL'</span>,<span class="string">'5.7'</span>),<span class="keyword">CONCAT</span>(<span class="string">'MySQL'</span>,<span class="literal">NULL</span>);</span><br><span class="line">+<span class="comment">-----------------------+----------------------+</span></span><br><span class="line">| CONCAT('MySQL','5.7') | CONCAT('MySQL',NULL) |</span><br><span class="line">+<span class="comment">-----------------------+----------------------+</span></span><br><span class="line">| MySQL5.7              | NULL                 |</span><br><span class="line">+<span class="comment">-----------------------+----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="替换字符串"><a href="#替换字符串" class="headerlink" title="替换字符串"></a>替换字符串</h4><p>MySQL 中替换字符串函数 <code>INSERT(s1，x，len，s2)</code> 返回字符串 s1，子字符串起始于 x 位置，并且用 len 个字符长的字符串代替 s2。</p>
<p>若 x 超过字符串长度，则返回值为原始字符串。假如 len 的长度大于其他字符串的长度，则从位置 x 开始替换。若任何一个参数为 NULL，则返回值为 NULL。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span>(<span class="string">'Football'</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="string">'Play'</span>) <span class="keyword">AS</span> col1,</span><br><span class="line">       <span class="keyword">INSERT</span>(<span class="string">'Football'</span>,<span class="number">-1</span>,<span class="number">4</span>,<span class="string">'Play'</span>) <span class="keyword">AS</span> col2,</span><br><span class="line">       <span class="keyword">INSERT</span>(<span class="string">'Football'</span>,<span class="number">3</span>,<span class="number">20</span>,<span class="string">'Play'</span>) <span class="keyword">AS</span> col3;</span><br><span class="line">+<span class="comment">----------+----------+--------+</span></span><br><span class="line">| col1     | col2     | col3   |</span><br><span class="line">+<span class="comment">----------+----------+--------+</span></span><br><span class="line">| FPlayall | Football | FoPlay |</span><br><span class="line">+<span class="comment">----------+----------+--------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="将字母转换成小写"><a href="#将字母转换成小写" class="headerlink" title="将字母转换成小写"></a>将字母转换成小写</h4><p>MySQL 中字母小写转换函数 <code>LOWER(str)</code> 可以将字符串 str 中的字母字符全部转换成小写。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LOWER</span>(<span class="string">'BLUE'</span>),<span class="keyword">LOWER</span>(<span class="string">'Blue'</span>);</span><br><span class="line">+<span class="comment">---------------+---------------+</span></span><br><span class="line">| LOWER('BLUE') | LOWER('Blue') |</span><br><span class="line">+<span class="comment">---------------+---------------+</span></span><br><span class="line">| blue          | blue          |</span><br><span class="line">+<span class="comment">---------------+---------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="将字母转换成大写"><a href="#将字母转换成大写" class="headerlink" title="将字母转换成大写"></a>将字母转换成大写</h4><p>MySQL 中字母大写转换函数 <code>UPPER(str)</code> 可以将字符串 str 中的字母字符全部转换成大写。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">UPPER</span>(<span class="string">'green'</span>),<span class="keyword">UPPER</span>(<span class="string">'Green'</span>);</span><br><span class="line">+<span class="comment">----------------+----------------+</span></span><br><span class="line">| UPPER('green') | UPPER('Green') |</span><br><span class="line">+<span class="comment">----------------+----------------+</span></span><br><span class="line">| GREEN          | GREEN          |</span><br><span class="line">+<span class="comment">----------------+----------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="从左侧截取字符串"><a href="#从左侧截取字符串" class="headerlink" title="从左侧截取字符串"></a>从左侧截取字符串</h4><p>MySQL 中的 <code>LEFT(s，n)</code> 函数返回字符串 s 最左边的 n 个字符。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="string">'MySQL'</span>,<span class="number">2</span>);</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">| LEFT('MySQL',2) |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">| My              |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="从右侧截取字符串"><a href="#从右侧截取字符串" class="headerlink" title="从右侧截取字符串"></a>从右侧截取字符串</h4><p>MySQL 中的 <code>RIGHT(s，n)</code> 函数返回字符串 s 最右边的 n 个字符。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RIGHT</span>(<span class="string">'MySQL'</span>,<span class="number">3</span>);</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| RIGHT('MySQL',3) |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| SQL              |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="删除空格"><a href="#删除空格" class="headerlink" title="删除空格"></a>删除空格</h4><p>MySQL 中删除空格函数 <code>TRIM(s)</code> 删除字符串 s 两侧的空格。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">'[   mobile   ]'</span>,<span class="keyword">CONCAT</span>(<span class="string">'['</span>,<span class="keyword">TRIM</span>(<span class="string">'   mobile   '</span>),<span class="string">']'</span>);</span><br><span class="line">+<span class="comment">----------------+--------------------------------------+</span></span><br><span class="line">| [   mobile   ] | CONCAT('[',TRIM('   mobile   '),']') |</span><br><span class="line">+<span class="comment">----------------+--------------------------------------+</span></span><br><span class="line">| [   mobile   ] | [mobile]                             |</span><br><span class="line">+<span class="comment">----------------+--------------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.07</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="字符串替换"><a href="#字符串替换" class="headerlink" title="字符串替换"></a>字符串替换</h4><p>MySQL 中替换函数 <code>REPLACE(s，s1，s2)</code> 使用字符串 s2 替换字符串 s 中所有的字符串 s1。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">REPLACE</span>(<span class="string">'aaa.mysql.com'</span>,<span class="string">'a'</span>,<span class="string">'w'</span>);</span><br><span class="line">+<span class="comment">----------------------------------+</span></span><br><span class="line">| <span class="keyword">REPLACE</span>(<span class="string">'aaa.mysql.com'</span>,<span class="string">'a'</span>,<span class="string">'w'</span>) |</span><br><span class="line">+<span class="comment">----------------------------------+</span></span><br><span class="line">| www.mysql.com                    |</span><br><span class="line">+<span class="comment">----------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="截取字符串"><a href="#截取字符串" class="headerlink" title="截取字符串"></a>截取字符串</h4><p>MySQL 中获取子串函数<code>SUBSTRING(s，n，len)</code> 带有 len 参数的格式，从字符串 s 返回一个长度同 len 字符相同的子字符串，起始于位置 n。</p>
<p>也可能对 n 使用一个负值。假若这样，则子字符串的位置起始于字符串结尾的第 n 个字符，即倒数第 n 个字符，而不是字符串的开头位置。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUBSTRING</span>(<span class="string">'computer'</span>,<span class="number">3</span>) <span class="keyword">AS</span> col1,</span><br><span class="line">    -&gt; <span class="keyword">SUBSTRING</span>(<span class="string">'computer'</span>,<span class="number">3</span>,<span class="number">4</span>) <span class="keyword">AS</span> col2,</span><br><span class="line">    -&gt; <span class="keyword">SUBSTRING</span>(<span class="string">'computer'</span>,<span class="number">-3</span>) <span class="keyword">AS</span> col3,</span><br><span class="line">    -&gt; <span class="keyword">SUBSTRING</span>(<span class="string">'computer'</span>,<span class="number">-5</span>,<span class="number">3</span>) <span class="keyword">AS</span> col4;</span><br><span class="line">+<span class="comment">--------+------+------+------+</span></span><br><span class="line">| col1   | col2 | col3 | col4 |</span><br><span class="line">+<span class="comment">--------+------+------+------+</span></span><br><span class="line">| mputer | mput | ter  | put  |</span><br><span class="line">+<span class="comment">--------+------+------+------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="反转字符串"><a href="#反转字符串" class="headerlink" title="反转字符串"></a>反转字符串</h4><p>MySQL 中字符串逆序函数 <code>REVERSE(s)</code> 可以将字符串 s 反转，返回的字符串的顺序和 s 字符串的顺序相反。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">REVERSE</span>(<span class="string">'hello'</span>);</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| REVERSE('hello') |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| olleh            |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="日期和时间函数"><a href="#日期和时间函数" class="headerlink" title="日期和时间函数"></a>日期和时间函数</h2><h4 id="获取系统当前日期"><a href="#获取系统当前日期" class="headerlink" title="获取系统当前日期"></a>获取系统当前日期</h4><p>MySQL 中 <code>CURDATE()</code>和 <code>CURRENT_DATE()</code> 函数的作用相同，将当前日期按照“YYYY-MM-DD”或“YYYYMMDD”格式的值返回，具体格式根据函数用在字符串或数字语境中而定。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CURDATE</span>(),<span class="keyword">CURRENT_DATE</span>(),<span class="keyword">CURRENT_DATE</span>()+<span class="number">0</span>;</span><br><span class="line">+<span class="comment">------------+----------------+------------------+</span></span><br><span class="line">| CURDATE()  | CURRENT_DATE() | CURRENT_DATE()+0 |</span><br><span class="line">+<span class="comment">------------+----------------+------------------+</span></span><br><span class="line">| 2017-04-01 | 2017-04-01     |         20170401 |</span><br><span class="line">+<span class="comment">------------+----------------+------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看到，两个函数的作用相同，返回了相同的系统当前日期，“CURDATE()+0”将当前日期值转换为数值型的。</p>
<h4 id="获取系统当前时间"><a href="#获取系统当前时间" class="headerlink" title="获取系统当前时间"></a>获取系统当前时间</h4><p>MySQL 中 <code>CURTIME()</code> 和<code>CURRENT_TIME()</code> 函数的作用相同，将当前时间以“HH：MM：SS”或“HHMMSS”格式返回，具体格式根据函数用在字符串或数字语境中而定。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CURTIME</span>(),<span class="keyword">CURRENT_TIME</span>(),<span class="keyword">CURRENT_TIME</span>()+<span class="number">0</span>;</span><br><span class="line">+<span class="comment">-----------+----------------+------------------+</span></span><br><span class="line">| CURTIME() | CURRENT_TIME() | CURRENT_TIME()+0 |</span><br><span class="line">+<span class="comment">-----------+----------------+------------------+</span></span><br><span class="line">| 19:39:51  | 19:39:51       |           193951 |</span><br><span class="line">+<span class="comment">-----------+----------------+------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看出，两个函数返回的结果相同，都返回了当前的系统时间。CURRENT_TIME()+0 是将当前日期值转换为数值型的。</p>
<h4 id="获取当前时间日期"><a href="#获取当前时间日期" class="headerlink" title="获取当前时间日期"></a>获取当前时间日期</h4><p>MySQL中 <code>NOW()</code> 和 <code>SYSDATE()</code> 函数的作用相同，都是返回当前日期和时间值，格式为“YYYY-MM-DD HH：MM：SS”或“YYYYMMDDHHMMSS”，具体格式根据函数用在字符串或数字语境中而定。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOW</span>(),<span class="keyword">SYSDATE</span>();</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| NOW()               | SYSDATE()           |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| 2017-04-01 19:36:52 | 2017-04-01 19:36:52 |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<p>虽然在 MySQL 中 <code>NOW()</code> 和 <code>SYSDATE()</code> 都表示当前时间，但是 <code>NOW()</code> 取的是语句开始执行的时间，而 <code>SYSDATE()</code> 取的是语句执行过程中动态的实时时间。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">now</span>(),<span class="keyword">sysdate</span>(),<span class="keyword">sleep</span>(<span class="number">3</span>),<span class="keyword">now</span>(),<span class="keyword">sysdate</span>();</span><br><span class="line">+<span class="comment">-----------------------+------------------------+-------------+-----------------------+---------------------+</span></span><br><span class="line">| now()                 | sysdate()              | sleep(3)    | now()                 | sysdate()           |</span><br><span class="line">+<span class="comment">-----------------------+------------------------+-------------+------------------- ---+---------------------+</span></span><br><span class="line">| 2019-02-27 10:59:39   | 2019-02-27 10:59:39    |        0    | 2019-02-27 10:59:39   | 2019-02-27 10:59:42 |</span><br><span class="line">+<span class="comment">-----------------------+------------------------+-------------+-----------------------+---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">3.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="获取-UNIX-时间戳"><a href="#获取-UNIX-时间戳" class="headerlink" title="获取 UNIX 时间戳"></a>获取 UNIX 时间戳</h4><p>MySQL <code>UNIX_TIMESTAMP(date)</code> 若无参数调用，返回一个无符号整数类型的 UNIX 时间戳（’1970-01-01 00:00:00’GMT之后的秒数）。若用 date 来调用 <code>UNIX_TIMESTAMP()</code>，它会将参数值以’1970-01-01 00:00:00’GMT后的秒数的形式返回。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">UNIX_TIMESTAMP</span>(),<span class="keyword">UNIX_TIMESTAMP</span>(<span class="keyword">NOW</span>()),<span class="keyword">NOW</span>();</span><br><span class="line">+<span class="comment">------------------+-----------------------+---------------------+</span></span><br><span class="line">| UNIX_TIMESTAMP() | UNIX_TIMESTAMP(NOW()) | NOW()               |</span><br><span class="line">+<span class="comment">------------------+-----------------------+---------------------+</span></span><br><span class="line">|       1551251270 |            1551251270 | 2019-02-27 15:07:50 |</span><br><span class="line">+<span class="comment">------------------+-----------------------+---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="时间戳转日期"><a href="#时间戳转日期" class="headerlink" title="时间戳转日期"></a>时间戳转日期</h4><p>MySQL <code>FROM_UNIXTIME(date)</code> 函数把 UNIX 时间戳转换为普通格式的日期时间值，与 <code>UNIX_TIMESTAMP ()</code> 函数互为反函数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> FROM_UNIXTIME(<span class="number">1150051270</span>);</span><br><span class="line">+<span class="comment">---------------------------+</span></span><br><span class="line">| FROM_UNIXTIME(1150051270) |</span><br><span class="line">+<span class="comment">---------------------------+</span></span><br><span class="line">| 2006-06-12 02:41:10       |</span><br><span class="line">+<span class="comment">---------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="获取指定日期的月份"><a href="#获取指定日期的月份" class="headerlink" title="获取指定日期的月份"></a>获取指定日期的月份</h4><p>MySQL 中 <code>MONTH(date)</code> 函数返回指定 date 对应的月份，范围为 1～12。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(<span class="string">'2017-12-15'</span>);</span><br><span class="line">+<span class="comment">---------------------+</span></span><br><span class="line">| MONTH('2017-12-15') |</span><br><span class="line">+<span class="comment">---------------------+</span></span><br><span class="line">|                  12 |</span><br><span class="line">+<span class="comment">---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="获取指定日期月份的英文名称"><a href="#获取指定日期月份的英文名称" class="headerlink" title="获取指定日期月份的英文名称"></a>获取指定日期月份的英文名称</h4><p>MySQL 中 <code>MONTHNAME(date)</code> 函数返回日期 date 对应月份的英文全名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> MONTHNAME(<span class="string">'2017-12-15'</span>);</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| MONTHNAME('2017-12-15') |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| December                |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="获取指定日期的星期名称"><a href="#获取指定日期的星期名称" class="headerlink" title="获取指定日期的星期名称"></a>获取指定日期的星期名称</h4><p>MySQL <code>DAYNAME(date)</code> 函数返回 date 对应的工作日英文名称，例如 Sunday、Monday 等。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAYNAME</span>(<span class="string">'2006-06-12'</span>);</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| DAYNAME('2006-06-12') |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| Monday                |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="获取日期对应的周索引"><a href="#获取日期对应的周索引" class="headerlink" title="获取日期对应的周索引"></a>获取日期对应的周索引</h4><p>MySQL 中 <code>DAYOFWEEK(d)</code> 函数返回 d 对应的一周中的索引（位置）。1 表示周日，2 表示周一，……，7 表示周六。这些索引值对应于ODBC标准。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAYOFWEEK</span>(<span class="string">'2017-12-15'</span>);</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| DAYOFWEEK('2017-12-15') |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">|                       6 |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="获取指定日期是一年中的第几周"><a href="#获取指定日期是一年中的第几周" class="headerlink" title="获取指定日期是一年中的第几周"></a>获取指定日期是一年中的第几周</h4><p>MySQL <code>WEEK()</code> 函数计算日期 date 是一年中的第几周。WEEK(date,mode) 函数允许指定星期是否起始于周日或周一，以及返回值的范围是否为 0～52 或 1～53。</p>
<p>WEEK函数接受两个参数：</p>
<ol>
<li>date是要获取周数的日期。</li>
<li>mode是一个可选参数，用于确定周数计算的逻辑。</li>
</ol>
<p>如果忽略 mode 参数，默认情况下 WEEK 函数将使用 default_week_format 系统变量的值。要获取 default_week_format 变量的当前值，请使用 SHOW VARIABLES 语句如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'default_week_format'</span>;</span><br><span class="line">+<span class="comment">---------------------+-------+</span></span><br><span class="line">| Variable_name       | Value |</span><br><span class="line">+<span class="comment">---------------------+-------+</span></span><br><span class="line">| default_week_format | 0     |</span><br><span class="line">+<span class="comment">---------------------+-------+</span></span><br><span class="line">1 row in <span class="keyword">set</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>WEEK(date)</code> 函数查询指定日期是一年中的第几周。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">WEEK</span>(<span class="string">'2018-10-25'</span>,<span class="number">1</span>);</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">| WEEK('2018-10-25',1) |</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">|                   43 |</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="获取指定日期在一年中的位置"><a href="#获取指定日期在一年中的位置" class="headerlink" title="获取指定日期在一年中的位置"></a>获取指定日期在一年中的位置</h4><p>MySQL 中 <code>DAYOFYEAR(d)</code> 函数返回 d 是一年中的第几天，范围为 1～366。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAYOFYEAR</span>(<span class="string">'2017-12-15'</span>);</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| DAYOFYEAR('2017-12-15') |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">|                     349 |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看出，1、3、5、7、8、10月份各31天，2月份各28天，4、6、9、11月份各30天，再加上12月份15天，因此返回结果为349。</p>
<h4 id="获取指定日期在一个月的位置"><a href="#获取指定日期在一个月的位置" class="headerlink" title="获取指定日期在一个月的位置"></a>获取指定日期在一个月的位置</h4><p>MySQL 中 <code>DAYOFMONTH(d)</code> 函数返回 d 是一个月中的第几天，范围为 1～31。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAYOFMONTH</span>(<span class="string">'2017-12-15'</span>);</span><br><span class="line">+<span class="comment">--------------------------+</span></span><br><span class="line">| DAYOFMONTH('2017-12-15') |</span><br><span class="line">+<span class="comment">--------------------------+</span></span><br><span class="line">|                       15 |</span><br><span class="line">+<span class="comment">--------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="获取年份"><a href="#获取年份" class="headerlink" title="获取年份"></a>获取年份</h4><p>MySQL <code>YEAR()</code> 函数可以从指定日期值中来获取年份值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(<span class="keyword">NOW</span>());</span><br><span class="line">+<span class="comment">-------------+</span></span><br><span class="line">| YEAR(NOW()) |</span><br><span class="line">+<span class="comment">-------------+</span></span><br><span class="line">|        2019 |</span><br><span class="line">+<span class="comment">-------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="将时间转换为秒值"><a href="#将时间转换为秒值" class="headerlink" title="将时间转换为秒值"></a>将时间转换为秒值</h4><p>MySQL TIME_TO_SEC(time) 函数返回将参数 time 转换为秒数的时间值，转换公式为“小时 ×3600+ 分钟 ×60+ 秒”。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TIME_TO_SEC(<span class="string">'15:15:15'</span>);</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| TIME_TO_SEC('15:15:15') |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">|                   54915 |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="将秒值转换为时间格式"><a href="#将秒值转换为时间格式" class="headerlink" title="将秒值转换为时间格式"></a>将秒值转换为时间格式</h4><p>MySQL <code>SEC_TO_TIME(seconds)</code> 函数返回将参数 seconds 转换为小时、分钟和秒数的时间值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SEC_TO_TIME</span>(<span class="string">'54925'</span>);</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">| SEC_TO_TIME('54925') |</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">| 15:15:25             |</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="向日期添加指定时间间隔"><a href="#向日期添加指定时间间隔" class="headerlink" title="向日期添加指定时间间隔"></a>向日期添加指定时间间隔</h4><p>MySQL <code>DATE_ADD(date,INTERVAL expr type)</code> 和 <code>ADDDATE(date,INTERVAL expr type)</code> 两个函数的作用相同，都是用于执行日期的加运算。</p>
<p>DATE_ADD() 和 ADDDATE() 函数有两个参数：</p>
<ol>
<li>date 是 DATE 或 DATETIME 的起始值。</li>
<li>INTERVAL expr type是要添加到起始日期值的间隔值。</li>
</ol>
<p>使用 DATE_ADD(date,INTERVAL expr type) 函数执行日期的加运算。输入 SQL 语句和执行结果如下。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_ADD</span>(<span class="string">'2018-10-31 23:59:59'</span>,<span class="built_in">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>) <span class="keyword">AS</span> C1,</span><br><span class="line">       <span class="keyword">DATE_ADD</span>(<span class="string">'2018-10-31 23:59:59'</span>,<span class="built_in">INTERVAL</span> <span class="string">'1:1'</span> MINUTE_SECOND) <span class="keyword">AS</span> C2,</span><br><span class="line">       ADDDATE(<span class="string">'2018-10-31 23:59:59'</span>,<span class="built_in">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>) <span class="keyword">AS</span> C3;</span><br><span class="line">+<span class="comment">---------------------+---------------------+---------------------+</span></span><br><span class="line">| C1                  | C2                  | C3                  |</span><br><span class="line">+<span class="comment">---------------------+---------------------+---------------------+</span></span><br><span class="line">| 2018-11-01 00:00:00 | 2018-11-01 00:01:00 | 2018-11-01 00:00:00 |</span><br><span class="line">+<span class="comment">---------------------+---------------------+---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由执行结果可以看出，<code>DATE_ADD(date,INTERVAL expr type)</code> 和 <code>ADDDATE(date,INTERVAL expr type)</code> 函数的功能完全相同，在原始时间 ‘2018-10-31 23:59:59’ 上加 1 秒之后结果都是 ‘2018-11-01 00:00:00’ ；在原始时间上加 1 分钟 1 秒的写法是表达式 ‘1:1’，最终可得结果 ‘2018-11-01 00:01:00’。</p>
<p>使用 <code>ADDDATE()</code> 函数执行日期的加操作，输入的 SQL 语句和执行结果如下所示。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ADDDATE(<span class="string">'2017-11-30 23:59:59'</span>, <span class="built_in">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>) <span class="keyword">AS</span> col1,</span><br><span class="line">       ADDDATE(<span class="string">'2017-11-30 23:59:59'</span> ,<span class="built_in">INTERVAL</span> <span class="string">'1:1'</span> MINUTE_SECOND) <span class="keyword">AS</span> col2;</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| col1                | col2                |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| 2017-12-01 00:00:00 | 2017-12-01 00:01:00 |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看到，<code>ADDDATE(&#39;2017-11-30 23：59：59&#39;，INTERVAL 1 SECOND)</code> 函数执行的结果将时间增加 1 秒后返回，结果为“2017-12-01 00：00：00”；<code>ADDDATE(&#39;2017-11-30 23：59：59&#39;，INTERVAL&#39;1：1&#39;MINUTE_SECOND)</code> 函数的日期运算类型是 MINUTE_SECOND，将指定时间增加 1 分 1 秒后返回，结果为“2017-12-01 00：01：00”。</p>
<h4 id="日期减法运算"><a href="#日期减法运算" class="headerlink" title="日期减法运算"></a>日期减法运算</h4><p>MySQL <code>DATE_SUB(date,INTERVAL expr type)</code> 和 <code>SUBDATE(date,INTERVAL expr type)</code> 两个函数作用相同，都是执行日期的减法运算。</p>
<p><code>DATE_SUB()</code> 和 <code>SUBDATE()</code> 函数接受两个参数：</p>
<ol>
<li>date 是 DATE 或 DATETIME 的起始值。</li>
<li>expr 是一个字符串，用于确定从起始日期减去的间隔值。type 是 expr 可解析的间隔单位，例如 DAY，HOUR 等</li>
</ol>
<p>使用 <code>DATE_SUB(date,INTERVAL expr type)</code> 和 <code>SUBDATE(date,INTERVAL expr type)</code> 函数执行日期的减运算，输入 SQL 语句与执行结果如下。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_SUB</span>(<span class="string">'2018-01-02'</span>,<span class="built_in">INTERVAL</span> <span class="number">31</span> <span class="keyword">DAY</span>) <span class="keyword">AS</span> C1,</span><br><span class="line">       <span class="keyword">SUBDATE</span>(<span class="string">'2018-01-02'</span>,<span class="built_in">INTERVAL</span> <span class="number">31</span> <span class="keyword">DAY</span>) <span class="keyword">AS</span> C2,</span><br><span class="line">       <span class="keyword">DATE_SUB</span>(<span class="string">'2018-01-01 00:01:00'</span>,<span class="built_in">INTERVAL</span> <span class="string">'0 0:1:1'</span> DAY_SECOND) <span class="keyword">AS</span> C3;</span><br><span class="line">+<span class="comment">------------+------------+---------------------+</span></span><br><span class="line">| C1         | C2         | C3                  |</span><br><span class="line">+<span class="comment">------------+------------+---------------------+</span></span><br><span class="line">| 2017-12-02 | 2017-12-02 | 2017-12-31 23:59:59 |</span><br><span class="line">+<span class="comment">------------+------------+---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由执行结果可以看出，DATE_SUB(date,INTERVAL expr type) 和SUBDATE (date,INTERVAL expr type) 函数的功能完全相同。</p>
<p><code>DATE_ADD(date,INTERVAL expr type)</code> 和 <code>DATE_SUB(date,INTERVAL expr type)</code> 函数在指定加减的时间段时也可以指定负值，加法的负值即返回原始时间之前的日期和时间，减法的负值即返回原始时间之后的日期和时间。</p>
<h4 id="时间加法运算"><a href="#时间加法运算" class="headerlink" title="时间加法运算"></a>时间加法运算</h4><p>MySQL <code>ADDTIME(time,expr)</code> 函数用于执行时间的加法运算。添加 expr 到 time 并返回结果。其中：time 是一个时间或日期时间表达式，expr 是一个时间表达式。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ADDTIME</span>(<span class="string">'2018-10-31 23:59:59'</span>,<span class="string">'0:1:1'</span>),</span><br><span class="line">       <span class="keyword">ADDTIME</span>(<span class="string">'10:30:59'</span>,<span class="string">'5:10:37'</span>);</span><br><span class="line">+<span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line">| ADDTIME('2018-10-31 23:59:59','0:1:1') | ADDTIME('10:30:59','5:10:37') |</span><br><span class="line">+<span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line">| 2018-11-01 00:01:00                    | 15:41:36                      |</span><br><span class="line">+<span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="时间减法运算"><a href="#时间减法运算" class="headerlink" title="时间减法运算"></a>时间减法运算</h4><p>MySQL <code>SUBTIME(time,expr)</code> 函数用于执行时间的减法运算。其中：函数返回 time。expr 表示的值和格式 time 相同。time 是一个时间或日期时间表达式， expr 是一个</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUBTIME</span>(<span class="string">'2018-10-31 23:59:59'</span>,<span class="string">'0:1:1'</span>),<span class="keyword">SUBTIME</span>(<span class="string">'10:30:59'</span>,<span class="string">'5:12:37'</span>);</span><br><span class="line">+<span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line">| SUBTIME('2018-10-31 23:59:59','0:1:1') | SUBTIME('10:30:59','5:12:37') |</span><br><span class="line">+<span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line">| 2018-10-31 23:58:58                    | 05:18:22                      |</span><br><span class="line">+<span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="获取两个日期的时间间隔"><a href="#获取两个日期的时间间隔" class="headerlink" title="获取两个日期的时间间隔"></a>获取两个日期的时间间隔</h4><p>MySQL 中 <code>DATEDIFF(date1，date2)</code> 返回起始时间 date1 和结束时间 date2 之间的天数。date1 和 date2 为日期或 date-and-time 表达式。计算时只用到这些值的日期部分。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATEDIFF</span>(<span class="string">'2017-11-30'</span>,<span class="string">'2017-11-29'</span>) <span class="keyword">AS</span> COL1,</span><br><span class="line">       <span class="keyword">DATEDIFF</span>(<span class="string">'2017-11-30'</span>,<span class="string">'2017-12-15'</span>) <span class="keyword">AS</span> col2;</span><br><span class="line">+<span class="comment">------+------+</span></span><br><span class="line">| COL1 | col2 |</span><br><span class="line">+<span class="comment">------+------+</span></span><br><span class="line">|    1 |  -15 |</span><br><span class="line">+<span class="comment">------+------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="格式化指定的日期"><a href="#格式化指定的日期" class="headerlink" title="格式化指定的日期"></a>格式化指定的日期</h4><p>MySQL 中 <code>DATE_FORMAT(date，format)</code> 函数是根据 format 指定的格式显示 date 值。</p>
<p>DATE_FORMAT() 函数接受两个参数：</p>
<ol>
<li>date：是要格式化的有效日期值</li>
<li>format：是由预定义的说明符组成的格式字符串，每个说明符前面都有一个百分比字符(%)。</li>
</ol>
<p>主要的 format 格式如下表所示。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">说明符</th>
<th>说明</th>
<th>说明符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">%a</td>
<td>工作日的缩写名称（Sun~Sat)</td>
<td>%b</td>
<td>月份的缩写名称（Jan…Dec)</td>
</tr>
<tr>
<td style="text-align:left">%c</td>
<td>月份，数字形式（0~12)</td>
<td>%D</td>
<td>带有英语后缀的该月日期(0th, 2st, 3nd,…）</td>
</tr>
<tr>
<td style="text-align:left">%d</td>
<td>该月日期，数字形式（00~31)</td>
<td>%e</td>
<td>该月日期，数字形式（(0~31)</td>
</tr>
<tr>
<td style="text-align:left">%f</td>
<td>微秒（000000 …999999)</td>
<td>%H</td>
<td>以 2 位数表示 24 小时（00~23)</td>
</tr>
<tr>
<td style="text-align:left">%h, %I</td>
<td>以 2 位数表示 12 小时（01~12)</td>
<td>%i</td>
<td>分钟，数字形式(00~59)</td>
</tr>
<tr>
<td style="text-align:left">%j</td>
<td>—年中的天数（001~366)</td>
<td>%k</td>
<td>以 24 小时（0~23)表示</td>
</tr>
<tr>
<td style="text-align:left">%l</td>
<td>以12小时（1~12)表示</td>
<td>%M</td>
<td>月份名称（January~December)</td>
</tr>
<tr>
<td style="text-align:left">%m</td>
<td>月份，数字形式（00~12)</td>
<td>%p</td>
<td>上午（AM) 或下午（PM)</td>
</tr>
<tr>
<td style="text-align:left">%r</td>
<td>时间，12小时制（hh:mm:ss 后加 AM 或 PM)</td>
<td>%S, %s</td>
<td>以 2 位数形式表示秒（00~59)</td>
</tr>
<tr>
<td style="text-align:left">%T</td>
<td>时间，24 小时制（小时 (hh): 分钟 (mm): 秒数 (ss))</td>
<td>%U</td>
<td>周（00~53)，其中周日为每周的第一天</td>
</tr>
<tr>
<td style="text-align:left">%u</td>
<td>周（00~53)，其中周一为每周的第一天</td>
<td>%V</td>
<td>周（01~53)，其中周日为每周的第一天，和％X同时使用</td>
</tr>
<tr>
<td style="text-align:left">%v</td>
<td>周（01~53)，其中周一为每周的第一天，和%x同时使用</td>
<td>%W</td>
<td>星期标识（周日、周一、周二…周六）</td>
</tr>
<tr>
<td style="text-align:left">%w</td>
<td>—周中的每日（0= 周日…6= 周六）</td>
<td>%X</td>
<td>该周的年份，以周日第一天，数字形式，4 位数，和％V同时使用</td>
</tr>
<tr>
<td style="text-align:left">%x</td>
<td>该周的年份，以周一为第一天，数字形式，4位数，和%v同时使用</td>
<td>%Y</td>
<td>4 位数形式表示年份</td>
</tr>
<tr>
<td style="text-align:left">%y</td>
<td>2 位数形式表示年份</td>
<td>%%</td>
<td>%一个文字字符</td>
</tr>
</tbody>
</table>
</div>
<p>使用 DATE_FORMAT() 函数格式化输出日期和时间值，输入的 SQL 语句和执行结果如下所示。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(<span class="string">'2017-11-15 21:45:00'</span>,<span class="string">'%W %M %D %Y'</span>) <span class="keyword">AS</span> col1,</span><br><span class="line">       <span class="keyword">DATE_FORMAT</span>(<span class="string">'2017-11-15 21:45:00'</span>,<span class="string">'%h:i% %p %M %D %Y'</span>) <span class="keyword">AS</span> col2;</span><br><span class="line">+<span class="comment">------------------------------+----------------------------+</span></span><br><span class="line">| col1                         | col2                       |</span><br><span class="line">+<span class="comment">------------------------------+----------------------------+</span></span><br><span class="line">| Wednesday November 15th 2017 | 09:i PM November 15th 2017 |</span><br><span class="line">+<span class="comment">------------------------------+----------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="获取指定日期在一周内的索引位置"><a href="#获取指定日期在一周内的索引位置" class="headerlink" title="获取指定日期在一周内的索引位置"></a>获取指定日期在一周内的索引位置</h4><p>MySQL 中 <code>WEEKDAY(d)</code> 返回 d 对应的工作日索引。0 表示周一，1 表示周二，……，6 表示周日。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">WEEKDAY</span>(<span class="string">'2017-12-15'</span>);</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| WEEKDAY('2017-12-15') |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">|                     4 |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><p>聚合函数对一组值进行计算并返回单一的值，通常聚合函数会与 <code>SELECT</code> 语句的 <code>GROUP BY</code> 子句一同使用，在与 <code>GROUP BY</code> 子句使用时，聚合函数会为每一个组产生一个单一值，而不会为整个表产生一个单一值。</p>
<h4 id="查询指定列的最大值"><a href="#查询指定列的最大值" class="headerlink" title="查询指定列的最大值"></a>查询指定列的最大值</h4><p>MySQL <code>MAX()</code> 函数是用来返回指定列中的最大值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line">+<span class="comment">--------------+---------------+</span></span><br><span class="line">| student_name | student_score |</span><br><span class="line">+<span class="comment">--------------+---------------+</span></span><br><span class="line">| Dany         |            90 |</span><br><span class="line">| Green        |            99 |</span><br><span class="line">| Henry        |            95 |</span><br><span class="line">| Jane         |            98 |</span><br><span class="line">| Jim          |            88 |</span><br><span class="line">| John         |            94 |</span><br><span class="line">| Lily         |           100 |</span><br><span class="line">| Susan        |            96 |</span><br><span class="line">| Thomas       |            93 |</span><br><span class="line">| Tom          |            89 |</span><br><span class="line">+<span class="comment">--------------+---------------+</span></span><br><span class="line">10 rows in <span class="keyword">set</span> (<span class="number">0.13</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(student_score) <span class="keyword">AS</span> max_score <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| max_score |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">|       100 |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.06</span> sec)</span><br></pre></td></tr></table></figure>
<p><code>MAX()</code> 函数不仅适用于查找数值类型，也可应用于字符类型。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(student_name) <span class="keyword">AS</span> max_name <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">| max_name |</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">| Tom      |</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看到，MAX() 函数可以对字母进行大小判断，并返回最大的字符或者字符串值。</p>
<p>注意：MAX() 函数还可以返回任意列中的最大值，包括返回字符类型的最大值。在对字符类型的数据进行比较时，按照字符的 ASCII 码值大小进行比较，从 a～z，a 的 ASCII 码最小，z 的最大。在比较时，先比较第一个字符，如果相等，继续比较下一个字符，一直到两个字符不相等或者字符结束为止。例如，b 与 t 比较时，t 为最大值；bcd 与 bca 比较时，bcd 为最大值。</p>
<h4 id="查询指定列的最小值"><a href="#查询指定列的最小值" class="headerlink" title="查询指定列的最小值"></a>查询指定列的最小值</h4><p>MySQL <code>MIN()</code> 函数是用来返回查询列中的最小值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MIN</span>(student_score) <span class="keyword">AS</span> min_score <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| min_score |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">|        88 |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="统计查询结果的行数"><a href="#统计查询结果的行数" class="headerlink" title="统计查询结果的行数"></a>统计查询结果的行数</h4><p>MySQL <code>COUNT()</code> 函数统计数据表中包含的记录行的总数，或者根据查询结果返回列中包含的数据行数，使用方法有以下两种：</p>
<ol>
<li><code>COUNT(*)</code> 计算表中总的行数，无论某列有数值或者为空值。</li>
<li><code>COUNT(字段名)</code> 计算指定列下总的行数，计算时将忽略空值的行。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT COUNT(student_name) AS students_number FROM tb_students_score;</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">| students_number |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">|              10 |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<p>由查询结果可以看到，COUNT(*) 返回 tb_students_score 表中记录的总行数，无论值是什么。返回的总数的名称为 students_number。</p>
<blockquote>
<p>在计算总数的时候对待 NULL 值的方式是，指定列的值为空的行被 COUNT() 函数忽略，但若不指定列，而在 COUNT() 函数中使用星号“*”，则所有记录都不忽略。</p>
</blockquote>
<h4 id="求和"><a href="#求和" class="headerlink" title="求和"></a>求和</h4><p>MySQL <code>SUM()</code> 是一个求总和的函数，返回指定列值的总和。</p>
<p>SUM() 函数是如何工作的？</p>
<ol>
<li>如果在没有返回匹配行 SELECT 语句中使用 SUM 函数，则 SUM 函数返回 NULL，而不是 0。</li>
<li>DISTINCT 运算符允许计算集合中的不同值。</li>
<li>SUM 函数忽略计算中的 NULL 值。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(student_score) <span class="keyword">AS</span> score_sum <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| score_sum |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">|       942 |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由查询结果可以看到，SUM() 函数返回学生的所有成绩之和为 942。</p>
<blockquote>
<p><code>SUM()</code> 函数在计算时，忽略列值为 <code>NULL</code> 的行。</p>
</blockquote>
<h4 id="求平均值"><a href="#求平均值" class="headerlink" title="求平均值"></a>求平均值</h4><p>MySQL <code>AVG()</code> 函数通过计算返回的行数和每一行数据的和，求得指定列数据的平均值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(student_score) <span class="keyword">AS</span> score_avg <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| score_avg |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">|   94.2000 |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用 <code>AVG()</code> 函数时，参数为要计算的列名称，若要得到多个列的平均值，则需要在每一列都使用 <code>AVG()</code> 函数。</p>
</blockquote>
<h2 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h2><h5 id="判断"><a href="#判断" class="headerlink" title="判断"></a>判断</h5><p>MySQL <code>IF</code> 语句允许您根据表达式的某个条件或值结果来执行一组 SQL 语句。</p>
<p>要在 MySQL 中形成一个表达式，可以结合文字，变量，运算符，甚至函数来组合。表达式可以返回 <code>TRUE</code>，<code>FALSE</code> 或 <code>NULL</code> 这三个值之一。</p>
<p>语法结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IF(expr,v1,v2)</span><br></pre></td></tr></table></figure>
<p>其中：表达式 expr 得到不同的结果，当 expr 为真是返回 v1 的值，否则返回 v2。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">IF</span>(<span class="number">1</span>&lt;<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>) c1,<span class="keyword">IF</span>(<span class="number">1</span>&gt;<span class="number">5</span>,<span class="string">'√'</span>,<span class="string">'×'</span>) c2,<span class="keyword">IF</span>(<span class="keyword">STRCMP</span>(<span class="string">'abc'</span>,<span class="string">'ab'</span>),<span class="string">'yes'</span>,<span class="string">'no'</span>) c3;</span><br><span class="line">+<span class="comment">----+----+-----+</span></span><br><span class="line">| c1 | c2 | c3  |</span><br><span class="line">+<span class="comment">----+----+-----+</span></span><br><span class="line">|  1 | × | yes |</span><br><span class="line">+<span class="comment">----+----+-----+</span></span><br><span class="line">1 row in <span class="keyword">set</span>, <span class="number">2</span> <span class="keyword">warnings</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由执行结果可以看出，在 c1 中，表达式 1<2 所得的结果是 `TRUE`，则返回结果为 v1，即数值 1；在 c2 中，表达式 1>5 所得的结果是 <code>FALSE</code>，则返回结果为 v2，即字符串 ‘×’；在 c3 中，先用 <code>STRCMP(s1,s2)</code> 函数比较两个字符串的大小，字符串 ‘abc’ 和 ‘ab’ 比较结果的返回值为 1，也就是表达式 expr 的返回结果不等于 0 且不等于 <code>NULL</code>，则返回值为 v1，即字符串 ‘yes’。</p>
<h4 id="判断是否为空"><a href="#判断是否为空" class="headerlink" title="判断是否为空"></a>判断是否为空</h4><p>MySQL <code>IFNULL</code> 函数是 MySQL 控制流函数之一，它接受两个参数，如果不是 NULL，则返回第一个参数。 否则，<code>IFNULL</code> 函数返回第二个参数。两个参数可以是文字值或表达式。</p>
<p>语法结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IFNULL(v1,v2);</span><br></pre></td></tr></table></figure>
<p>其中：如果 v1 不为 <code>NULL</code>，则 <code>IFNULL</code> 函数返回 v1; 否则返回 v2 的结果。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ELECT IFNULL(5,8),IFNULL(NULL,'OK'),IFNULL(SQRT(-8),'FALSE'),SQRT(-8);</span><br><span class="line">+<span class="comment">-------------+-------------------+--------------------------+----------+</span></span><br><span class="line">| IFNULL(5,8) | IFNULL(NULL,'OK') | IFNULL(SQRT(-8),'FALSE') | SQRT(-8) |</span><br><span class="line">+<span class="comment">-------------+-------------------+--------------------------+----------+</span></span><br><span class="line">|           5 | OK                | FALSE                    |     NULL |</span><br><span class="line">+<span class="comment">-------------+-------------------+--------------------------+----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由执行结果可以看出，<code>IFNULL(v1,v2)</code> 函数中的参数 v1=5、v2=8，都不为空，即 v1=5 不为空，返回 v1 的值为 5；当 v1=NULL 时，返回 v2 的值，即字符串 ‘OK’；当 v1=SQRT(-8) 时，SQRT(-8) 函数的返回值为NULL，即 v1=NULL，所以返回 v2 为字符串 ‘false’。</p>
<h4 id="搜索语句"><a href="#搜索语句" class="headerlink" title="搜索语句"></a>搜索语句</h4><p>除了 IF 函数，MySQL 还提供了一个替代的条件语句 CASE。 MySQL CASE 语句使代码更加可读和高效。</p>
<p>CASE 语句有两种形式：简单的和可搜索 CASE 语句。</p>
<p>简单的 CASE 语句就是指使用简单 CASE 语句来检查表达式的值与一组唯一值的匹配。</p>
<p>简单的 CASE 语句的语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE  &lt;表达式&gt;</span><br><span class="line">   WHEN &lt;值1&gt; THEN &lt;操作&gt;</span><br><span class="line">   WHEN &lt;值2&gt; THEN &lt;操作&gt;</span><br><span class="line">   ...</span><br><span class="line">   ELSE &lt;操作&gt;</span><br><span class="line">END CASE;</span><br></pre></td></tr></table></figure>
<p>其中：&lt;表达式&gt; 可以是任何有效的表达式。我们将 &lt;表达式&gt; 的值与每个 WHEN 子句中的值进行比较，例如 &lt;值1&gt;，&lt;值2&gt; 等。如果 &lt;表达式&gt; 和 &lt;值n&gt; 的值相等，则执行相应的 WHEN 分支中的命令 &lt;操作&gt;。如果 WHEN 子句中的 &lt;值n&gt; 没有与 &lt;表达式&gt; 的值匹配，则 ELSE 子句中的命令将被执行。ELSE 子句是可选的。 如果省略 ELSE 子句，并且找不到匹配项，MySQL 将引发错误。</p>
<p>使用 CASE 函数根据表达式的取值返回相应值，输入SQL 语句和执行结果如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> <span class="keyword">WEEKDAY</span>(<span class="keyword">NOW</span>()) <span class="keyword">WHEN</span> <span class="number">0</span> <span class="keyword">THEN</span> <span class="string">'星期一'</span> </span><br><span class="line">                           <span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span> <span class="string">'星期二'</span> </span><br><span class="line">                           <span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span> <span class="string">'星期三'</span> </span><br><span class="line">                           <span class="keyword">WHEN</span> <span class="number">3</span> <span class="keyword">THEN</span> <span class="string">'星期四'</span> </span><br><span class="line">                           <span class="keyword">WHEN</span> <span class="number">4</span> <span class="keyword">THEN</span> <span class="string">'星期五'</span> </span><br><span class="line">                           <span class="keyword">WHEN</span> <span class="number">5</span> <span class="keyword">THEN</span> <span class="string">'星期六'</span></span><br><span class="line">                           <span class="keyword">ELSE</span> <span class="string">'星期天'</span> </span><br><span class="line">        <span class="keyword">END</span> <span class="keyword">AS</span> COLUMN1,</span><br><span class="line">        <span class="keyword">NOW</span>(),</span><br><span class="line">        <span class="keyword">WEEKDAY</span>(<span class="keyword">NOW</span>()),</span><br><span class="line">        <span class="keyword">DAYNAME</span>(<span class="keyword">NOW</span>());</span><br><span class="line">+<span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line">| COLUMN1 | NOW()               | WEEKDAY(NOW()) | DAYNAME(NOW()) |</span><br><span class="line">+<span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line">| 星期四  | 2019-02-28 13:45:43 |              3 | Thursday       |</span><br><span class="line">+<span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span>, <span class="number">7</span> <span class="keyword">warnings</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由执行结果可以看出，NOW() 函数得到当前系统时间是 2019 年 2 月 28 日，DAYNAME(NOW()) 得到当天是 ‘Thursday ‘，WEEKDAY(NOW()) 函数返回当前时间的工作日索引是 3，即对应的是星期四。</p>
<p>简单 CASE 语句仅允许将表达式的值与一组不同的值进行匹配。 为了执行更复杂的匹配，如范围，则可以使用可搜索 CASE 语句。 可搜索 CASE 语句等同于 IF 语句，但是它的构造更加可读。</p>
<p>可搜索CASE语句的语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE</span><br><span class="line">    WHEN &lt;条件1&gt; THEN &lt;命令&gt;</span><br><span class="line">    WHEN &lt;条件2&gt; THEN &lt;命令&gt;</span><br><span class="line">    ...</span><br><span class="line">    ELSE commands</span><br><span class="line">END CASE;</span><br></pre></td></tr></table></figure>
<p>MySQL 分别计算 WHEN 子句中的每个条件，直到找到一个值为 TRUE 的条件，然后执行 THEN 子句中的相应 &lt;命令&gt;。如果没有一个条件为 TRUE，则执行 ELSE 子句中的 &lt;命令&gt;。如果不指定 ELSE 子句，并且没有一个条件为 TRUE，MySQL 将发出错误消息。MySQL 不允许在 THEN 或 ELSE 子句中使用空的命令。 如果您不想处理 ELSE 子句中的逻辑，同时又要防止 MySQL 引发错误，则可以在 ELSE 子句中放置一个空的 BEGIN END 块。</p>
<p>使用 CASE 函数根据表达式的取值返回相应值，输入SQL 语句和执行结果如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="keyword">WEEKDAY</span>(<span class="keyword">NOW</span>())=<span class="number">0</span> <span class="keyword">THEN</span> <span class="string">'星期一'</span> </span><br><span class="line">            <span class="keyword">WHEN</span> <span class="keyword">WEEKDAY</span>(<span class="keyword">NOW</span>())=<span class="number">1</span> <span class="keyword">THEN</span> <span class="string">'星期二'</span>  </span><br><span class="line">            <span class="keyword">WHEN</span> <span class="keyword">WEEKDAY</span>(<span class="keyword">NOW</span>())=<span class="number">2</span> <span class="keyword">THEN</span> <span class="string">'星期三'</span> </span><br><span class="line">            <span class="keyword">WHEN</span> <span class="keyword">WEEKDAY</span>(<span class="keyword">NOW</span>())=<span class="number">3</span> <span class="keyword">THEN</span> <span class="string">'星期四'</span> </span><br><span class="line">            <span class="keyword">WHEN</span> <span class="keyword">WEEKDAY</span>(<span class="keyword">NOW</span>())=<span class="number">4</span> <span class="keyword">THEN</span> <span class="string">'星期五'</span> </span><br><span class="line">            <span class="keyword">WHEN</span> <span class="keyword">WEEKDAY</span>(<span class="keyword">NOW</span>())=<span class="number">5</span> <span class="keyword">THEN</span> <span class="string">'星期六'</span> </span><br><span class="line">            <span class="keyword">WHEN</span> <span class="keyword">WEEKDAY</span>(<span class="keyword">NOW</span>())=<span class="number">6</span> <span class="keyword">THEN</span> <span class="string">'星期天'</span> </span><br><span class="line">        <span class="keyword">END</span> <span class="keyword">AS</span> COLUMN1,</span><br><span class="line">        <span class="keyword">NOW</span>(),</span><br><span class="line">        <span class="keyword">WEEKDAY</span>(<span class="keyword">NOW</span>()),</span><br><span class="line">        <span class="keyword">DAYNAME</span>(<span class="keyword">NOW</span>());</span><br><span class="line">+<span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line">| COLUMN1 | NOW()               | WEEKDAY(NOW()) | DAYNAME(NOW()) |</span><br><span class="line">+<span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line">| 星期四  | 2019-02-28 14:08:00 |              3 | Thursday       |</span><br><span class="line">+<span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span>, <span class="number">7</span> <span class="keyword">warnings</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>此例跟上例的返回结果一样，只是使用了 CASE 函数的不同写法，WHEN 后面为表达式，当表达式的返回结果为 TRUE 时取 THEN 后面的值，如果都不是，则返回 ELSE 后面的值。</p>
<h2 id="特殊函数"><a href="#特殊函数" class="headerlink" title="特殊函数"></a>特殊函数</h2><h4 id="最后插入行的生成序列号"><a href="#最后插入行的生成序列号" class="headerlink" title="最后插入行的生成序列号"></a>最后插入行的生成序列号</h4><p><code>LAST_INSERT_ID()</code> 函数来获取最后插入行的生成序列号。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LAST_INSERT_ID</span>() <span class="keyword">as</span> <span class="keyword">id</span>;</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| id        |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| 23        |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ol>
<li>如何在 Unix 和 MySQL 时间戳之间进行转换</li>
<li>NOW() 和 CURRENT_DATE() 有什么区别</li>
</ol>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#数值型函数"><span class="toc-number">1.</span> <span class="toc-text">数值型函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#求绝对值"><span class="toc-number">1.0.1.</span> <span class="toc-text">求绝对值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求二次方根"><span class="toc-number">1.0.2.</span> <span class="toc-text">求二次方根</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求余数"><span class="toc-number">1.0.3.</span> <span class="toc-text">求余数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#向上取整"><span class="toc-number">1.0.4.</span> <span class="toc-text">向上取整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#向下取整"><span class="toc-number">1.0.5.</span> <span class="toc-text">向下取整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#生成随机数"><span class="toc-number">1.0.6.</span> <span class="toc-text">生成随机数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#四舍五入"><span class="toc-number">1.0.7.</span> <span class="toc-text">四舍五入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#返回参数的符号"><span class="toc-number">1.0.8.</span> <span class="toc-text">返回参数的符号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求次方"><span class="toc-number">1.0.9.</span> <span class="toc-text">求次方</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求正弦值"><span class="toc-number">1.0.10.</span> <span class="toc-text">求正弦值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求反正弦值"><span class="toc-number">1.0.11.</span> <span class="toc-text">求反正弦值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求余弦值"><span class="toc-number">1.0.12.</span> <span class="toc-text">求余弦值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求反余弦值"><span class="toc-number">1.0.13.</span> <span class="toc-text">求反余弦值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求正切值"><span class="toc-number">1.0.14.</span> <span class="toc-text">求正切值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求反正切值"><span class="toc-number">1.0.15.</span> <span class="toc-text">求反正切值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求余切值"><span class="toc-number">1.0.16.</span> <span class="toc-text">求余切值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串函数"><span class="toc-number">2.</span> <span class="toc-text">字符串函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#计算字符串长度"><span class="toc-number">2.0.1.</span> <span class="toc-text">计算字符串长度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串拼接"><span class="toc-number">2.0.2.</span> <span class="toc-text">字符串拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#替换字符串"><span class="toc-number">2.0.3.</span> <span class="toc-text">替换字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#将字母转换成小写"><span class="toc-number">2.0.4.</span> <span class="toc-text">将字母转换成小写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#将字母转换成大写"><span class="toc-number">2.0.5.</span> <span class="toc-text">将字母转换成大写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#从左侧截取字符串"><span class="toc-number">2.0.6.</span> <span class="toc-text">从左侧截取字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#从右侧截取字符串"><span class="toc-number">2.0.7.</span> <span class="toc-text">从右侧截取字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除空格"><span class="toc-number">2.0.8.</span> <span class="toc-text">删除空格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串替换"><span class="toc-number">2.0.9.</span> <span class="toc-text">字符串替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#截取字符串"><span class="toc-number">2.0.10.</span> <span class="toc-text">截取字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#反转字符串"><span class="toc-number">2.0.11.</span> <span class="toc-text">反转字符串</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#日期和时间函数"><span class="toc-number">3.</span> <span class="toc-text">日期和时间函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#获取系统当前日期"><span class="toc-number">3.0.1.</span> <span class="toc-text">获取系统当前日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取系统当前时间"><span class="toc-number">3.0.2.</span> <span class="toc-text">获取系统当前时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取当前时间日期"><span class="toc-number">3.0.3.</span> <span class="toc-text">获取当前时间日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取-UNIX-时间戳"><span class="toc-number">3.0.4.</span> <span class="toc-text">获取 UNIX 时间戳</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#时间戳转日期"><span class="toc-number">3.0.5.</span> <span class="toc-text">时间戳转日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期的月份"><span class="toc-number">3.0.6.</span> <span class="toc-text">获取指定日期的月份</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期月份的英文名称"><span class="toc-number">3.0.7.</span> <span class="toc-text">获取指定日期月份的英文名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期的星期名称"><span class="toc-number">3.0.8.</span> <span class="toc-text">获取指定日期的星期名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取日期对应的周索引"><span class="toc-number">3.0.9.</span> <span class="toc-text">获取日期对应的周索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期是一年中的第几周"><span class="toc-number">3.0.10.</span> <span class="toc-text">获取指定日期是一年中的第几周</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期在一年中的位置"><span class="toc-number">3.0.11.</span> <span class="toc-text">获取指定日期在一年中的位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期在一个月的位置"><span class="toc-number">3.0.12.</span> <span class="toc-text">获取指定日期在一个月的位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取年份"><span class="toc-number">3.0.13.</span> <span class="toc-text">获取年份</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#将时间转换为秒值"><span class="toc-number">3.0.14.</span> <span class="toc-text">将时间转换为秒值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#将秒值转换为时间格式"><span class="toc-number">3.0.15.</span> <span class="toc-text">将秒值转换为时间格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#向日期添加指定时间间隔"><span class="toc-number">3.0.16.</span> <span class="toc-text">向日期添加指定时间间隔</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#日期减法运算"><span class="toc-number">3.0.17.</span> <span class="toc-text">日期减法运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#时间加法运算"><span class="toc-number">3.0.18.</span> <span class="toc-text">时间加法运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#时间减法运算"><span class="toc-number">3.0.19.</span> <span class="toc-text">时间减法运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取两个日期的时间间隔"><span class="toc-number">3.0.20.</span> <span class="toc-text">获取两个日期的时间间隔</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#格式化指定的日期"><span class="toc-number">3.0.21.</span> <span class="toc-text">格式化指定的日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取指定日期在一周内的索引位置"><span class="toc-number">3.0.22.</span> <span class="toc-text">获取指定日期在一周内的索引位置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#聚合函数"><span class="toc-number">4.</span> <span class="toc-text">聚合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询指定列的最大值"><span class="toc-number">4.0.1.</span> <span class="toc-text">查询指定列的最大值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询指定列的最小值"><span class="toc-number">4.0.2.</span> <span class="toc-text">查询指定列的最小值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#统计查询结果的行数"><span class="toc-number">4.0.3.</span> <span class="toc-text">统计查询结果的行数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求和"><span class="toc-number">4.0.4.</span> <span class="toc-text">求和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求平均值"><span class="toc-number">4.0.5.</span> <span class="toc-text">求平均值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#流程控制函数"><span class="toc-number">5.</span> <span class="toc-text">流程控制函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#判断"><span class="toc-number">5.0.0.1.</span> <span class="toc-text">判断</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#判断是否为空"><span class="toc-number">5.0.1.</span> <span class="toc-text">判断是否为空</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#搜索语句"><span class="toc-number">5.0.2.</span> <span class="toc-text">搜索语句</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#特殊函数"><span class="toc-number">6.</span> <span class="toc-text">特殊函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#最后插入行的生成序列号"><span class="toc-number">6.0.1.</span> <span class="toc-text">最后插入行的生成序列号</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题"><span class="toc-number">7.</span> <span class="toc-text">问题</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&text=MySQL 常用函数"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&title=MySQL 常用函数"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&is_video=false&description=MySQL 常用函数"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=MySQL 常用函数&body=Check out this article: http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&title=MySQL 常用函数"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&title=MySQL 常用函数"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&title=MySQL 常用函数"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&title=MySQL 常用函数"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/07/07/数据存储/MySQL 手册/MySQL 常用函数/&name=MySQL 常用函数&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 John Doe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        
        <li><a href="/">Home</a></li>
        
        <li><a href="/archives/">Articles</a></li>
        
        <li><a href="/categories/">Categories</a></li>
        
        <li><a href="/search/">Search</a></li>
        
        <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
