<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="jpsjps （JVM Process Status Tool）显示指定系统内所有的 HotSpot 虚拟机进程。 命令格式： 1$ jps [options] [hostid] option 参数：  -l : 输出主类全名或jar路径 -q : 只输出LVMID -m : 输出JVM启动时传递给main()的参数 -v : 输出JVM启动时显示指定的JVM参数（默认）  示例： 1234$ j">
<meta property="og:type" content="article">
<meta property="og:title" content="JVM_08 性能监控">
<meta property="og:url" content="http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="jpsjps （JVM Process Status Tool）显示指定系统内所有的 HotSpot 虚拟机进程。 命令格式： 1$ jps [options] [hostid] option 参数：  -l : 输出主类全名或jar路径 -q : 只输出LVMID -m : 输出JVM启动时传递给main()的参数 -v : 输出JVM启动时显示指定的JVM参数（默认）  示例： 1234$ j">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2021-05-13T10:01:48.584Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JVM_08 性能监控">
<meta name="twitter:description" content="jpsjps （JVM Process Status Tool）显示指定系统内所有的 HotSpot 虚拟机进程。 命令格式： 1$ jps [options] [hostid] option 参数：  -l : 输出主类全名或jar路径 -q : 只输出LVMID -m : 输出JVM启动时传递给main()的参数 -v : 输出JVM启动时显示指定的JVM参数（默认）  示例： 1234$ j">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>JVM_08 性能监控</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_09 性能调优/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_07 参数配置/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&text=JVM_08 性能监控"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&title=JVM_08 性能监控"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&is_video=false&description=JVM_08 性能监控"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=JVM_08 性能监控&body=Check out this article: http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&title=JVM_08 性能监控"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&title=JVM_08 性能监控"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&title=JVM_08 性能监控"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&title=JVM_08 性能监控"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&name=JVM_08 性能监控&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#jps"><span class="toc-number">1.</span> <span class="toc-text">jps</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jinfo"><span class="toc-number">2.</span> <span class="toc-text">jinfo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jstat"><span class="toc-number">3.</span> <span class="toc-text">jstat</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#class"><span class="toc-number">3.0.1.</span> <span class="toc-text">-class</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#compiler"><span class="toc-number">3.0.2.</span> <span class="toc-text">-compiler</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gc"><span class="toc-number">3.0.3.</span> <span class="toc-text">-gc</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gccapacity"><span class="toc-number">3.0.4.</span> <span class="toc-text">-gccapacity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gcutil"><span class="toc-number">3.0.5.</span> <span class="toc-text">-gcutil</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gcnew"><span class="toc-number">3.0.6.</span> <span class="toc-text">-gcnew</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gcold"><span class="toc-number">3.0.7.</span> <span class="toc-text">-gcold</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gcoldcapacity"><span class="toc-number">3.0.8.</span> <span class="toc-text">-gcoldcapacity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gcpermcapacity"><span class="toc-number">3.0.9.</span> <span class="toc-text">-gcpermcapacity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#printcompilation"><span class="toc-number">3.0.10.</span> <span class="toc-text">-printcompilation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jmap"><span class="toc-number">4.</span> <span class="toc-text">jmap</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#dump"><span class="toc-number">4.0.1.</span> <span class="toc-text">-dump</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#finalizerinfo"><span class="toc-number">4.0.2.</span> <span class="toc-text">-finalizerinfo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#heap"><span class="toc-number">4.0.3.</span> <span class="toc-text">-heap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#histo"><span class="toc-number">4.0.4.</span> <span class="toc-text">-histo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#permstat"><span class="toc-number">4.0.5.</span> <span class="toc-text">-permstat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F"><span class="toc-number">4.0.6.</span> <span class="toc-text">-F</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jstack"><span class="toc-number">5.</span> <span class="toc-text">jstack</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令格式"><span class="toc-number">5.0.1.</span> <span class="toc-text">命令格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#option-参数"><span class="toc-number">5.0.2.</span> <span class="toc-text">option 参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#示例"><span class="toc-number">5.0.3.</span> <span class="toc-text">示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题"><span class="toc-number">6.</span> <span class="toc-text">问题</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        JVM_08 性能监控
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Hexo</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-01-01T00:00:08.000Z" itemprop="datePublished">2020-01-01</time>
        
        (Updated: <time datetime="2021-05-13T10:01:48.584Z" itemprop="dateModified">2021-05-13</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/后端开发/">后端开发</a> › <a class="category-link" href="/categories/后端开发/Java-虚拟机/">Java 虚拟机</a>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="jps"><a href="#jps" class="headerlink" title="jps"></a>jps</h2><p>jps （JVM Process Status Tool）显示指定系统内所有的 HotSpot 虚拟机进程。</p>
<p>命令格式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jps [options] [hostid]</span><br></pre></td></tr></table></figure>
<p>option 参数：</p>
<ol>
<li>-l : 输出主类全名或jar路径</li>
<li>-q : 只输出LVMID</li>
<li>-m : 输出JVM启动时传递给main()的参数</li>
<li>-v : 输出JVM启动时显示指定的JVM参数（默认）</li>
</ol>
<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ jps -l -m</span><br><span class="line">  28920 org.apache.catalina.startup.Bootstrap start</span><br><span class="line">  11589 org.apache.catalina.startup.Bootstrap start</span><br><span class="line">  25816 sun.tools.jps.Jps -l -m</span><br></pre></td></tr></table></figure>
<h2 id="jinfo"><a href="#jinfo" class="headerlink" title="jinfo"></a>jinfo</h2><p>jinfo（JVM Configuration info）这个命令作用是实时查看和调整虚拟机运行参数。</p>
<p>之前的 <code>jps -v</code> 口令只能查看到显示指定的参数，如果想要查看未被显示指定的参数的值就要使用 jinfo 口令。</p>
<p>命令格式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jinfo [option] [args] LVMID</span><br></pre></td></tr></table></figure></p>
<p>option 参数：</p>
<ol>
<li>-flag : 输出指定args参数的值</li>
<li>-flags : 不需要args参数，输出所有JVM参数的值</li>
<li>-sysprops : 输出系统属性，等同于System.getProperties()</li>
</ol>
<p>示例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ jinfo -flag 11494</span><br><span class="line">-XX:CMSInitiatingOccupancyFraction=80</span><br></pre></td></tr></table></figure></p>
<h2 id="jstat"><a href="#jstat" class="headerlink" title="jstat"></a>jstat</h2><p>jstat（JVM statistics Monitoring）是用于监视虚拟机运行时状态信息的命令，它可以显示出虚拟机进程中的类装载、内存、垃圾收集、JIT编译等运行数据。</p>
<h4 id="class"><a href="#class" class="headerlink" title="-class"></a>-class</h4><p>监视类装载、卸载数量、总空间以及耗费的时间。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Loaded :      加载 Class 的数量</span></span><br><span class="line"><span class="comment"># Bytes :       Class 字节大小</span></span><br><span class="line"><span class="comment"># Unloaded :    未加载 Class 的数量</span></span><br><span class="line"><span class="comment"># Bytes :       未加载 Class 的字节大小</span></span><br><span class="line"><span class="comment"># Time :        加载时间</span></span><br><span class="line">zhangqinghua$ jstat -class 11589</span><br><span class="line">Loaded  Bytes  Unloaded  Bytes     Time   </span><br><span class="line">7035  14506.3     0     0.0       3.67</span><br></pre></td></tr></table></figure>
<h4 id="compiler"><a href="#compiler" class="headerlink" title="-compiler"></a>-compiler</h4><p>输出JIT编译过的方法数量耗时等。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Compiled :      编译数量</span></span><br><span class="line"><span class="comment"># Failed :        编译失败数量</span></span><br><span class="line"><span class="comment"># Invalid :       无效数量</span></span><br><span class="line"><span class="comment"># Time :          编译耗时</span></span><br><span class="line"><span class="comment"># FailedType :    失败类型</span></span><br><span class="line"><span class="comment"># FailedMethod :  失败方法的全限定名</span></span><br><span class="line">zhangqinghua$ jstat -compiler 1262</span><br><span class="line">Compiled Failed   Invalid  Time     FailedType  FailedMethod</span><br><span class="line">2573      1       0        47.60    1           org/apache/catalina/loader/WebappClassLoader findResourceInternal</span><br></pre></td></tr></table></figure>
<h4 id="gc"><a href="#gc" class="headerlink" title="-gc"></a>-gc</h4><p>垃圾回收堆的行为统计：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># C 即 Capacity 总容量，U 即 Used 已使用的容量</span></span><br><span class="line"><span class="comment"># S0C :  survivor0区的总容量</span></span><br><span class="line"><span class="comment"># S1C :  survivor1区的总容量</span></span><br><span class="line"><span class="comment"># S0U :  survivor0区已使用的容量</span></span><br><span class="line"><span class="comment"># S1C :  survivor1区已使用的容量</span></span><br><span class="line"><span class="comment"># EC :   Eden区的总容量</span></span><br><span class="line"><span class="comment"># EU :   Eden区已使用的容量</span></span><br><span class="line"><span class="comment"># OC :   Old区的总容量</span></span><br><span class="line"><span class="comment"># OU :   Old区已使用的容量</span></span><br><span class="line"><span class="comment"># PC :   当前perm的容量 (KB)</span></span><br><span class="line"><span class="comment"># PU :   perm的使用 (KB)</span></span><br><span class="line"><span class="comment"># YGC :  新生代垃圾回收次数</span></span><br><span class="line"><span class="comment"># YGCT : 新生代垃圾回收时间</span></span><br><span class="line"><span class="comment"># FGC :  老年代垃圾回收次数</span></span><br><span class="line"><span class="comment"># FGCT : 老年代垃圾回收时间</span></span><br><span class="line"><span class="comment"># GCT :  垃圾回收总消耗时间</span></span><br><span class="line">zhangqinghua$ jstat -gc 1262</span><br><span class="line">S0C    S1C     S0U     S1U   EC       EU        OC          OU        PC       PU         YGC    YGCT    FGC    FGCT     GCT   </span><br><span class="line">26112.0 24064.0 6562.5  0.0   564224.0 76274.5   434176.0   388518.3  524288.0 42724.7    320    6.417   1      0.398    6.815</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这个命令意思就是每隔 2000ms 输出 1262 的 gc 情况，一共输出 20 次</span></span><br><span class="line">zhangqinghua$ jstat -gc 1262 2000 20</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h4 id="gccapacity"><a href="#gccapacity" class="headerlink" title="-gccapacity"></a>-gccapacity</h4><p>同 <code>-gc</code>，不过还会输出Java堆各区域使用到的最大、最小空间：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NGCMN :   新生代占用的最小空间</span></span><br><span class="line"><span class="comment"># NGCMX :   新生代占用的最大空间</span></span><br><span class="line"><span class="comment"># OGCMN :   老年代占用的最小空间</span></span><br><span class="line"><span class="comment"># OGCMX :   老年代占用的最大空间</span></span><br><span class="line"><span class="comment"># OGC：     当前年老代的容量 (KB)</span></span><br><span class="line"><span class="comment"># OC：      当前年老代的空间 (KB)</span></span><br><span class="line"><span class="comment"># PGCMN :   perm占用的最小空间</span></span><br><span class="line"><span class="comment"># PGCMX :   perm占用的最大空间</span></span><br><span class="line">zhangqinghua$ jstat -gccapacity 1262</span><br><span class="line"> NGCMN    NGCMX     NGC    S0C   S1C       EC         OGCMN      OGCMX      OGC        OC</span><br><span class="line">614400.0 614400.0 614400.0 26112.0 24064.0 564224.0   434176.0   434176.0   434176.0   434176.0 </span><br><span class="line"></span><br><span class="line">PGCMN    PGCMX     PGC      PC         YGC    FGC </span><br><span class="line">524288.0 1048576.0 524288.0 524288.0    320     1</span><br></pre></td></tr></table></figure>
<h4 id="gcutil"><a href="#gcutil" class="headerlink" title="-gcutil"></a>-gcutil</h4><p>同 <code>-gc</code>，不过输出的是已使用空间占总空间的百分比：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># LGCC： 最近垃圾回收的原因</span></span><br><span class="line"><span class="comment"># GCC：  当前垃圾回收的原因</span></span><br><span class="line">zhangqinghua$ jstat -gcutil 28920</span><br><span class="line">S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT   </span><br><span class="line">12.45   0.00  33.85   0.00   4.44  4       0.242     0    0.000    0.242</span><br></pre></td></tr></table></figure>
<h4 id="gcnew"><a href="#gcnew" class="headerlink" title="-gcnew"></a>-gcnew</h4><p>统计新生代的行为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NGC:   当前年轻代的容量 (KB)</span></span><br><span class="line"><span class="comment"># S0CMX: 最大的S0空间 (KB)</span></span><br><span class="line"><span class="comment"># S0C:   当前S0空间 (KB)</span></span><br><span class="line"><span class="comment"># ECMX:  最大eden空间 (KB)</span></span><br><span class="line"><span class="comment"># EC:    当前eden空间 (KB)</span></span><br><span class="line">zhangqinghua$ jstat -gcnew 28920</span><br><span class="line">S0C      S1C      S0U        S1U  TT  MTT  DSS      EC        EU         YGC     YGCT  </span><br><span class="line">419392.0 419392.0 52231.8    0.0  6   6    209696.0 3355520.0 1172246.0  4       0.242</span><br></pre></td></tr></table></figure>
<h4 id="gcold"><a href="#gcold" class="headerlink" title="-gcold"></a>-gcold</h4><p>统计旧生代的行为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zhangqinghua$ jstat -gcold 28920</span><br><span class="line">PC       PU        OC           OU       YGC    FGC    FGCT     GCT   </span><br><span class="line">1048576.0  46561.7   6291456.0     0.0      4      0      0.000    0.242</span><br></pre></td></tr></table></figure>
<h4 id="gcoldcapacity"><a href="#gcoldcapacity" class="headerlink" title="-gcoldcapacity"></a>-gcoldcapacity</h4><p>统计旧生代的大小和空间：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zhangqinghua$ jstat -gcoldcapacity 28920</span><br><span class="line">OGCMN       OGCMX        OGC         OC         YGC   FGC    FGCT     GCT   </span><br><span class="line">6291456.0   6291456.0   6291456.0   6291456.0     4     0    0.000    0.242</span><br></pre></td></tr></table></figure>
<h4 id="gcpermcapacity"><a href="#gcpermcapacity" class="headerlink" title="-gcpermcapacity"></a>-gcpermcapacity</h4><p>永生代行为统计：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zhangqinghua$ jstat -gcpermcapacity 28920</span><br><span class="line">PGCMN      PGCMX       PGC         PC      YGC   FGC    FGCT     GCT   </span><br><span class="line">1048576.0  2097152.0  1048576.0  1048576.0     4     0    0.000    0.242</span><br></pre></td></tr></table></figure>
<h4 id="printcompilation"><a href="#printcompilation" class="headerlink" title="-printcompilation"></a>-printcompilation</h4><p>hotspot 编译方法统计：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Compiled：被执行的编译任务的数量</span></span><br><span class="line"><span class="comment"># Size：    方法字节码的字节数</span></span><br><span class="line"><span class="comment"># Type：    编译类型</span></span><br><span class="line"><span class="comment"># Method：  编译方法的类名和方法名。类名使用"/" 代替 "." 作为空间分隔符. 方法名是给出类的方法名。</span></span><br><span class="line"><span class="comment">#           格式是一致于 HotSpot - XX:+PrintComplation 选项</span></span><br><span class="line">jstat -printcompilation 28920</span><br><span class="line">Compiled  Size  Type Method</span><br><span class="line">1291      78     1    java/util/ArrayList indexOf</span><br></pre></td></tr></table></figure>
<h2 id="jmap"><a href="#jmap" class="headerlink" title="jmap"></a>jmap</h2><p>jmap（JVM Memory Map）命令用于生成 heap dump 文件，如果不使用这个命令，还阔以使用 <code>-XX:+HeapDumpOnOutOfMemoryError</code> 参数来让虚拟机出现 OOM 的时候自动生成 dump 文件。</p>
<p>jmap 不仅能生成 dump 文件，还阔以查询 <code>finalize</code> 执行队列、Java 堆和永久代的详细信息，如当前使用率、当前使用的是哪种收集器等。</p>
<p>命令格式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmap [option] LVMID</span><br></pre></td></tr></table></figure>
<p>option 参数：</p>
<ol>
<li>dump : 生成堆转储快照</li>
<li>finalizerinfo : 显示在F-Queue队列等待Finalizer线程执行finalizer方法的对象</li>
<li>heap : 显示Java堆详细信息</li>
<li>histo : 显示堆中对象的统计信息</li>
<li>permstat : to print permanent generation statistics</li>
<li>F : 当-dump没有响应时，强制生成dump快照</li>
</ol>
<h4 id="dump"><a href="#dump" class="headerlink" title="-dump"></a>-dump</h4><p>dump 堆到文件，format 指定输出格式，live 指明是活着的对象,file 指定文件名：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jmap -dump:live,format=b,file=dump.hprof 28920</span><br><span class="line">  Dumping heap to /home/xxx/dump.hprof ...</span><br><span class="line">  Heap dump file created</span><br></pre></td></tr></table></figure>
<p>dump.hprof 这个后缀是为了后续可以直接用MAT（Memory Anlysis Tool）打开。</p>
<h4 id="finalizerinfo"><a href="#finalizerinfo" class="headerlink" title="-finalizerinfo"></a>-finalizerinfo</h4><p>打印等待回收对象的信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ jmap -finalizerinfo 28920</span><br><span class="line">  Attaching to process ID 28920, please <span class="built_in">wait</span>...</span><br><span class="line">  Debugger attached successfully.</span><br><span class="line">  Server compiler detected.</span><br><span class="line">  JVM version is 24.71-b01</span><br><span class="line">  Number of objects pending <span class="keyword">for</span> finalization: 0</span><br></pre></td></tr></table></figure>
<p>可以看到当前 F-QUEUE 队列中并没有等待 Finalizer 线程执行 <code>finalizer</code> 方法的对象。</p>
<h4 id="heap"><a href="#heap" class="headerlink" title="-heap"></a>-heap</h4><p>打印 heap 的概要信息，GC 使用的算法，heap 的配置及 wise heap 的使用情况,可以用此来判断内存目前的使用情况以及垃圾回收情况。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">$ jmap -heap 28920</span><br><span class="line">  Attaching to process ID 28920, please <span class="built_in">wait</span>...</span><br><span class="line">  Debugger attached successfully.</span><br><span class="line">  Server compiler detected.</span><br><span class="line">  JVM version is 24.71-b01  </span><br><span class="line"></span><br><span class="line">  using thread-local object allocation.</span><br><span class="line">  Parallel GC with 4 thread(s)//GC 方式  </span><br><span class="line"></span><br><span class="line">  Heap Configuration: //堆内存初始化配置</span><br><span class="line">     MinHeapFreeRatio = 0 //对应jvm启动参数-XX:MinHeapFreeRatio设置JVM堆最小空闲比率(default 40)</span><br><span class="line">     MaxHeapFreeRatio = 100 //对应jvm启动参数 -XX:MaxHeapFreeRatio设置JVM堆最大空闲比率(default 70)</span><br><span class="line">     MaxHeapSize      = 2082471936 (1986.0MB) //对应jvm启动参数-XX:MaxHeapSize=设置JVM堆的最大大小</span><br><span class="line">     NewSize          = 1310720 (1.25MB)//对应jvm启动参数-XX:NewSize=设置JVM堆的‘新生代’的默认大小</span><br><span class="line">     MaxNewSize       = 17592186044415 MB//对应jvm启动参数-XX:MaxNewSize=设置JVM堆的‘新生代’的最大大小</span><br><span class="line">     OldSize          = 5439488 (5.1875MB)//对应jvm启动参数-XX:OldSize=&lt;value&gt;:设置JVM堆的‘老生代’的大小</span><br><span class="line">     NewRatio         = 2 //对应jvm启动参数-XX:NewRatio=:‘新生代’和‘老生代’的大小比率</span><br><span class="line">     SurvivorRatio    = 8 //对应jvm启动参数-XX:SurvivorRatio=设置年轻代中Eden区与Survivor区的大小比值 </span><br><span class="line">     PermSize         = 21757952 (20.75MB)  //对应jvm启动参数-XX:PermSize=&lt;value&gt;:设置JVM堆的‘永生代’的初始大小</span><br><span class="line">     MaxPermSize      = 85983232 (82.0MB)//对应jvm启动参数-XX:MaxPermSize=&lt;value&gt;:设置JVM堆的‘永生代’的最大大小</span><br><span class="line">     G1HeapRegionSize = 0 (0.0MB)  </span><br><span class="line"></span><br><span class="line">  Heap Usage://堆内存使用情况</span><br><span class="line">  PS Young Generation</span><br><span class="line">  Eden Space://Eden区内存分布</span><br><span class="line">     capacity = 33030144 (31.5MB)//Eden区总容量</span><br><span class="line">     used     = 1524040 (1.4534378051757812MB)  //Eden区已使用</span><br><span class="line">     free     = 31506104 (30.04656219482422MB)  //Eden区剩余容量</span><br><span class="line">     4.614088270399305% used //Eden区使用比率</span><br><span class="line">  From Space:  //其中一个Survivor区的内存分布</span><br><span class="line">     capacity = 5242880 (5.0MB)</span><br><span class="line">     used     = 0 (0.0MB)</span><br><span class="line">     free     = 5242880 (5.0MB)</span><br><span class="line">     0.0% used</span><br><span class="line">  To Space:  //另一个Survivor区的内存分布</span><br><span class="line">     capacity = 5242880 (5.0MB)</span><br><span class="line">     used     = 0 (0.0MB)</span><br><span class="line">     free     = 5242880 (5.0MB)</span><br><span class="line">     0.0% used</span><br><span class="line">  PS Old Generation //当前的Old区内存分布</span><br><span class="line">     capacity = 86507520 (82.5MB)</span><br><span class="line">     used     = 0 (0.0MB)</span><br><span class="line">     free     = 86507520 (82.5MB)</span><br><span class="line">     0.0% used</span><br><span class="line">  PS Perm Generation//当前的 “永生代” 内存分布</span><br><span class="line">     capacity = 22020096 (21.0MB)</span><br><span class="line">     used     = 2496528 (2.3808746337890625MB)</span><br><span class="line">     free     = 19523568 (18.619125366210938MB)</span><br><span class="line">     11.337498256138392% used  </span><br><span class="line"></span><br><span class="line">  670 interned Strings occupying 43720 bytes.</span><br></pre></td></tr></table></figure>
<p>可以很清楚的看到 Java 堆中各个区域目前的情况。</p>
<h4 id="histo"><a href="#histo" class="headerlink" title="-histo"></a>-histo</h4><p>打印堆的对象统计，包括对象数、内存大小等等 （因为在 dump:live 前会进行 full gc，如果带上 live 则只统计活对象，因此不加 live 的堆大小要大于加 live 堆的大小）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ jmap -histo:live 28920 | more</span><br><span class="line"> num     <span class="comment">#instances         #bytes  class name</span></span><br><span class="line">----------------------------------------------</span><br><span class="line">   1:         83613       12012248  &lt;constMethodKlass&gt;</span><br><span class="line">   2:         23868       11450280  [B</span><br><span class="line">   3:         83613       10716064  &lt;methodKlass&gt;</span><br><span class="line">   4:         76287       10412128  [C</span><br><span class="line">   5:          8227        9021176  &lt;constantPoolKlass&gt;</span><br><span class="line">   6:          8227        5830256  &lt;instanceKlassKlass&gt;</span><br><span class="line">   7:          7031        5156480  &lt;constantPoolCacheKlass&gt;</span><br><span class="line">   8:         73627        1767048  java.lang.String</span><br><span class="line">   9:          2260        1348848  &lt;methodDataKlass&gt;</span><br><span class="line">  10:          8856         849296  java.lang.Class</span><br><span class="line">  ....</span><br></pre></td></tr></table></figure>
<p><code>class name</code> 是对象类型，说明如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">B  byte</span><br><span class="line">C  char</span><br><span class="line">D  double</span><br><span class="line">F  float</span><br><span class="line">I  int</span><br><span class="line">J  long</span><br><span class="line">Z  boolean</span><br><span class="line">[  数组，如[I表示int[]</span><br><span class="line">[L+类名 其他对象</span><br></pre></td></tr></table></figure>
<h4 id="permstat"><a href="#permstat" class="headerlink" title="-permstat"></a>-permstat</h4><p>打印Java堆内存的永久保存区域的类加载器的智能统计信息。对于每个类加载器而言，它的名称、活跃度、地址、父类加载器、它所加载的类的数量和大小都会被打印。此外，包含的字符串数量和大小也会被打印。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ jmap -permstat 28920</span><br><span class="line">  Attaching to process ID 28920, please <span class="built_in">wait</span>...</span><br><span class="line">  Debugger attached successfully.</span><br><span class="line">  Server compiler detected.</span><br><span class="line">  JVM version is 24.71-b01</span><br><span class="line">  finding class loader instances ..<span class="keyword">done</span>.</span><br><span class="line">  computing per loader <span class="built_in">stat</span> ..<span class="keyword">done</span>.</span><br><span class="line">  please <span class="built_in">wait</span>.. computing liveness.liveness analysis may be inaccurate ...</span><br><span class="line">  </span><br><span class="line">  class_loader            classes bytes   parent_loader           alive?  <span class="built_in">type</span>  </span><br><span class="line">  &lt;bootstrap&gt;             3111    18154296          null          live    &lt;internal&gt;</span><br><span class="line">  0x0000000600905cf8      1       1888    0x0000000600087f08      dead    sun/reflect/DelegatingClassLoader@0x00000007800500a0</span><br><span class="line">  0x00000006008fcb48      1       1888    0x0000000600087f08      dead    sun/reflect/DelegatingClassLoader@0x00000007800500a0</span><br><span class="line">  0x00000006016db798      0       0       0x00000006008d3fc0      dead    java/util/ResourceBundle<span class="variable">$RBClassLoader</span>@0x0000000780626ec0</span><br><span class="line">  0x00000006008d6810      1       3056      null          dead    sun/reflect/DelegatingClassLoader@0x00000007800500a0</span><br></pre></td></tr></table></figure>
<h4 id="F"><a href="#F" class="headerlink" title="-F"></a>-F</h4><p>强制模式。如果指定的 pid 没有响应，请使用 <code>jmap -dump</code> 或 <code>jmap -histo</code> 选项。此模式下，不支持 live 子选项。</p>
<h2 id="jstack"><a href="#jstack" class="headerlink" title="jstack"></a>jstack</h2><p>jstack用于生成java虚拟机当前时刻的线程快照。线程快照是当前java虚拟机内每一条线程正在执行的方法堆栈的集合，生成线程快照的主要目的是定位线程出现长时间停顿的原因，如线程间死锁、死循环、请求外部资源导致的长时间等待等。 线程出现停顿的时候通过jstack来查看各个线程的调用堆栈，就可以知道没有响应的线程到底在后台做什么事情，或者等待什么资源。 如果java程序崩溃生成core文件，jstack工具可以用来获得core文件的java stack和native stack的信息，从而可以轻松地知道java程序是如何崩溃和在程序何处发生问题。另外，jstack工具还可以附属到正在运行的java程序中，看到当时运行的java程序的java stack和native stack的信息, 如果现在运行的java程序呈现hung的状态，jstack是非常有用的。</p>
<h4 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jstack [option] LVMID</span><br></pre></td></tr></table></figure>
<h4 id="option-参数"><a href="#option-参数" class="headerlink" title="option 参数"></a>option 参数</h4><ol>
<li>-F : 当正常输出请求不被响应时，强制输出线程堆栈</li>
<li>-l : 除堆栈外，显示关于锁的附加信息</li>
<li>-m : 如果调用到本地方法的话，可以显示C/C++的堆栈</li>
</ol>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ jstack -l 11494|more</span><br><span class="line">2016-07-28 13:40:04</span><br><span class="line">Full thread dump Java HotSpot(TM) 64-Bit Server VM (24.71-b01 mixed mode):</span><br><span class="line"></span><br><span class="line"><span class="string">"Attach Listener"</span> daemon prio=10 tid=0x00007febb0002000 nid=0x6b6f waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">        - None</span><br><span class="line"></span><br><span class="line"><span class="string">"http-bio-8005-exec-2"</span> daemon prio=10 tid=0x00007feb94028000 nid=0x7b8c waiting on condition [0x00007fea8f56e000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">        at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">        - parking to <span class="built_in">wait</span> <span class="keyword">for</span>  &lt;0x00000000cae09b80&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer<span class="variable">$ConditionObject</span>)</span><br><span class="line">        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)</span><br><span class="line">        at java.util.concurrent.locks.AbstractQueuedSynchronizer<span class="variable">$ConditionObject</span>.await(AbstractQueuedSynchronizer.java:2043)</span><br><span class="line">        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">        at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:104)</span><br><span class="line">        at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:32)</span><br><span class="line">        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)</span><br><span class="line">        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)</span><br><span class="line">        at java.util.concurrent.ThreadPoolExecutor<span class="variable">$Worker</span>.run(ThreadPoolExecutor.java:615)</span><br><span class="line">        at org.apache.tomcat.util.threads.TaskThread<span class="variable">$WrappingRunnable</span>.run(TaskThread.java:61)</span><br><span class="line">        at java.lang.Thread.run(Thread.java:745)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">        - None</span><br><span class="line">      .....</span><br></pre></td></tr></table></figure>
<p><a href="https://www.cnblogs.com/ityouknow/p/5714703.html">参考</a></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>JVM相关的分析工具有使用过哪些？具体的性能调优步骤吗？</p>
<p>讲一下 OOM 以及遇到这种情况怎么处理的，是否使用过日志分析工具</p>
<p>你熟悉的JVM调优参数，使用过哪些调优工具？</p>
<p>VisualVM:JDK自带JVM可视化工具，能过对内存、gc、cpu、thread、class、变量等等信息进行可视化。</p>
<p>几种常用的内存调试工具：jmap、jstack、jconsole</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#jps"><span class="toc-number">1.</span> <span class="toc-text">jps</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jinfo"><span class="toc-number">2.</span> <span class="toc-text">jinfo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jstat"><span class="toc-number">3.</span> <span class="toc-text">jstat</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#class"><span class="toc-number">3.0.1.</span> <span class="toc-text">-class</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#compiler"><span class="toc-number">3.0.2.</span> <span class="toc-text">-compiler</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gc"><span class="toc-number">3.0.3.</span> <span class="toc-text">-gc</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gccapacity"><span class="toc-number">3.0.4.</span> <span class="toc-text">-gccapacity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gcutil"><span class="toc-number">3.0.5.</span> <span class="toc-text">-gcutil</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gcnew"><span class="toc-number">3.0.6.</span> <span class="toc-text">-gcnew</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gcold"><span class="toc-number">3.0.7.</span> <span class="toc-text">-gcold</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gcoldcapacity"><span class="toc-number">3.0.8.</span> <span class="toc-text">-gcoldcapacity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gcpermcapacity"><span class="toc-number">3.0.9.</span> <span class="toc-text">-gcpermcapacity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#printcompilation"><span class="toc-number">3.0.10.</span> <span class="toc-text">-printcompilation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jmap"><span class="toc-number">4.</span> <span class="toc-text">jmap</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#dump"><span class="toc-number">4.0.1.</span> <span class="toc-text">-dump</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#finalizerinfo"><span class="toc-number">4.0.2.</span> <span class="toc-text">-finalizerinfo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#heap"><span class="toc-number">4.0.3.</span> <span class="toc-text">-heap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#histo"><span class="toc-number">4.0.4.</span> <span class="toc-text">-histo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#permstat"><span class="toc-number">4.0.5.</span> <span class="toc-text">-permstat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F"><span class="toc-number">4.0.6.</span> <span class="toc-text">-F</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jstack"><span class="toc-number">5.</span> <span class="toc-text">jstack</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令格式"><span class="toc-number">5.0.1.</span> <span class="toc-text">命令格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#option-参数"><span class="toc-number">5.0.2.</span> <span class="toc-text">option 参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#示例"><span class="toc-number">5.0.3.</span> <span class="toc-text">示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题"><span class="toc-number">6.</span> <span class="toc-text">问题</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&text=JVM_08 性能监控"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&title=JVM_08 性能监控"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&is_video=false&description=JVM_08 性能监控"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=JVM_08 性能监控&body=Check out this article: http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&title=JVM_08 性能监控"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&title=JVM_08 性能监控"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&title=JVM_08 性能监控"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&title=JVM_08 性能监控"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/01/01/后端开发/Java 相关/Java 深入原理/Java 虚拟机/JVM_08 性能监控/&name=JVM_08 性能监控&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 John Doe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        
        <li><a href="/">Home</a></li>
        
        <li><a href="/archives/">Articles</a></li>
        
        <li><a href="/categories/">Categories</a></li>
        
        <li><a href="/search/">Search</a></li>
        
        <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
