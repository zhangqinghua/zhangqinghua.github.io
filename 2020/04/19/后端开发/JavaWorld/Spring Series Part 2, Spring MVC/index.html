<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Spring MVC is the Spring framework’s traditional library for building Java Web applications. It is one of the most popular web frameworks for building fully functional Java web applications and RESTfu">
<meta name="keywords" content="The Spring Series">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Series Part 2, Spring MVC">
<meta property="og:url" content="http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Spring MVC is the Spring framework’s traditional library for building Java Web applications. It is one of the most popular web frameworks for building fully functional Java web applications and RESTfu">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring%20Series%20Part%202,%20Spring%20MVC/001.jpg">
<meta property="og:image" content="http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring%20Series%20Part%202,%20Spring%20MVC/002.jpg">
<meta property="og:image" content="http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring%20Series%20Part%202,%20Spring%20MVC/003.jpg">
<meta property="og:image" content="http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring%20Series%20Part%202,%20Spring%20MVC/004.jpg">
<meta property="og:image" content="http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring%20Series%20Part%202,%20Spring%20MVC/005.jpg">
<meta property="og:updated_time" content="2021-06-29T16:05:16.532Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Spring Series Part 2, Spring MVC">
<meta name="twitter:description" content="Spring MVC is the Spring framework’s traditional library for building Java Web applications. It is one of the most popular web frameworks for building fully functional Java web applications and RESTfu">
<meta name="twitter:image" content="http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring%20Series%20Part%202,%20Spring%20MVC/001.jpg">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Spring Series Part 2, Spring MVC</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/04/19/后端开发/JavaWorld/Spring Series Part 3, Spring WebFlux/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/04/19/后端开发/JavaWorld/Spring Series Part 1, What is Spring/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&text=Spring Series Part 2, Spring MVC"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&title=Spring Series Part 2, Spring MVC"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&is_video=false&description=Spring Series Part 2, Spring MVC"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Spring Series Part 2, Spring MVC&body=Check out this article: http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&title=Spring Series Part 2, Spring MVC"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&title=Spring Series Part 2, Spring MVC"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&title=Spring Series Part 2, Spring MVC"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&title=Spring Series Part 2, Spring MVC"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&name=Spring Series Part 2, Spring MVC&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Boot-with-Spring-Initializr"><span class="toc-number">1.</span> <span class="toc-text">Spring Boot with Spring Initializr</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-MBC-with-H2-database-engine"><span class="toc-number">2.</span> <span class="toc-text">Spring MBC with H2 database engine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-1-Setup-adn-configure-the-app"><span class="toc-number">2.1.</span> <span class="toc-text">Step 1. Setup adn configure the app</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-2-Import-the-Spring-Initializr-project-to-Your-IDE"><span class="toc-number">2.2.</span> <span class="toc-text">Step 2. Import the Spring Initializr project to Your IDE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-3-Setup-your-Maven-POM"><span class="toc-number">2.3.</span> <span class="toc-text">Step 3. Setup your Maven POM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Spring-Boot-starter-app"><span class="toc-number">3.</span> <span class="toc-text">The Spring Boot starter app</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-1-Maven-pom-xml"><span class="toc-number">3.1.</span> <span class="toc-text">Listing 1. Maven pom.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-2-SpringExampleApplication"><span class="toc-number">3.2.</span> <span class="toc-text">Listing 2. SpringExampleApplication</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#About-Spring-MVC-5"><span class="toc-number">4.</span> <span class="toc-text">About Spring MVC 5</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-model-in-Spring-MVC"><span class="toc-number">5.</span> <span class="toc-text">The model in Spring MVC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-3-Widget"><span class="toc-number">5.1.</span> <span class="toc-text">Listing 3. Widget</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-4-WidgetRepository"><span class="toc-number">5.2.</span> <span class="toc-text">Listing 4. WidgetRepository</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Controller-in-Spring-MVC"><span class="toc-number">6.</span> <span class="toc-text">The Controller in Spring MVC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-5-WidgetController"><span class="toc-number">6.1.</span> <span class="toc-text">Listing 5. WidgetController</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Controller-methods-and-the-view-template"><span class="toc-number">7.</span> <span class="toc-text">Controller methods and the view template</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-6-widgets-html"><span class="toc-number">7.1.</span> <span class="toc-text">Listing 6. widgets.html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-7-widget-html"><span class="toc-number">7.2.</span> <span class="toc-text">Listing 7. widget.html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-8-widgetform-html"><span class="toc-number">7.3.</span> <span class="toc-text">Listing 8. widgetform.html</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-number">8.</span> <span class="toc-text">Conclusion</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Spring Series Part 2, Spring MVC
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Hexo</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-04-19T11:00:02.000Z" itemprop="datePublished">2020-04-19</time>
        
        (Updated: <time datetime="2021-06-29T16:05:16.532Z" itemprop="dateModified">2021-06-29</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/JavaWorld/">JavaWorld</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/The-Spring-Series/">The Spring Series</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Spring MVC is the Spring framework’s traditional library for building Java Web applications. It is one of the most popular web frameworks for building fully functional Java web applications and RESTful web services. In this tutorial, you’ll get an overview of Spring MVC and learn how to build Java Web applications using Spring Boot, Spring Initializr, and Thymeleaf.</p>
<h2 id="Spring-Boot-with-Spring-Initializr"><a href="#Spring-Boot-with-Spring-Initializr" class="headerlink" title="Spring Boot with Spring Initializr"></a>Spring Boot with Spring Initializr</h2><p>We’ll fastrack our Spring MVC web application with the help of Spring Boot and Spring Initializr. Given input for the type of application to be built, Spring Initializr uses the most common dependencies and defaults to setup and configure a baisc Spring Boot application. You can also add custom dependencies and Spring Initializr will include and manage them, ensuring version compatibility with both third-party software and Spring. Spring Boot applications run standalone, without requiring you to provide a runtime environment.</p>
<p>In this case, since we’re building a web application, Spring Boot will automatically include and configure Tomcat as part of the app’s runtime. We can also customize the app by adding an H2 database driver to our Maven POM file. Spring Boot will then automatically create an embedded database and DataSource instance in the application context. Once the dependencies are set, Spring Boot will provide default configurations fro the application. Of course we can change the configurations if we want to, but thanks to Spring Boot we hava a headstart: a fully configured, working application right out of the box.</p>
<p>once we’ve selected and configured our dependencies, we’ll pass those selections to Spring Initializr, which will provide a downloadable ZIP file containing a base Spring Boot project.</p>
<h2 id="Spring-MBC-with-H2-database-engine"><a href="#Spring-MBC-with-H2-database-engine" class="headerlink" title="Spring MBC with H2 database engine"></a>Spring MBC with H2 database engine</h2><p>We’ll start by creating a basic Spring MVC web application that persists data to an H2 embedded database.</p>
<h3 id="Step-1-Setup-adn-configure-the-app"><a href="#Step-1-Setup-adn-configure-the-app" class="headerlink" title="Step 1. Setup adn configure the app"></a>Step 1. Setup adn configure the app</h3><p>Navigate to Spring Initializr at start.spring.io and select Generate a Maven Project with java and Spring Boot 2.0.X, where X is the latest Spring Boot version (2.0.3 at time of this writing). Make sure you select Spring Boot 2.x so that you can implement Spring Web MVC 5. Spring Boot 1.4 and Spring Boot 1.5 will implement Spring 4.</p>
<p>Enter a group name the format matching your web address, such as com.geekcap.javaworld, and enter an artifact name, such as spring5mvc-example. Figure 1 shows you my configuration.</p>
<p><img src="001.jpg" alt="Figure 1. Configure for Spring Initializr"></p>
<p>To add dependencies to the web app, you may either enter a comma-separated list of dependencies into the <strong>Search for dependencies</strong> text field or click on <strong>Switch to the full version</strong>. We’ll take the easier route by clicking on <strong>Switch to the full version</strong>. The dependencies are divided into groups, such as Core, Web, and Template Engines. For this example, select the checkboxes for: <strong>Web —&gt; Web, Template Engines —&gt; Thymeleaf, SQL —&gt; JPA, and SQL —&gt; H2</strong>. Here’s what each of those selections will add to the application:</p>
<ul>
<li>Web: Spring MVC and Tomcat</li>
<li>Thymeleaf: Thymeleaf web template engine</li>
<li>JPA: Spring JPA, Hibernate, and Spring Data</li>
<li>H2: The H2 embedded database</li>
</ul>
<p>When you’re finished, click the Generate Project button at the bottom of page. Spring Initializr will create a readymade ZIP file with all the required project sources, which you can download.</p>
<h3 id="Step-2-Import-the-Spring-Initializr-project-to-Your-IDE"><a href="#Step-2-Import-the-Spring-Initializr-project-to-Your-IDE" class="headerlink" title="Step 2. Import the Spring Initializr project to Your IDE"></a>Step 2. Import the Spring Initializr project to Your IDE</h3><p>Extract the ZIP file from Spring Initializr, then import the project into your favorite IDE. For example, to import the project into IntelliJ, choose <strong>File —&gt; New Project</strong>, as shown in Figure 2.</p>
<p><img src="002.jpg" alt="Figure 2. Importing the project into IntelliJ"></p>
<h3 id="Step-3-Setup-your-Maven-POM"><a href="#Step-3-Setup-your-Maven-POM" class="headerlink" title="Step 3. Setup your Maven POM"></a>Step 3. Setup your Maven POM</h3><p>Next, navigate to <strong>Import project from external module</strong>, choose <strong>Maven</strong>, and press <strong>Next</strong>. Be sure to choose a Java 1.8 project SDK, then hit <strong>Finish</strong>.</p>
<h2 id="The-Spring-Boot-starter-app"><a href="#The-Spring-Boot-starter-app" class="headerlink" title="The Spring Boot starter app"></a>The Spring Boot starter app</h2><p>now let’s take a look at the Spring Boot starter application that has been generated by our (minimal) efforts so far.</p>
<p>To start, Listing 1 shows the Maven POM file.</p>
<h3 id="Listing-1-Maven-pom-xml"><a href="#Listing-1-Maven-pom-xml" class="headerlink" title="Listing 1. Maven pom.xml"></a>Listing 1. Maven pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.geekcap.javaworld<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring5mvc-example<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>spring5mvc-example<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Notice that the POM file uses a special parent POM: spring-boot-starter-parent. We’ll use the parent POM to manage the versions of all our dependencies and ensure versions are compatible. The repositories at the end of the POM file reference teh Spring <strong>snapshot</strong> and <strong>milestone</strong> repositories. We need these because Spring Boot 2.x is still a milestone release at the time of this writing.</p>
<p>The dependencies are quite minimal, and most are prefaced with spring-boot-starter:</p>
<ul>
<li>spring-boot-starter-data-jpa</li>
<li>spring-boot-starter-thymeleaf</li>
<li>spring-boot-starter-web</li>
<li>spring-boot-starter-test</li>
</ul>
<p>Each of these starter dependencies brings in all of the sub-dependencies it needs. Figure 3 shows the partially expanded dependency view in IntelliJ.</p>
<p><img src="003.jpg" alt="Figure 3. Spring starter project dependencies"></p>
<p>The POM file includes the following dependencies:</p>
<ul>
<li>spring-boot-starter-data-jpa includes Hibernate and Spring Data</li>
<li>spring-boot-starter-thymeleaf includes the Thymeleaf template engine</li>
<li>spring-boot-starter-web includes spring-boot-starter-tomcat, an embedded version of Apache Tomcat</li>
<li>spring-boot-starter-json includes the Jackson JSON libraries</li>
<li>spring-web and spring-webmvc includes Spring MVC</li>
<li>spring-boot-starter-test includes testing libraries such as JUnit and Mockito</li>
</ul>
<p>When Spring Boot sees these dependencies in the CLASSPATH, it initiates automatic configuration. For example, when it find spring-boot-starter-web, it creates an embedded version of Tomcat, and when if finds H2 and spring-boot-starter-jpa it creates an H2 embedded database and a Hibernate EntityManager. It then wires the EntityManager into Spring Data.</p>
<p>Spring Boot also creates a single class that can be used to run the application. The class for the example application is shown in Listing 2.</p>
<h3 id="Listing-2-SpringExampleApplication"><a href="#Listing-2-SpringExampleApplication" class="headerlink" title="Listing 2. SpringExampleApplication"></a>Listing 2. SpringExampleApplication</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Spring5mvcExampleApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(Spring5mvcExampleApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The class leverages the <code>SpringApplication.run()</code> method, passing in the class to run (Spring5mvcExampleApplication in this exmaple). The @SpringBootApplication annotation includes the following annotations:</p>
<ul>
<li>@Configuration informs Spring that the Spring2mvcExample class contains configuration information. (This annotation can be used to create beans that will get registered with the Spring context.)</li>
<li>@EnableAutoConfiguration tells Spring to automatically configure resources from dependencies found in the CLASSPATH, such as H2 and Tomcat</li>
<li>ComponentScan tells Spring to can packages in the CLASSPATH under the current package (com.geekcap.javaworld.spring5mvcexample) for Spring annotated components such as @Service and @Controller</li>
</ul>
<p>Spring scans the CLASSPATH and automatically creates components such as the embeded Tomcat server and H2 database. It then populates the Spring context with the application components found in the package scan. In essence, Spring Boot makes it very easy to select and configure the services, components, controllers, entities, and so forth that you need for your application. Once you’ve done that, Spring will automatically find them, make them available in the Spring context, and autowire everthing together.</p>
<p>We’ve got our Spring Boot starter project setup and ready to go. In the next section we’ll create the Spring MVC components for our Java Web application.</p>
<blockquote>
<p>What is the Spring context?<br>The Spring context is a registry of all available Spring beans. Classes are identified as Spring beans by annotating them with specific Spring annotations. Examples include @Service, which identifies a business service, @Controller, which identifies a Spring MVC controller (i.e., handles web requests), and @Entity, which is a JPA annotation used to identify classes that are mapped to database tables.</p>
<p>Once these beans are annotated they need to be registered with the Spring context, which Spring Boot does by performing a package scan of all classes in packages in your project. As the Spring context is being built, it implements the <strong>inversion-of-control (IoC) design pattern</strong> through dependency injection: when a Spring bean needs a dependency, such as a service or repository, the bean can either define a constructor that accepts the dependent bean or it can leverage the @Autowired annotation to tell Spring that it needs that dependency. Spring resolves all dependencies and “autowires” the application together.</p>
<p>Dependency Injection is a powerful design pattern because, rather than creating and managing dependencies inside your code — which can be messy and leads to tightly coupled classes — you can instead delegate control to the Spring container. Your class simply tells the container what dependencies it needs to run and the container provides the appropriate dependencies to your class at runtime.</p>
</blockquote>
<h2 id="About-Spring-MVC-5"><a href="#About-Spring-MVC-5" class="headerlink" title="About Spring MVC 5"></a>About Spring MVC 5</h2><p>Spring MVC implements the poluar Model-View-Controller pattern, which you’ve probably seen in other web framework. The Model-View-Controller pattern separates concerns into the categories:</p>
<ul>
<li>Model represents your domain object</li>
<li>View renders your model tp a view, such as to an HTML page</li>
<li>Controller sits between your view and model and translates change requests in the view into changes in the model, and vice versa. In practical terms, the controller accepts incoming requests, potentially updates the model, and send your model objects to a “view” to render back to the client</li>
</ul>
<p>In Spring MVC, controllers are identified by the @Controller annotation and accompanied by a @Requestmapping annotation. The annotation defines the HTTP verb (standard HTTP commands like GET, POST, PUT, and DELELE) and URI for which the request-mapping method will be applied. Spring 4 introduced shortcut request mappings, which make things even easier. We’ll use these mappings — @GetMapping, @PostMapping, @PutMapping, @PatchMapping, and @DeleteMapping — for our example appliation.</p>
<h2 id="The-model-in-Spring-MVC"><a href="#The-model-in-Spring-MVC" class="headerlink" title="The model in Spring MVC"></a>The model in Spring MVC</h2><p>For our application, we’ll define a simple model object, a Widget, store it in an embeded H2 database, and build a controller to menage widgets. Let’s start with the Widget class, which is shown in Listing 3.</p>
<h3 id="Listing-3-Widget"><a href="#Listing-3-Widget" class="headerlink" title="Listing 3. Widget"></a>Listing 3. Widget</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Widget</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.AUTO)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Widget</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Widget</span><span class="params">(Long id, String name, String description)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> description;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDescription</span><span class="params">(String description)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The widget class in a plain old Java object (POJO) that is annotated with JPA (Java Persistence API) annotations. In this case there are three annotations:</p>
<ul>
<li><strong>@Entity</strong> identifies Widget as an entity that can be persisted to a database</li>
<li><strong>@Id</strong> identifies the <strong>id</strong> field as the primary key of the entity</li>
<li><strong>@GeneratedValue</strong> tells the JPA <strong>EntityManager</strong> that the key should be automatically generated in the database</li>
</ul>
<p>Note that <strong>EntityManager</strong> is created automatically for us because we included JPA in the Spring Initializr.</p>
<p>The <strong>Widget</strong> class manages three fields:</p>
<ul>
<li><strong>id</strong> is the ID, or primary key of the widget</li>
<li><strong>name</strong> is the name of the widget</li>
<li><strong>description</strong> is a description of the widget</li>
</ul>
<p>To persist widgets to and from our embedded (内嵌) database, we need to leverage (施加影响) Spring Data. Basically, we’ll define an interface that extends one of Spring Data’s interfaces, such as <strong>CrudRepository</strong>, and Spring Data will provide an implementation of that interface as runtime.</p>
<p>The <strong>CrudRepository</strong> interface includes the following methods:</p>
<ul>
<li><strong>findById</strong> finds the entity in the database with the specified ID</li>
<li><strong>findAll</strong> returns all entities of the repository type from the database (note that there are other Spring Data repository interfaces, such as <strong>PagingAndSortingRepository</strong>, that can help manage larger data sets)</li>
<li><strong>findAllById</strong> passed a collection of IDs, this method returns all entities for those IDs</li>
<li><strong>save</strong> persists an entity to the database (create or update)</li>
<li><strong>saveAll</strong> saves a collection of entities to the database</li>
<li><strong>delete</strong> deletes the specifies entity</li>
<li><strong>deleteById</strong> deletes the entity with the specified ID</li>
<li><strong>deleteAll</strong> delete all entities managed by the repository</li>
<li><strong>count</strong> returns the number of entities that are in the database</li>
<li><strong>existsById</strong> returns true if an entity with the specified ID exists in the database</li>
</ul>
<p>For our example, we’ll create a <strong>WidgetRepository</strong> interface that extends <strong>CrudRepository</strong>, as shown in Listing 4.</p>
<h3 id="Listing-4-WidgetRepository"><a href="#Listing-4-WidgetRepository" class="headerlink" title="Listing 4. WidgetRepository"></a>Listing 4. WidgetRepository</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">WidgetRepository</span> <span class="keyword">extends</span> <span class="title">CrudRepository</span>&lt;<span class="title">Widget</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The <strong>WidgetRepository</strong> allows us to perform all create, read, upadte, and delete (CRUD) operations on widgets. The two parameters passed to the <strong>CrudRepository</strong> are <strong>Widget</strong>, which represents the type of entity that the repository manages, and <strong>Long</strong>, which is the type of the primary key for the <strong>Widget</strong> entity. (This is a simple implementation) that scratches the surface of what you can do with Spring Data. I encourage you to learn more about this useful Spring project.)</p>
<h2 id="The-Controller-in-Spring-MVC"><a href="#The-Controller-in-Spring-MVC" class="headerlink" title="The Controller in Spring MVC"></a>The Controller in Spring MVC</h2><p>With our <strong>Widget</strong> entity and <strong>WidgetRepository</strong> in hand, we’re ready to build a controller. Listing 5 shows the source code for the <strong>WidgetController</strong>.</p>
<h3 id="Listing-5-WidgetController"><a href="#Listing-5-WidgetController" class="headerlink" title="Listing 5. WidgetController"></a>Listing 5. WidgetController</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WidgetController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WidgetRepository widgetRepository;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Load the new widget page.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> model</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/widget/new"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">newWidget</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"widget"</span>, <span class="keyword">new</span> Widget());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"widgetform"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a new widget.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> widget</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> model</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/widget"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">createWidget</span><span class="params">(Widget widget, Model model)</span> </span>&#123;</span><br><span class="line">        widgetRepository.save(widget);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/widget/"</span> + widget.getId();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get a widget by ID.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> model</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/widget/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getWidgetById</span><span class="params">(@PathVariable Long id, Model model)</span> </span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"widget"</span>, widgetRepository.findById(id).orElse(<span class="keyword">new</span> Widget()));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"widget"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get all widgets.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> model</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/widgets"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getWidgets</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"widgets"</span>, widgetRepository.findAll());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"widgets"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Load the edit widget page for the widget with the specified ID.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> model</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/widget/edit/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">editWidget</span><span class="params">(@PathVariable Long id, Model model)</span> </span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"widget"</span>, widgetRepository.findById(id).orElse(<span class="keyword">new</span> Widget()));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"widgetform"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Update a widget.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> widget</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/widget/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">updateWidget</span><span class="params">(Widget widget)</span> </span>&#123;</span><br><span class="line">        widgetRepository.save(widget);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/widget/"</span> + widget.getId();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Delete a widget by ID.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/widget/delete/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteWidget</span><span class="params">(@PathVariable  Long id)</span> </span>&#123;</span><br><span class="line">        widgetRepository.deleteById(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/widgets"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The <strong>WidgetController</strong> is annotated with the <strong>@Controller</strong> annotation. When Spring performs a package can of the classes, it will find the <strong>@Controller</strong> annotation, create an instance of this class, and add it to the Spring context, configured to handle web requests. This <strong>WidgetController</strong> defines a <strong>WidgetRepository</strong> implementation created by Spring Data and automatically wire the repository into the controller.</p>
<p>The <strong>WidgetController</strong> then difines a set of methods to handle requests, using the <strong>@GetMapping</strong> and <strong>PostMapping</strong> annotations. These annotations accept the URI path that each method is handling, defining the HTTP verb accordingly. Because we are using the Thymeleaf engine, each method returns a String naming the template to render. Templates are stored in <strong>src/main/resources/templates</strong> as HTML files with specific Thymeleaf markup, which is shown below.</p>
<p>The method that return a direct template name are all passed a <strong>Model</strong> object. The <strong>Model</strong> object implements a Spring UI interface and provides methods to add attributes to the model. These attributes will be made available to the template to be rendered. For example, in the <strong>getWidgetById</strong> method, we retrieve a <strong>Widget</strong> from the database and set it in the <strong>Model</strong> with the key <strong>widget</strong>. The template can then access that <strong>Widget</strong> using the <strong>widget</strong> key.</p>
<h2 id="Controller-methods-and-the-view-template"><a href="#Controller-methods-and-the-view-template" class="headerlink" title="Controller methods and the view template"></a>Controller methods and the view template</h2><p>Next let’s walk through each <strong>WidgetController</strong> method and its corresponding view template. The homepage for the application is the <strong>/widgets</strong> page, which shows a list of all widgets in the database. The <strong>getWidgets</strong> method retrieves all widgets by calling the <strong>WidgetRepository</strong>‘s <strong>findAll</strong> method, sets it as  the <strong>widgets</strong> attribute in the model, and returns <strong>widgets</strong>. Listing 6 shows the <strong>widgets.html</strong> tempalte file.</p>
<h3 id="Listing-6-widgets-html"><a href="#Listing-6-widgets-html" class="headerlink" title="Listing 6. widgets.html"></a>Listing 6. widgets.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Widgets<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"../static/css/bootstrap.min.css"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;css/bootstrap.min.css&#125;"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Widgets<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>Description<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>View<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>Edit<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"widget : $&#123;widgets&#125;"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;widget.id&#125;"</span>&gt;</span>Widget ID<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;widget.name&#125;"</span>&gt;</span>Widget Name<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;widget.description&#125;"</span>&gt;</span>Widget Description<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">th:href</span>=<span class="string">"$&#123;'/widget/' + widget.id&#125;"</span>&gt;</span>View<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">th:href</span>=<span class="string">"$&#123;'/widget/edit/' + widget.id&#125;"</span>&gt;</span>Edit<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">th:href</span>=<span class="string">"$&#123;'/widget/delete/' + widget.id&#125;"</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"$&#123;'/widget/new'&#125;"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span>&gt;</span>New<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://code.jquery.com/jquery-3.2.1.slim.min.js"</span> <span class="attr">integrity</span>=<span class="string">"sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../static/js/bootstrap.min.js"</span> <span class="attr">th:src</span>=<span class="string">"@&#123;js/bootstrap.min.js&#125;"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Thymeleaf templates are HTML files that import the <strong><a href="http://www.thymeleaf.org">http://www.thymeleaf.org</a></strong> XML namespace, as seen in the <strong>html</strong> tag. With this namespace include (as <strong>th</strong>), Thymeleaf allows us to add tags to existing HTML elements. This enables you to create and style your HTML files without running your application in Tomcat.</p>
<p>For this example, we’ve added the Twitter Bootstrap library, which makes it eaiser to create a nice layout. Rather than constantly restarting Tomcat to view pages, this lets us build the page using an editor, then render the page in a browser. In order to work with your JavaScript and CSS lacally you also need to include the JavaScript <strong>href</strong> and script source <strong>src</strong> values that point to your relative CSS and JavaScript files, respectively. The <strong>th:href</strong> and <strong>th:src</strong> attributes will be resolved to actual URI paths by Thymeleaf in a live application, and will overwrite the <strong>href</strong> and <strong>src</strong> attribute values when the page is rendered.</p>
<p>The HTML file in Listing 6 contains a table that shows a summary of each widget, with buttons to view the details of a widget, edit a widget, or delete a widget. We use the model to pass in a collection of widgets, and we access those by adding the <strong>th:each</strong> attribute of the <strong>tr</strong> (table row) tag, where <strong>th:each</strong> is Thymeleaf’s implementation of a <strong>for-each</strong> contruct. This will create one row for each item in our collection. The <strong>th:each</strong> attribute is passed the value <strong>widget : ${widgets}</strong>. This retrieves the “widgets” collection from the model and assigns each widget to a local variable, “widget”, that will be used inside the row. We can then extract values from the widget using the <strong>${widget.propertyName}</strong> syntax.</p>
<p>For the first three rows, we include the <strong>th:text</strong> attribute in each table cell (<strong>td</strong>), extracting fields from the widget. For the last three rows, we add hyperlink to our other controller URIs:</p>
<ul>
<li><strong>/widget/{id}</strong> shows the widget with the specified ID</li>
<li><strong>/widget/edit/{id}</strong> shows the widget with the specified ID in an editable form</li>
<li><strong>/widget/delete/{id}</strong> deletes the widget with the specified ID, then shows the updated list of widgets</li>
</ul>
<p>The bottom of the page adds a <strong>New</strong> button that allows the user to create a new widget. Widgets are created through the <strong>/widget/new</strong> URL and presented in the same form as the <strong>/widget/edit/{id}</strong> URI.</p>
<p>Figure 4 shows a screenshot of the widget list page.</p>
<p><img src="004.jpg" alt="Figure 4. Widget list page"></p>
<p>When the user presses the <strong>View</strong> button, the <strong>getWidgetById</strong> method is called:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/widget/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getWidgetById</span><span class="params">(@PathVariable Long id, Model model)</span> </span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">"widget"</span>, widgetRepository.findById(id).orElse(<span class="keyword">new</span> Widget()));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"widget"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>The method is mapped to a GET request for <strong>/widget/{id}</strong> and the <strong>id</strong> is extracted using the <strong>@PathVariable</strong> annotation. If you have multiple variables in your path, you can include them using the <strong>@PathVariable</strong> annotation with a variable name that matches the path variable name. In this case, the <strong>getWidgetById</strong> method retrieves the widget with the specified ID from the <strong>widgetRepository</strong>, then assigns it to the model’s “widget” property.</p>
<p>You might have noted that the <strong>WidgetReporitory.findById</strong> method returns an <code>Optional</code>s in Java wrap objects: if the object is persent then you can retrieve it using the <strong>get()</strong> method; if the object is not present then the <strong>Optional</strong> will be equal to <strong>Optional.emtry()</strong>. You can determine if the result has an object by calling the <strong>isPresent()</strong> method. Alternatively, as I did in this case, you could leverage the <strong>orElse()</strong> method, which returns the object if it is present. Otherwise, it returns the widget created inside the <strong>orElse</strong> method. In a production application you would want to return a valid widget or return an error page. For now, we can simply return an emptry widget. Finally, this method returns “widget”, which tells Spring MVC to render this <strong>Widget</strong> using the “widget.html” template, shown in Listing 7.</p>
<h3 id="Listing-7-widget-html"><a href="#Listing-7-widget-html" class="headerlink" title="Listing 7. widget.html"></a>Listing 7. widget.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Widget Details<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"../static/css/bootstrap.min.css"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/css/bootstrap.min.css&#125;"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">"breadcrumb"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">th:href</span>=<span class="string">"$&#123;'/widgets'&#125;"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Widget Details<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>ID:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"form-control-static"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;widget.id&#125;"</span>&gt;</span>Widget ID<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"form-control-static"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;widget.name&#125;"</span>&gt;</span>Widget Name<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>Description:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"form-control-static"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;widget.description&#125;"</span>&gt;</span>Widget Description<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-offset-2 col-sm-10"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> <span class="attr">th:href</span>=<span class="string">"$&#123;'/widget/edit/' + widget.id&#125;"</span>&gt;</span>Edit<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://code.jquery.com/jquery-3.2.1.slim.min.js"</span> <span class="attr">integrity</span>=<span class="string">"sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../static/js/bootstrap.min.js"</span> <span class="attr">th:src</span>=<span class="string">"@&#123;/js/bootstrap.min.js&#125;"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Aside from the Bootstrap markup, this HTML file shows the three widget fields in paragraph elements using the <strong>th:text</strong> Thymeleaf attribute with the <strong>${widget.propertyName}</strong> notation. If you are not familiar with Bootstrap, don’t let the form trick you into thinking this a a proper HTML form that accepts fields; it js just a layout paradigm. </p>
<p>The only other two things I added are:</p>
<ul>
<li>A breadcrumb that allows the user to naviagate back to the homepage (widget list), using an anchor tag with the <strong>th:href</strong> attribute that points to the <strong>/widgets</strong> page</li>
<li>A button (disguised as an anchor tag but render as a button using the Bootstrap class <strong>btn btn-default</strong> CSS) with a <strong>th:href</strong> attribute pointing to <strong>${‘/widget/edit’ + widget.id}</strong>. This notation performs a <strong>String</strong> concatenation of <strong>/widget/edit</strong> with the ID of the widget, resulting in something like <strong>/widget/edit/1</strong>.</li>
</ul>
<p>An example of this apge is shown in Figure 5.</p>
<p><img src="005.jpg" alt="Figure 5. Widget edit page"></p>
<p>If the user presses the <strong>Edit</strong> button, the <strong>editWidget</strong> method is called:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/widget/edit/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">editWidget</span><span class="params">(@PathVariable Long id, Model model)</span> </span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">"widget"</span>, widgetRepository.findById(id).orElse(<span class="keyword">new</span> Widget()));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"widgetform"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>This method maps to the <strong>/widget/edit/{id}</strong> URI, retrieves the widget from the database, sets it an the model’s “widget” attribute, and tells Spring to render it using the “widgetform.html” Thymeleaf, shown in Listing 8.</p>
<h3 id="Listing-8-widgetform-html"><a href="#Listing-8-widgetform-html" class="headerlink" title="Listing 8. widgetform.html"></a>Listing 8. widgetform.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Create/Edit Widget<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"../static/css/bootstrap.min.css"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/css/bootstrap.min.css&#125;"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Create / Edit Widget<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">th:object</span>=<span class="string">"$&#123;widget&#125;"</span> <span class="attr">th:action</span>=<span class="string">"@&#123;/widget&#125;"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">th:field</span>=<span class="string">"*&#123;id&#125;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">th:field</span>=<span class="string">"*&#123;name&#125;"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"Name"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>Description<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">th:field</span>=<span class="string">"*&#123;description&#125;"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"Description"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://code.jquery.com/jquery-3.2.1.slim.min.js"</span> <span class="attr">integrity</span>=<span class="string">"sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../static/js/bootstrap.min.js"</span> <span class="attr">th:src</span>=<span class="string">"@&#123;/js/bootstrap.min.js&#125;"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The template introduces a proper Thymeleaf form. To build a form with Thymeleaf, you specify the object that the form is operation on, using the <strong>th:object</strong> attribute of the <strong>form</strong>, and then you can access that object’s properties using <strong>th:field</strong> attribute in form elements. These field attributes are accessed using the <strong>*{propertyName}</strong> notation, which refers back to the form’s object. In this example, we define a hidden text field to hold the ID (we don’t want the user changing the primary key in the database) and we aa the name and description fields. At the end of the document we add a submit button, which submits the form to the <strong>th:action</strong>, which points to <strong>@{/widget}</strong>. Notice that we use the <strong>@</strong> symbol to reference and the <strong>$</strong> symbol to reference model objects.</p>
<p>We are able to leverage the “widgetform” for both creating new Widgets adn editing existing Widgets by adding an empty <strong>Widget</strong> object in the <strong>newWidget</strong> method:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/widget/new"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">newWidget</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">"widget"</span>, <span class="keyword">new</span> Widget());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"widgetform"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Because we pass an empty <strong>Widget</strong> object through the “widget” model attribute, the form will not fail if a Widget is not present. This allows us to reuse the same form both for creating and editing widgets.</p>
<p>Now that we have our controller and templates definded, we’re ready to run the application. To run a Spring Boot application, execute the following Maven command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn spring-boot:run</span><br></pre></td></tr></table></figure></p>
<p>You should see Spring start Tomcat, create an embedded H2 database with the name <strong>testdb</strong> and then show a summary of the URI mappings for your <strong>Widgetontroller</strong>.</p>
<p>To see your application in action, open a browser to the following URL:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/widgets</span><br></pre></td></tr></table></figure></p>
<p>When you are ready to release and run your application in production, you can build your project with then standard <strong>mvn clean install</strong> and then run the resultan executable JAR file:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mvn clean install</span><br><span class="line">java -jar target/spring5mvc-example-0.0.1-SNAPSHOT.jar</span><br></pre></td></tr></table></figure></p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Spring MVC is the traditional Spring framework library for building Java web applications. This article introduced you to Spring MVC web developement using Spring Boot, Spring initializr, and the Thymeleaf view rendering engine.</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Boot-with-Spring-Initializr"><span class="toc-number">1.</span> <span class="toc-text">Spring Boot with Spring Initializr</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-MBC-with-H2-database-engine"><span class="toc-number">2.</span> <span class="toc-text">Spring MBC with H2 database engine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-1-Setup-adn-configure-the-app"><span class="toc-number">2.1.</span> <span class="toc-text">Step 1. Setup adn configure the app</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-2-Import-the-Spring-Initializr-project-to-Your-IDE"><span class="toc-number">2.2.</span> <span class="toc-text">Step 2. Import the Spring Initializr project to Your IDE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-3-Setup-your-Maven-POM"><span class="toc-number">2.3.</span> <span class="toc-text">Step 3. Setup your Maven POM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Spring-Boot-starter-app"><span class="toc-number">3.</span> <span class="toc-text">The Spring Boot starter app</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-1-Maven-pom-xml"><span class="toc-number">3.1.</span> <span class="toc-text">Listing 1. Maven pom.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-2-SpringExampleApplication"><span class="toc-number">3.2.</span> <span class="toc-text">Listing 2. SpringExampleApplication</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#About-Spring-MVC-5"><span class="toc-number">4.</span> <span class="toc-text">About Spring MVC 5</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-model-in-Spring-MVC"><span class="toc-number">5.</span> <span class="toc-text">The model in Spring MVC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-3-Widget"><span class="toc-number">5.1.</span> <span class="toc-text">Listing 3. Widget</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-4-WidgetRepository"><span class="toc-number">5.2.</span> <span class="toc-text">Listing 4. WidgetRepository</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Controller-in-Spring-MVC"><span class="toc-number">6.</span> <span class="toc-text">The Controller in Spring MVC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-5-WidgetController"><span class="toc-number">6.1.</span> <span class="toc-text">Listing 5. WidgetController</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Controller-methods-and-the-view-template"><span class="toc-number">7.</span> <span class="toc-text">Controller methods and the view template</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-6-widgets-html"><span class="toc-number">7.1.</span> <span class="toc-text">Listing 6. widgets.html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-7-widget-html"><span class="toc-number">7.2.</span> <span class="toc-text">Listing 7. widget.html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-8-widgetform-html"><span class="toc-number">7.3.</span> <span class="toc-text">Listing 8. widgetform.html</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-number">8.</span> <span class="toc-text">Conclusion</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&text=Spring Series Part 2, Spring MVC"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&title=Spring Series Part 2, Spring MVC"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&is_video=false&description=Spring Series Part 2, Spring MVC"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Spring Series Part 2, Spring MVC&body=Check out this article: http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&title=Spring Series Part 2, Spring MVC"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&title=Spring Series Part 2, Spring MVC"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&title=Spring Series Part 2, Spring MVC"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&title=Spring Series Part 2, Spring MVC"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/04/19/后端开发/JavaWorld/Spring Series Part 2, Spring MVC/&name=Spring Series Part 2, Spring MVC&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 John Doe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        
        <li><a href="/">Home</a></li>
        
        <li><a href="/archives/">Articles</a></li>
        
        <li><a href="/categories/">Categories</a></li>
        
        <li><a href="/search/">Search</a></li>
        
        <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
