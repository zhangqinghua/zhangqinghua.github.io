<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="网上流传较广的50道SQL训练，奋斗了不知道多久终于写完了。前18道题的难度依次递增，从19题开始的后半部分算是循环练习和额外function的附加练习，难度恢复到普通状态。 第9题非常难，我反正没有写出来，如果有写出来了的朋友还请赐教。 这50道里面自认为应该没有太多错误，而且尽可能使用了最简单或是最直接的查询，有多种不相上下解法的题目我也都列出了，但也欢迎一起学习的朋友进行讨论和解法优化啊~">
<meta property="og:type" content="article">
<meta property="og:title" content="常用MySQL">
<meta property="og:url" content="http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="网上流传较广的50道SQL训练，奋斗了不知道多久终于写完了。前18道题的难度依次递增，从19题开始的后半部分算是循环练习和额外function的附加练习，难度恢复到普通状态。 第9题非常难，我反正没有写出来，如果有写出来了的朋友还请赐教。 这50道里面自认为应该没有太多错误，而且尽可能使用了最简单或是最直接的查询，有多种不相上下解法的题目我也都列出了，但也欢迎一起学习的朋友进行讨论和解法优化啊~">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2021-03-24T07:43:11.973Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="常用MySQL">
<meta name="twitter:description" content="网上流传较广的50道SQL训练，奋斗了不知道多久终于写完了。前18道题的难度依次递增，从19题开始的后半部分算是循环练习和额外function的附加练习，难度恢复到普通状态。 第9题非常难，我反正没有写出来，如果有写出来了的朋友还请赐教。 这50道里面自认为应该没有太多错误，而且尽可能使用了最简单或是最直接的查询，有多种不相上下解法的题目我也都列出了，但也欢迎一起学习的朋友进行讨论和解法优化啊~">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>常用MySQL</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/04/28/数据库/MySQL 指南/MySQL 锁/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/04/28/数据库/MySQL 指南/MySQL 锁4/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&text=常用MySQL"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&title=常用MySQL"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&is_video=false&description=常用MySQL"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=常用MySQL&body=Check out this article: http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&title=常用MySQL"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&title=常用MySQL"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&title=常用MySQL"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&title=常用MySQL"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&name=常用MySQL&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#数据表"><span class="toc-number">1.</span> <span class="toc-text">数据表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#练习题目"><span class="toc-number">2.</span> <span class="toc-text">练习题目</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询”01”课程比”02”课程成绩高的学生的信息及课程分数"><span class="toc-number">2.0.1.</span> <span class="toc-text">查询”01”课程比”02”课程成绩高的学生的信息及课程分数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询同时存在”01”课程和”02”课程的情况"><span class="toc-number">2.0.2.</span> <span class="toc-text">查询同时存在”01”课程和”02”课程的情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询存在”01”课程但可能不存在”02”课程的情况-不存在时显示为-null"><span class="toc-number">2.0.3.</span> <span class="toc-text">查询存在”01”课程但可能不存在”02”课程的情况(不存在时显示为 null)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询平均成绩大于等于-60-分的同学的学生编号和学生姓名和平均成绩"><span class="toc-number">2.0.4.</span> <span class="toc-text">查询平均成绩大于等于 60 分的同学的学生编号和学生姓名和平均成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询在-SC-表存在成绩的学生信息"><span class="toc-number">2.0.5.</span> <span class="toc-text">查询在 SC 表存在成绩的学生信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询所有同学的学生编号、学生姓名、选课总数、所有课程的成绩总和"><span class="toc-number">2.0.6.</span> <span class="toc-text">查询所有同学的学生编号、学生姓名、选课总数、所有课程的成绩总和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查有成绩的学生信息"><span class="toc-number">2.0.7.</span> <span class="toc-text">查有成绩的学生信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询「李」姓老师的数量"><span class="toc-number">2.0.8.</span> <span class="toc-text">查询「李」姓老师的数量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询学过「张三」老师授课的同学的信息"><span class="toc-number">2.0.9.</span> <span class="toc-text">查询学过「张三」老师授课的同学的信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询没有学全所有课程的同学的信息"><span class="toc-number">2.0.10.</span> <span class="toc-text">查询没有学全所有课程的同学的信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询至少有一门课与学号为”01”的同学所学相同的同学的信息"><span class="toc-number">2.0.11.</span> <span class="toc-text">查询至少有一门课与学号为”01”的同学所学相同的同学的信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询和”01”号的同学学习的课程完全相同的其他同学的信息"><span class="toc-number">2.0.12.</span> <span class="toc-text">查询和”01”号的同学学习的课程完全相同的其他同学的信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询没学过”张三”老师讲授的任一门课程的学生姓名"><span class="toc-number">2.0.13.</span> <span class="toc-text">查询没学过”张三”老师讲授的任一门课程的学生姓名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩"><span class="toc-number">2.0.14.</span> <span class="toc-text">查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#检索”-01-“课程分数小于-60，按分数降序排列的学生信息"><span class="toc-number">2.0.15.</span> <span class="toc-text">检索” 01 “课程分数小于 60，按分数降序排列的学生信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩"><span class="toc-number">2.0.16.</span> <span class="toc-text">按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询各科成绩最高分、最低分和平均分"><span class="toc-number">2.0.17.</span> <span class="toc-text">查询各科成绩最高分、最低分和平均分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#按各科成绩进行排序，并显示排名，-Score-重复时保留名次空缺"><span class="toc-number">2.0.18.</span> <span class="toc-text">按各科成绩进行排序，并显示排名， Score 重复时保留名次空缺</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询学生的总成绩，并进行排名，总分重复时不保留名次空缺"><span class="toc-number">2.0.19.</span> <span class="toc-text">查询学生的总成绩，并进行排名，总分重复时不保留名次空缺</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#统计各科成绩各分数段人数：课程编号，课程名称，-100-85-，-85-70-，-70-60-，-60-0-及所占百分比"><span class="toc-number">2.0.20.</span> <span class="toc-text">统计各科成绩各分数段人数：课程编号，课程名称，[100-85]，[85-70]，[70-60]，[60-0] 及所占百分比</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询各科成绩前三名的记录"><span class="toc-number">2.0.21.</span> <span class="toc-text">查询各科成绩前三名的记录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询每门课程被选修的学生数"><span class="toc-number">2.0.22.</span> <span class="toc-text">查询每门课程被选修的学生数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询出只选修两门课程的学生学号和姓名"><span class="toc-number">2.0.23.</span> <span class="toc-text">查询出只选修两门课程的学生学号和姓名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询男生、女生人数"><span class="toc-number">2.0.24.</span> <span class="toc-text">查询男生、女生人数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询名字中含有「风」字的学生信息"><span class="toc-number">2.0.25.</span> <span class="toc-text">查询名字中含有「风」字的学生信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询同名学生名单，并统计同名人数"><span class="toc-number">2.0.26.</span> <span class="toc-text">查询同名学生名单，并统计同名人数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询-1990-年出生的学生名单"><span class="toc-number">2.0.27.</span> <span class="toc-text">查询 1990 年出生的学生名单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列"><span class="toc-number">2.0.28.</span> <span class="toc-text">查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询平均成绩大于等于-85-的所有学生的学号、姓名和平均成绩"><span class="toc-number">2.0.29.</span> <span class="toc-text">查询平均成绩大于等于 85 的所有学生的学号、姓名和平均成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询课程名称为「数学」，且分数低于-60-的学生姓名和分数"><span class="toc-number">2.0.30.</span> <span class="toc-text">查询课程名称为「数学」，且分数低于 60 的学生姓名和分数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询所有学生的课程及分数情况（存在学生没成绩，没选课的情况）"><span class="toc-number">2.0.31.</span> <span class="toc-text">查询所有学生的课程及分数情况（存在学生没成绩，没选课的情况）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询任何一门课程成绩在-70-分以上的姓名、课程名称和分数"><span class="toc-number">2.0.32.</span> <span class="toc-text">查询任何一门课程成绩在 70 分以上的姓名、课程名称和分数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询存在不及格的课程"><span class="toc-number">2.0.33.</span> <span class="toc-text">查询存在不及格的课程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询课程编号为-01-且课程成绩在-80-分及以上的学生的学号和姓名"><span class="toc-number">2.0.34.</span> <span class="toc-text">查询课程编号为 01 且课程成绩在 80 分及以上的学生的学号和姓名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求每门课程的学生人数"><span class="toc-number">2.0.35.</span> <span class="toc-text">求每门课程的学生人数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#成绩不重复，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩"><span class="toc-number">2.0.36.</span> <span class="toc-text">成绩不重复，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#成绩有重复的情况下，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩"><span class="toc-number">2.0.37.</span> <span class="toc-text">成绩有重复的情况下，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩"><span class="toc-number">2.0.38.</span> <span class="toc-text">查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询每门功成绩最好的前两名"><span class="toc-number">2.0.39.</span> <span class="toc-text">查询每门功成绩最好的前两名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#统计每门课程的学生选修人数（超过-5-人的课程才统计）"><span class="toc-number">2.0.40.</span> <span class="toc-text">统计每门课程的学生选修人数（超过 5 人的课程才统计）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#检索至少选修两门课程的学生学号"><span class="toc-number">2.0.41.</span> <span class="toc-text">检索至少选修两门课程的学生学号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询选修了全部课程的学生信息"><span class="toc-number">2.0.42.</span> <span class="toc-text">查询选修了全部课程的学生信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询各学生的年龄，只按年份来算"><span class="toc-number">2.0.43.</span> <span class="toc-text">查询各学生的年龄，只按年份来算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#按照出生日期来算，当前月日-lt-出生年月的月日则，年龄减一"><span class="toc-number">2.0.44.</span> <span class="toc-text">按照出生日期来算，当前月日 &lt; 出生年月的月日则，年龄减一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询本周过生日的学生"><span class="toc-number">2.0.45.</span> <span class="toc-text">查询本周过生日的学生</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询下周过生日的学生"><span class="toc-number">2.0.46.</span> <span class="toc-text">查询下周过生日的学生</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询本月过生日的学生"><span class="toc-number">2.0.47.</span> <span class="toc-text">查询本月过生日的学生</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询下月过生日的学生"><span class="toc-number">2.0.48.</span> <span class="toc-text">查询下月过生日的学生</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        常用MySQL
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Hexo</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-04-28T00:01:31.000Z" itemprop="datePublished">2020-04-28</time>
        
        (Updated: <time datetime="2021-03-24T07:43:11.973Z" itemprop="dateModified">2021-03-24</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/MySQL-指南/">MySQL 指南</a>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>网上流传较广的50道SQL训练，奋斗了不知道多久终于写完了。前18道题的难度依次递增，从19题开始的后半部分算是循环练习和额外function的附加练习，难度恢复到普通状态。</p>
<p>第9题非常难，我反正没有写出来，如果有写出来了的朋友还请赐教。</p>
<p>这50道里面自认为应该没有太多错误，而且尽可能使用了最简单或是最直接的查询，有多种不相上下解法的题目我也都列出了，但也欢迎一起学习的朋友进行讨论和解法优化啊~</p>
<h2 id="数据表"><a href="#数据表" class="headerlink" title="数据表"></a>数据表</h2><p>学生表 Student</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Student(<span class="keyword">SId</span> <span class="built_in">varchar</span>(<span class="number">10</span>),Sname <span class="built_in">varchar</span>(<span class="number">10</span>),Sage datetime,Ssex <span class="built_in">varchar</span>(<span class="number">10</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'赵雷'</span> , <span class="string">'1990-01-01'</span> , <span class="string">'男'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'钱电'</span> , <span class="string">'1990-12-21'</span> , <span class="string">'男'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'孙风'</span> , <span class="string">'1990-12-20'</span> , <span class="string">'男'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'04'</span> , <span class="string">'李云'</span> , <span class="string">'1990-12-06'</span> , <span class="string">'男'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'05'</span> , <span class="string">'周梅'</span> , <span class="string">'1991-12-01'</span> , <span class="string">'女'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'06'</span> , <span class="string">'吴兰'</span> , <span class="string">'1992-01-01'</span> , <span class="string">'女'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'07'</span> , <span class="string">'郑竹'</span> , <span class="string">'1989-01-01'</span> , <span class="string">'女'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'09'</span> , <span class="string">'张三'</span> , <span class="string">'2017-12-20'</span> , <span class="string">'女'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'10'</span> , <span class="string">'李四'</span> , <span class="string">'2017-12-25'</span> , <span class="string">'女'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'11'</span> , <span class="string">'李四'</span> , <span class="string">'2012-06-06'</span> , <span class="string">'女'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'12'</span> , <span class="string">'赵六'</span> , <span class="string">'2013-06-13'</span> , <span class="string">'女'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'13'</span> , <span class="string">'孙七'</span> , <span class="string">'2014-06-01'</span> , <span class="string">'女'</span>);</span><br></pre></td></tr></table></figure>
<p>科目表 Course</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Course(CId <span class="built_in">varchar</span>(<span class="number">10</span>),Cname <span class="keyword">nvarchar</span>(<span class="number">10</span>),TId <span class="built_in">varchar</span>(<span class="number">10</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'语文'</span> , <span class="string">'02'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'数学'</span> , <span class="string">'01'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'英语'</span> , <span class="string">'03'</span>);</span><br></pre></td></tr></table></figure>
<p>教师表 Teacher<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Teacher(TId <span class="built_in">varchar</span>(<span class="number">10</span>),Tname <span class="built_in">varchar</span>(<span class="number">10</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'张三'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'李四'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'王五'</span>);</span><br></pre></td></tr></table></figure></p>
<p>成绩表 SC</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> SC(<span class="keyword">SId</span> <span class="built_in">varchar</span>(<span class="number">10</span>),CId <span class="built_in">varchar</span>(<span class="number">10</span>),score <span class="built_in">decimal</span>(<span class="number">18</span>,<span class="number">1</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'01'</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'02'</span> , <span class="number">90</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'03'</span> , <span class="number">99</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'01'</span> , <span class="number">70</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'02'</span> , <span class="number">60</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'03'</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'01'</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'02'</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'03'</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'04'</span> , <span class="string">'01'</span> , <span class="number">50</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'04'</span> , <span class="string">'02'</span> , <span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'04'</span> , <span class="string">'03'</span> , <span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'05'</span> , <span class="string">'01'</span> , <span class="number">76</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'05'</span> , <span class="string">'02'</span> , <span class="number">87</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'06'</span> , <span class="string">'01'</span> , <span class="number">31</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'06'</span> , <span class="string">'03'</span> , <span class="number">34</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'07'</span> , <span class="string">'02'</span> , <span class="number">89</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">'07'</span> , <span class="string">'03'</span> , <span class="number">98</span>);</span><br></pre></td></tr></table></figure>
<h2 id="练习题目"><a href="#练习题目" class="headerlink" title="练习题目"></a>练习题目</h2><h4 id="查询”01”课程比”02”课程成绩高的学生的信息及课程分数"><a href="#查询”01”课程比”02”课程成绩高的学生的信息及课程分数" class="headerlink" title="查询”01”课程比”02”课程成绩高的学生的信息及课程分数"></a>查询”01”课程比”02”课程成绩高的学生的信息及课程分数</h4><p>因为需要全部的学生信息，则需要在 sc 表中得到符合条件的 sid 后与 student 表进行 join，可以 <code>left join</code> 也可以 <code>right join</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- left join</span></span><br><span class="line"><span class="keyword">SELECT</span> s.sname, sc.* <span class="keyword">FROM</span>(</span><br><span class="line">        <span class="keyword">select</span>  t1.sid <span class="keyword">sid</span>, t1.cid t1_cid, t1.score t1_socre, t2.cid t2_cid, t2.score t2_socre <span class="keyword">from</span></span><br><span class="line">                (<span class="keyword">select</span> * <span class="keyword">from</span> sc <span class="keyword">where</span> sc.cid = <span class="string">'01'</span>) <span class="keyword">as</span> t1,</span><br><span class="line">                (<span class="keyword">select</span> * <span class="keyword">from</span> sc <span class="keyword">where</span> sc.cid = <span class="string">'02'</span>) <span class="keyword">as</span> t2</span><br><span class="line">        <span class="keyword">where</span> t1.sid = t2.sid <span class="keyword">and</span> t1.score &gt; t2.score</span><br><span class="line">	) sc <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> student s <span class="keyword">ON</span> s.sid = sc.sid</span><br><span class="line"></span><br><span class="line"><span class="comment">-- right join</span></span><br><span class="line"><span class="keyword">select</span> s.sname, sc.* <span class="keyword">from</span> student s <span class="keyword">right</span> <span class="keyword">join</span>(</span><br><span class="line">        <span class="keyword">select</span>  t1.sid <span class="keyword">sid</span>, t1.cid t1_cid, t1.score t1_socre, t2.cid t2_cid, t2.score t2_socre <span class="keyword">from</span></span><br><span class="line">                (<span class="keyword">select</span> * <span class="keyword">from</span> sc <span class="keyword">where</span> sc.cid = <span class="string">'01'</span>) <span class="keyword">as</span> t1,</span><br><span class="line">                (<span class="keyword">select</span> * <span class="keyword">from</span> sc <span class="keyword">where</span> sc.cid = <span class="string">'02'</span>) <span class="keyword">as</span> t2</span><br><span class="line">        <span class="keyword">where</span> t1.sid = t2.sid <span class="keyword">and</span> t1.score &gt; t2.score</span><br><span class="line">) sc <span class="keyword">on</span> s.sid = sc.sid</span><br><span class="line"></span><br><span class="line">sname	<span class="keyword">sid</span>	t1_cid	t1_socre	t2_cid	t2_socre</span><br><span class="line">钱电	<span class="number">02</span>	<span class="number">01</span>	<span class="number">70.0</span>		<span class="number">02</span>	<span class="number">60.0</span></span><br><span class="line">李云	<span class="number">04</span>	<span class="number">01</span>	<span class="number">50.0</span>		<span class="number">02</span>	<span class="number">30.0</span></span><br></pre></td></tr></table></figure>
<h4 id="查询同时存在”01”课程和”02”课程的情况"><a href="#查询同时存在”01”课程和”02”课程的情况" class="headerlink" title="查询同时存在”01”课程和”02”课程的情况"></a>查询同时存在”01”课程和”02”课程的情况</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 以Student作为主表</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> * <span class="keyword">from</span> sc <span class="keyword">where</span> sc.CId = <span class="string">'01'</span>) <span class="keyword">as</span> t1,</span><br><span class="line">    (<span class="keyword">select</span> * <span class="keyword">from</span> sc <span class="keyword">where</span> sc.CId = <span class="string">'02'</span>) <span class="keyword">as</span> t2</span><br><span class="line"><span class="keyword">where</span> t1.SId = t2.SId;</span><br><span class="line"></span><br><span class="line">SId	CId	score	SId(1)	CId(1)	score(1)</span><br><span class="line">01	01	80.0	01	02	90.0</span><br><span class="line">02	01	70.0	02	02	60.0</span><br><span class="line">03	01	80.0	03	02	80.0</span><br><span class="line">04	01	50.0	04	02	30.0</span><br><span class="line">05	01	76.0	05	02	87.0</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 以SC作为主表</span></span><br><span class="line">???</span><br></pre></td></tr></table></figure>
<h4 id="查询存在”01”课程但可能不存在”02”课程的情况-不存在时显示为-null"><a href="#查询存在”01”课程但可能不存在”02”课程的情况-不存在时显示为-null" class="headerlink" title="查询存在”01”课程但可能不存在”02”课程的情况(不存在时显示为 null)"></a>查询存在”01”课程但可能不存在”02”课程的情况(不存在时显示为 null)</h4><p>这一道就是明显需要使用 join 的情况了，02可能不存在，即为 <code>left join</code> 的右侧或 <code>right join</code> 的左侧即可。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- left join</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span></span><br><span class="line">(<span class="keyword">select</span> * <span class="keyword">from</span> sc <span class="keyword">where</span> sc.CId = <span class="string">'01'</span>) <span class="keyword">as</span> t1</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span></span><br><span class="line">(<span class="keyword">select</span> * <span class="keyword">from</span> sc <span class="keyword">where</span> sc.CId = <span class="string">'02'</span>) <span class="keyword">as</span> t2</span><br><span class="line"><span class="keyword">on</span> t1.SId = t2.SId;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- right join</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span></span><br><span class="line">(<span class="keyword">select</span> * <span class="keyword">from</span> sc <span class="keyword">where</span> sc.CId = <span class="string">'02'</span>) <span class="keyword">as</span> t2</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span></span><br><span class="line">(<span class="keyword">select</span> * <span class="keyword">from</span> sc <span class="keyword">where</span> sc.CId = <span class="string">'01'</span>) <span class="keyword">as</span> t1</span><br><span class="line"><span class="keyword">on</span> t1.SId = t2.SId;</span><br><span class="line"></span><br><span class="line">SId	CId	score	SId(1)	CId(1)	score(1)</span><br><span class="line">01	01	80.0	01	02	90.0</span><br><span class="line">02	01	70.0	02	02	60.0</span><br><span class="line">03	01	80.0	03	02	80.0</span><br><span class="line">04	01	50.0	04	02	30.0</span><br><span class="line">05	01	76.0	05	02	87.0</span><br><span class="line">06	01	31.0	null    null    null</span><br></pre></td></tr></table></figure>
<h4 id="查询平均成绩大于等于-60-分的同学的学生编号和学生姓名和平均成绩"><a href="#查询平均成绩大于等于-60-分的同学的学生编号和学生姓名和平均成绩" class="headerlink" title="查询平均成绩大于等于 60 分的同学的学生编号和学生姓名和平均成绩"></a>查询平均成绩大于等于 60 分的同学的学生编号和学生姓名和平均成绩</h4><p>这里只用根据学生 ID 把成绩分组，对分组中的 score 求平均值，最后在选取结果中 AVG 大于 60 的即可. 注意，这里必须要给计算得到的 AVG 结果一个 alias。（AS ss）得到学生信息的时候既可以用 join 也可以用一般的联合搜索</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- having</span></span><br><span class="line"><span class="keyword">select</span> st.sname <span class="keyword">name</span>, sc.score score <span class="keyword">from</span></span><br><span class="line">    student st,</span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">sid</span>, <span class="keyword">avg</span>(score) score <span class="keyword">from</span> sc <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">sid</span> <span class="keyword">having</span> score &gt; <span class="number">60</span>)sc</span><br><span class="line"><span class="keyword">where</span> st.sid = sc.sid</span><br><span class="line"></span><br><span class="line"><span class="comment">-- right join</span></span><br><span class="line"><span class="keyword">select</span> Student.SId, Student.Sname, r.ss <span class="keyword">from</span> Student <span class="keyword">right</span> <span class="keyword">join</span>(</span><br><span class="line">      <span class="keyword">select</span> <span class="keyword">SId</span>, <span class="keyword">AVG</span>(score) <span class="keyword">AS</span> ss <span class="keyword">from</span> sc</span><br><span class="line">      <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">SId</span></span><br><span class="line">      <span class="keyword">HAVING</span> <span class="keyword">AVG</span>(score)&gt; <span class="number">60</span></span><br><span class="line">)r <span class="keyword">on</span> Student.SId = r.SId;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- left join</span></span><br><span class="line"><span class="keyword">select</span> s.sid,ss,sname</span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> <span class="keyword">sid</span>, <span class="keyword">AVG</span>(score) <span class="keyword">as</span> ss <span class="keyword">from</span> sc <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">sid</span> <span class="keyword">HAVING</span> <span class="keyword">AVG</span>(score)&gt; <span class="number">60</span>)r</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> (<span class="keyword">select</span> Student.SId, Student.Sname <span class="keyword">from</span> Student)s <span class="keyword">on</span> s.SId = r.SId;</span><br><span class="line"></span><br><span class="line">name	score</span><br><span class="line">赵雷	89.66667</span><br><span class="line">钱电	70.00000</span><br><span class="line">孙风	80.00000</span><br><span class="line">周梅	81.50000</span><br><span class="line">郑竹	93.50000</span><br></pre></td></tr></table></figure>
<h4 id="查询在-SC-表存在成绩的学生信息"><a href="#查询在-SC-表存在成绩的学生信息" class="headerlink" title="查询在 SC 表存在成绩的学生信息"></a>查询在 SC 表存在成绩的学生信息</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span>(sname) <span class="keyword">from</span> student, sc <span class="keyword">where</span> student.sid = sc.sid</span><br><span class="line"></span><br><span class="line">sname</span><br><span class="line">赵雷</span><br><span class="line">钱电</span><br><span class="line">孙风</span><br><span class="line">李云</span><br><span class="line">周梅</span><br><span class="line">吴兰</span><br><span class="line">郑竹</span><br></pre></td></tr></table></figure>
<h4 id="查询所有同学的学生编号、学生姓名、选课总数、所有课程的成绩总和"><a href="#查询所有同学的学生编号、学生姓名、选课总数、所有课程的成绩总和" class="headerlink" title="查询所有同学的学生编号、学生姓名、选课总数、所有课程的成绩总和"></a>查询所有同学的学生编号、学生姓名、选课总数、所有课程的成绩总和</h4><p>联合查询不会显示没选课的学生。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.sid, student.sname,r.coursenumber,r.scoresum</span><br><span class="line"><span class="keyword">from</span> student,</span><br><span class="line">(<span class="keyword">select</span> sc.sid, <span class="keyword">sum</span>(sc.score) <span class="keyword">as</span> scoresum, <span class="keyword">count</span>(sc.cid) <span class="keyword">as</span> coursenumber <span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sc.sid)r</span><br><span class="line"><span class="keyword">where</span> student.sid = r.sid;</span><br><span class="line"></span><br><span class="line">sid	sname	coursenumber	scoresum</span><br><span class="line">01	赵雷	3	269.0</span><br><span class="line">02	钱电	3	210.0</span><br><span class="line">03	孙风	3	240.0</span><br><span class="line">04	李云	3	100.0</span><br><span class="line">05	周梅	2	163.0</span><br><span class="line">06	吴兰	2	65.0</span><br><span class="line">07	郑竹	2	187.0</span><br></pre></td></tr></table></figure>
<p>如要显示没选课的学生(显示为NULL)，需要使用join。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> s.sid, s.sname,r.coursenumber,r.scoresum</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    (<span class="keyword">select</span> student.sid,student.sname</span><br><span class="line">    <span class="keyword">from</span> student</span><br><span class="line">    )s</span><br><span class="line">    <span class="keyword">left</span> <span class="keyword">join</span></span><br><span class="line">    (<span class="keyword">select</span></span><br><span class="line">        sc.sid, <span class="keyword">sum</span>(sc.score) <span class="keyword">as</span> scoresum, <span class="keyword">count</span>(sc.cid) <span class="keyword">as</span> coursenumber</span><br><span class="line">        <span class="keyword">from</span> sc</span><br><span class="line">        <span class="keyword">group</span> <span class="keyword">by</span> sc.sid</span><br><span class="line">    )r</span><br><span class="line">   <span class="keyword">on</span> s.sid = r.sid</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">sid	sname	coursenumber	scoresum</span><br><span class="line">01	赵雷	3	269.0</span><br><span class="line">02	钱电	3	210.0</span><br><span class="line">03	孙风	3	240.0</span><br><span class="line">04	李云	3	100.0</span><br><span class="line">05	周梅	2	163.0</span><br><span class="line">06	吴兰	2	65.0</span><br><span class="line">07	郑竹	2	187.0</span><br><span class="line">09	张三	null    null</span><br><span class="line">10	李四	null    null</span><br></pre></td></tr></table></figure>
<h4 id="查有成绩的学生信息"><a href="#查有成绩的学生信息" class="headerlink" title="查有成绩的学生信息"></a>查有成绩的学生信息</h4><p>这一题涉及到in和exists的用法，在这种小表中，两种方法的效率都差不多。</p>
<p>当表2的记录数量非常大的时候，选用exists比in要高效很多</p>
<p>EXISTS用于检查子查询是否至少会返回一行数据，该子查询实际上并不返回任何数据，而是返回值True或False.</p>
<p>结论：IN()适合B表比A表数据小的情况</p>
<p>结论：EXISTS()适合B表比A表数据大的情况</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- in</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span>, sname <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">sid</span> <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">sid</span> <span class="keyword">from</span> sc)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- exists</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span>, sname <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">exists</span> (<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> sc <span class="keyword">where</span> sc.sid = student.sid)</span><br><span class="line"></span><br><span class="line"><span class="keyword">sid</span>	sname</span><br><span class="line"><span class="number">01</span>	赵雷</span><br><span class="line"><span class="number">02</span>	钱电</span><br><span class="line"><span class="number">03</span>	孙风</span><br><span class="line"><span class="number">04</span>	李云</span><br><span class="line"><span class="number">05</span>	周梅</span><br><span class="line"><span class="number">06</span>	吴兰</span><br><span class="line"><span class="number">07</span>	郑竹</span><br></pre></td></tr></table></figure>
<h4 id="查询「李」姓老师的数量"><a href="#查询「李」姓老师的数量" class="headerlink" title="查询「李」姓老师的数量"></a>查询「李」姓老师的数量</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="number">1</span>) <span class="keyword">from</span> teacher <span class="keyword">where</span> tname <span class="keyword">like</span> <span class="string">'李%'</span>;</span><br><span class="line"></span><br><span class="line">count</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<h4 id="查询学过「张三」老师授课的同学的信息"><a href="#查询学过「张三」老师授课的同学的信息" class="headerlink" title="查询学过「张三」老师授课的同学的信息"></a>查询学过「张三」老师授课的同学的信息</h4><p>多表联合查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> s.sid, s.sname, t.tname <span class="keyword">from</span> student s, sc, course c, teacher t</span><br><span class="line"><span class="keyword">where</span> s.sid = sc.sid</span><br><span class="line"><span class="keyword">and</span>   sc.cid = c.cid</span><br><span class="line"><span class="keyword">and</span> c.tid = t.tid</span><br><span class="line"><span class="keyword">and</span> t.tname = <span class="string">'张三'</span>;</span><br><span class="line"></span><br><span class="line">sid	sname	tname</span><br><span class="line">01	赵雷	张三</span><br><span class="line">02	钱电	张三</span><br><span class="line">03	孙风	张三</span><br><span class="line">04	李云	张三</span><br><span class="line">05	周梅	张三</span><br><span class="line">07	郑竹	张三</span><br></pre></td></tr></table></figure>
<h4 id="查询没有学全所有课程的同学的信息"><a href="#查询没有学全所有课程的同学的信息" class="headerlink" title="查询没有学全所有课程的同学的信息"></a>查询没有学全所有课程的同学的信息</h4><p>因为有学生什么课都没有选，反向思考，先查询选了所有课的学生，再选择这些人之外的学生</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> student.sid <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line">  <span class="keyword">select</span> sc.sid <span class="keyword">from</span> sc</span><br><span class="line">  <span class="keyword">group</span> <span class="keyword">by</span> sc.sid</span><br><span class="line">  <span class="keyword">having</span> <span class="keyword">count</span>(sc.cid)= (<span class="keyword">select</span> <span class="keyword">count</span>(cid) <span class="keyword">from</span> course)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">sid	sname	ssex</span><br><span class="line">05	周梅	女</span><br><span class="line">06	吴兰	女</span><br><span class="line">07	郑竹	女</span><br><span class="line">09	张三	女</span><br><span class="line">10	李四	女</span><br><span class="line">11	李四	女</span><br><span class="line">12	赵六	女</span><br><span class="line">13	孙七	女</span><br></pre></td></tr></table></figure>
<h4 id="查询至少有一门课与学号为”01”的同学所学相同的同学的信息"><a href="#查询至少有一门课与学号为”01”的同学所学相同的同学的信息" class="headerlink" title="查询至少有一门课与学号为”01”的同学所学相同的同学的信息"></a>查询至少有一门课与学号为”01”的同学所学相同的同学的信息</h4><p>这个用联合查询也可以，但是逻辑不清楚，我觉得较为清楚的逻辑是这样的：从sc表查询01同学的所有选课cid—从sc表查询所有同学的sid如果其cid在前面的结果中—从student表查询所有学生信息如果sid在前面的结果中</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span>, sname <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> student.sid <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">select</span> sc.sid <span class="keyword">from</span> sc</span><br><span class="line">    <span class="keyword">where</span> sc.cid <span class="keyword">in</span>(</span><br><span class="line">        <span class="keyword">select</span> sc.cid <span class="keyword">from</span> sc</span><br><span class="line">        <span class="keyword">where</span> sc.sid = <span class="string">'01'</span></span><br><span class="line">    )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">sid	sname</span><br><span class="line">01	赵雷</span><br><span class="line">02	钱电</span><br><span class="line">03	孙风</span><br><span class="line">04	李云</span><br><span class="line">05	周梅</span><br><span class="line">06	吴兰</span><br><span class="line">07	郑竹</span><br></pre></td></tr></table></figure>
<h4 id="查询和”01”号的同学学习的课程完全相同的其他同学的信息"><a href="#查询和”01”号的同学学习的课程完全相同的其他同学的信息" class="headerlink" title="查询和”01”号的同学学习的课程完全相同的其他同学的信息"></a>查询和”01”号的同学学习的课程完全相同的其他同学的信息</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span> <span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">sid</span>&lt;&gt;<span class="string">'01'</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">sid</span></span><br><span class="line"><span class="keyword">having</span> <span class="keyword">group_concat</span>(cid <span class="keyword">order</span> <span class="keyword">by</span> cid ) =</span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">group_concat</span>(cid <span class="keyword">order</span> <span class="keyword">by</span> cid ) <span class="keyword">from</span> SC <span class="keyword">where</span> <span class="keyword">sid</span> = <span class="string">'01'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="查询没学过”张三”老师讲授的任一门课程的学生姓名"><a href="#查询没学过”张三”老师讲授的任一门课程的学生姓名" class="headerlink" title="查询没学过”张三”老师讲授的任一门课程的学生姓名"></a>查询没学过”张三”老师讲授的任一门课程的学生姓名</h4><p>仍然还是嵌套，三层嵌套， 或者多表联合查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span>, sname <span class="keyword">from</span> student</span><br><span class="line">    <span class="keyword">where</span> student.sid <span class="keyword">not</span> <span class="keyword">in</span>(</span><br><span class="line">        <span class="keyword">select</span> sc.sid <span class="keyword">from</span> sc <span class="keyword">where</span> sc.cid <span class="keyword">in</span>(</span><br><span class="line">            <span class="keyword">select</span> course.cid <span class="keyword">from</span> course <span class="keyword">where</span> course.tid <span class="keyword">in</span>(</span><br><span class="line">                <span class="keyword">select</span> teacher.tid <span class="keyword">from</span> teacher <span class="keyword">where</span> tname = <span class="string">"张三"</span></span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span>, sname <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> student.sid <span class="keyword">not</span> <span class="keyword">in</span>(</span><br><span class="line">    <span class="keyword">select</span> sc.sid <span class="keyword">from</span> sc,course,teacher</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">        sc.cid = course.cid</span><br><span class="line">        <span class="keyword">and</span> course.tid = teacher.tid</span><br><span class="line">        <span class="keyword">and</span> teacher.tname= <span class="string">"张三"</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">sid	sname</span><br><span class="line">06	吴兰</span><br><span class="line">09	张三</span><br><span class="line">10	李四</span><br><span class="line">11	李四</span><br><span class="line">12	赵六</span><br><span class="line">13	孙七</span><br></pre></td></tr></table></figure>
<h4 id="查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩"><a href="#查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩" class="headerlink" title="查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩"></a>查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩</h4><p>从SC表中选取score小于60的，并group by sid，having count 大于1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.sid, student.sname, <span class="keyword">AVG</span>(sc.score) <span class="keyword">from</span> student,sc</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    student.sid = sc.sid <span class="keyword">and</span> sc.score&lt;<span class="number">60</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sc.sid</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*)&gt;<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">sid	sname	AVG(sc.score)</span><br><span class="line">04	李云	33.33333</span><br><span class="line">06	吴兰	32.50000</span><br></pre></td></tr></table></figure>
<h4 id="检索”-01-“课程分数小于-60，按分数降序排列的学生信息"><a href="#检索”-01-“课程分数小于-60，按分数降序排列的学生信息" class="headerlink" title="检索” 01 “课程分数小于 60，按分数降序排列的学生信息"></a>检索” 01 “课程分数小于 60，按分数降序排列的学生信息</h4><p>双表联合查询，在查询最后可以设置排序方式，语法为ORDER BY <strong>*</strong> DESC\ASC;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.sid, student.sname, sc.score <span class="keyword">from</span> student, sc</span><br><span class="line"><span class="keyword">where</span> student.sid = sc.sid</span><br><span class="line"><span class="keyword">and</span> sc.score &lt; <span class="number">60</span></span><br><span class="line"><span class="keyword">and</span> cid = <span class="string">"01"</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sc.score <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line">sid	sname	score</span><br><span class="line">04	李云	50.0</span><br><span class="line">06	吴兰	31.0</span><br></pre></td></tr></table></figure>
<h4 id="按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩"><a href="#按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩" class="headerlink" title="按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩"></a>按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *  <span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">sid</span>,<span class="keyword">avg</span>(score) <span class="keyword">as</span> avscore <span class="keyword">from</span> sc</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">sid</span></span><br><span class="line">    )r</span><br><span class="line"><span class="keyword">on</span> sc.sid = r.sid</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> avscore <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">sid	cid	score	sid(1)	avscore</span><br><span class="line">07	02	89.0	07	93.50000</span><br><span class="line">07	03	98.0	07	93.50000</span><br><span class="line">01	03	99.0	01	89.66667</span><br><span class="line">01	02	90.0	01	89.66667</span><br><span class="line">01	01	80.0	01	89.66667</span><br><span class="line">05	01	76.0	05	81.50000</span><br><span class="line">05	02	87.0	05	81.50000</span><br><span class="line">03	02	80.0	03	80.00000</span><br></pre></td></tr></table></figure>
<h4 id="查询各科成绩最高分、最低分和平均分"><a href="#查询各科成绩最高分、最低分和平均分" class="headerlink" title="查询各科成绩最高分、最低分和平均分"></a>查询各科成绩最高分、最低分和平均分</h4><p>以如下形式显示：课程 ID，课程 name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率</p>
<p>及格为&gt;=60，中等为：70-80，优良为：80-90，优秀为：&gt;=90</p>
<p>要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">sc.CId ,</span><br><span class="line"><span class="keyword">max</span>(sc.score)<span class="keyword">as</span> 最高分,</span><br><span class="line"><span class="keyword">min</span>(sc.score)<span class="keyword">as</span> 最低分,</span><br><span class="line"><span class="keyword">AVG</span>(sc.score)<span class="keyword">as</span> 平均分,</span><br><span class="line"><span class="keyword">count</span>(*)<span class="keyword">as</span> 选修人数,</span><br><span class="line"><span class="keyword">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> sc.score&gt;=<span class="number">60</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span> )/<span class="keyword">count</span>(*)<span class="keyword">as</span> 及格率,</span><br><span class="line"><span class="keyword">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> sc.score&gt;=<span class="number">70</span> <span class="keyword">and</span> sc.score&lt;<span class="number">80</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span> )/<span class="keyword">count</span>(*)<span class="keyword">as</span> 中等率,</span><br><span class="line"><span class="keyword">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> sc.score&gt;=<span class="number">80</span> <span class="keyword">and</span> sc.score&lt;<span class="number">90</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span> )/<span class="keyword">count</span>(*)<span class="keyword">as</span> 优良率,</span><br><span class="line"><span class="keyword">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> sc.score&gt;=<span class="number">90</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span> )/<span class="keyword">count</span>(*)<span class="keyword">as</span> 优秀率</span><br><span class="line"><span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sc.CId</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">count</span>(*)<span class="keyword">DESC</span>, sc.CId <span class="keyword">ASC</span></span><br><span class="line"></span><br><span class="line">CId	最高分	最低分	平均分	选修人数	及格率	中等率	优良率	优秀率</span><br><span class="line"><span class="number">01</span>	<span class="number">80.0</span>	<span class="number">31.0</span>	<span class="number">64.50000</span>	<span class="number">6</span>	<span class="number">0.6667</span>	<span class="number">0.3333</span>	<span class="number">0.3333</span>	<span class="number">0.0000</span></span><br><span class="line"><span class="number">02</span>	<span class="number">90.0</span>	<span class="number">30.0</span>	<span class="number">72.66667</span>	<span class="number">6</span>	<span class="number">0.8333</span>	<span class="number">0.0000</span>	<span class="number">0.5000</span>	<span class="number">0.1667</span></span><br><span class="line"><span class="number">03</span>	<span class="number">99.0</span>	<span class="number">20.0</span>	<span class="number">68.50000</span>	<span class="number">6</span>	<span class="number">0.6667</span>	<span class="number">0.0000</span>	<span class="number">0.3333</span>	<span class="number">0.3333</span></span><br></pre></td></tr></table></figure>
<h4 id="按各科成绩进行排序，并显示排名，-Score-重复时保留名次空缺"><a href="#按各科成绩进行排序，并显示排名，-Score-重复时保留名次空缺" class="headerlink" title="按各科成绩进行排序，并显示排名， Score 重复时保留名次空缺"></a>按各科成绩进行排序，并显示排名， Score 重复时保留名次空缺</h4><p>这一道题有点tricky，可以用变量，但也有更为简单的方法，即自交（左交）</p>
<p>用sc中的score和自己进行对比，来计算“比当前分数高的分数有几个”。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.cid, a.sid, a.score, <span class="keyword">count</span>(b.score)+<span class="number">1</span> <span class="keyword">as</span> <span class="keyword">rank</span></span><br><span class="line"><span class="keyword">from</span> sc <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> sc <span class="keyword">as</span> b</span><br><span class="line"><span class="keyword">on</span> a.score&lt;b.score <span class="keyword">and</span> a.cid = b.cid</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.cid, a.sid,a.score</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> a.cid, <span class="keyword">rank</span> <span class="keyword">ASC</span>;</span><br><span class="line"></span><br><span class="line">cid	sid	score	rank</span><br><span class="line">01	01	80.0	1</span><br><span class="line">01	03	80.0	1</span><br><span class="line">01	05	76.0	3</span><br><span class="line">01	02	70.0	4</span><br><span class="line">01	04	50.0	5</span><br><span class="line">01	06	31.0	6</span><br><span class="line">02	01	90.0	1</span><br><span class="line">02	07	89.0	2</span><br><span class="line">02	05	87.0	3</span><br><span class="line">02	03	80.0	4</span><br></pre></td></tr></table></figure>
<h4 id="查询学生的总成绩，并进行排名，总分重复时不保留名次空缺"><a href="#查询学生的总成绩，并进行排名，总分重复时不保留名次空缺" class="headerlink" title="查询学生的总成绩，并进行排名，总分重复时不保留名次空缺"></a>查询学生的总成绩，并进行排名，总分重复时不保留名次空缺</h4><p>这里主要学习一下使用变量。在SQL里面变量用@来标识。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @crank=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">select</span> q.sid, total, @crank := @crank +<span class="number">1</span> <span class="keyword">as</span> <span class="keyword">rank</span> <span class="keyword">from</span>(</span><br><span class="line"><span class="keyword">select</span> sc.sid, <span class="keyword">sum</span>(sc.score) <span class="keyword">as</span> total <span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sc.sid</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> total <span class="keyword">desc</span>)q;</span><br><span class="line"></span><br><span class="line">sid	total	rank</span><br><span class="line">01	269.0	1</span><br><span class="line">03	240.0	2</span><br><span class="line">02	210.0	3</span><br><span class="line">07	187.0	4</span><br><span class="line">05	163.0	5</span><br><span class="line">04	100.0	6</span><br><span class="line">06	65.0	7</span><br></pre></td></tr></table></figure>
<h4 id="统计各科成绩各分数段人数：课程编号，课程名称，-100-85-，-85-70-，-70-60-，-60-0-及所占百分比"><a href="#统计各科成绩各分数段人数：课程编号，课程名称，-100-85-，-85-70-，-70-60-，-60-0-及所占百分比" class="headerlink" title="统计各科成绩各分数段人数：课程编号，课程名称，[100-85]，[85-70]，[70-60]，[60-0] 及所占百分比"></a>统计各科成绩各分数段人数：课程编号，课程名称，[100-85]，[85-70]，[70-60]，[60-0] 及所占百分比</h4><p>有时候觉得自己真是死脑筋。group by以后的查询结果无法使用别名，所以不要想着先单表group by计算出结果再从第二张表里添上课程信息，而应该先将两张表join在一起得到所有想要的属性再对这张总表进行统计计算。这里就不算百分比了，道理相同。<br>注意一下，用case when 返回1 以后的统计不是用count而是sum</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> course.cname, course.cid,</span><br><span class="line"><span class="keyword">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> sc.score&lt;=<span class="number">100</span> <span class="keyword">and</span> sc.score&gt;<span class="number">85</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> <span class="string">"[100-85]"</span>,</span><br><span class="line"><span class="keyword">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> sc.score&lt;=<span class="number">85</span> <span class="keyword">and</span> sc.score&gt;<span class="number">70</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> <span class="string">"[85-70]"</span>,</span><br><span class="line"><span class="keyword">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> sc.score&lt;=<span class="number">70</span> <span class="keyword">and</span> sc.score&gt;<span class="number">60</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> <span class="string">"[70-60]"</span>,</span><br><span class="line"><span class="keyword">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> sc.score&lt;=<span class="number">60</span> <span class="keyword">and</span> sc.score&gt;<span class="number">0</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> <span class="string">"[60-0]"</span></span><br><span class="line"><span class="keyword">from</span> sc <span class="keyword">left</span> <span class="keyword">join</span> course</span><br><span class="line"><span class="keyword">on</span> sc.cid = course.cid</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sc.cid;</span><br><span class="line"></span><br><span class="line">cname	cid	[100-85]	[85-70]	[70-60]	[60-0]</span><br><span class="line">语文	01	0	        3	1	2</span><br><span class="line">数学	02	3	        1	0	2</span><br><span class="line">英语	03	2	        2	0	2</span><br></pre></td></tr></table></figure>
<h4 id="查询各科成绩前三名的记录"><a href="#查询各科成绩前三名的记录" class="headerlink" title="查询各科成绩前三名的记录"></a>查询各科成绩前三名的记录</h4><p>大坑比。mysql不能group by 了以后取limit，所以不要想着讨巧了，我快被这一题气死了。思路有两种，第一种比较暴力，计算比自己分数大的记录有几条，如果小于3 就select，因为对前三名来说不会有3个及以上的分数比自己大了，最后再对所有select到的结果按照分数和课程编号排名即可。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">where</span> (</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> sc <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">where</span> sc.cid = a.cid <span class="keyword">and</span> sc.score&lt;a.score</span><br><span class="line">)&lt; <span class="number">3</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> cid <span class="keyword">asc</span>, sc.score <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">sid	cid	score</span><br><span class="line">01	01	80.0</span><br><span class="line">03	01	80.0</span><br><span class="line">05	01	76.0</span><br><span class="line">01	02	90.0</span><br><span class="line">07	02	89.0</span><br><span class="line">05	02	87.0</span><br><span class="line">01	03	99.0</span><br><span class="line">07	03	98.0</span><br><span class="line">02	03	80.0</span><br><span class="line">03	03	80.0</span><br></pre></td></tr></table></figure>
<p>order by cid asc, sc.score desc;<br>第二种比较灵巧一些，用自身左交，但是有点难以理解。<br>先用自己交自己，条件为a.cid = b.cid and a.score&lt;b.score，其实就是列出同一门课内所有分数比较的情况。<br>想要查看完整的表可以</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> sc a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> sc b <span class="keyword">on</span> a.cid = b.cid <span class="keyword">and</span> a.score&lt;b.score</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> a.cid,a.score;</span><br></pre></td></tr></table></figure>
<p>查看，发现结果是47行的一个表，列出了类似 01号课里“30分小于50，也小于70，也小于80，也小于90”“50分小于70，小于80，小于90”…..<br>所以理论上，对任何一门课来说，分数最高的那三个记录，在这张大表里，通过a.sid和a.cid可以联合确定这个同学的这门课的这个分数究竟比多少个其他记录高/低，<br>如果这个特定的a.sid和a.cid组合出现在这张表里的次数少于3个，那就意味着这个组合（学号+课号+分数）是这门课里排名前三的。<br>所以下面这个计算中having count 部分其实count()或者任意其他列都可以，这里制定了一个列只是因为比count()运行速度上更快。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.sid,a.cid,a.score <span class="keyword">from</span> sc a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> sc b <span class="keyword">on</span> a.cid = b.cid <span class="keyword">and</span> a.score&lt;b.score</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.cid, a.sid</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(b.cid)&lt;<span class="number">3</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> a.cid;</span><br></pre></td></tr></table></figure>
<h4 id="查询每门课程被选修的学生数"><a href="#查询每门课程被选修的学生数" class="headerlink" title="查询每门课程被选修的学生数"></a>查询每门课程被选修的学生数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> cid, <span class="keyword">count</span>(<span class="keyword">sid</span>) <span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cid;</span><br><span class="line"></span><br><span class="line">cid	count(sid)</span><br><span class="line">01	6</span><br><span class="line">02	6</span><br><span class="line">03	6</span><br></pre></td></tr></table></figure>
<h4 id="查询出只选修两门课程的学生学号和姓名"><a href="#查询出只选修两门课程的学生学号和姓名" class="headerlink" title="查询出只选修两门课程的学生学号和姓名"></a>查询出只选修两门课程的学生学号和姓名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 嵌套查询</span></span><br><span class="line"><span class="keyword">select</span> student.sid, student.sname <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> student.sid <span class="keyword">in</span></span><br><span class="line">(<span class="keyword">select</span> sc.sid <span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sc.sid</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(sc.cid)=<span class="number">2</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 联合查询</span></span><br><span class="line"><span class="keyword">select</span> student.SId,student.Sname</span><br><span class="line"><span class="keyword">from</span> sc,student</span><br><span class="line"><span class="keyword">where</span> student.SId=sc.SId</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sc.SId</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">count</span>(*)=<span class="number">2</span>；</span><br><span class="line"></span><br><span class="line"><span class="keyword">SId</span>	Sname</span><br><span class="line"><span class="number">05</span>	周梅</span><br><span class="line"><span class="number">06</span>	吴兰</span><br><span class="line"><span class="number">07</span>	郑竹</span><br></pre></td></tr></table></figure>
<h4 id="查询男生、女生人数"><a href="#查询男生、女生人数" class="headerlink" title="查询男生、女生人数"></a>查询男生、女生人数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ssex, <span class="keyword">count</span>(*) <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> ssex;</span><br><span class="line"></span><br><span class="line">ssex	count(*)</span><br><span class="line">女	8</span><br><span class="line">男	4</span><br></pre></td></tr></table></figure>
<h4 id="查询名字中含有「风」字的学生信息"><a href="#查询名字中含有「风」字的学生信息" class="headerlink" title="查询名字中含有「风」字的学生信息"></a>查询名字中含有「风」字的学生信息</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> student.Sname <span class="keyword">like</span> <span class="string">'%风%'</span></span><br></pre></td></tr></table></figure>
<h4 id="查询同名学生名单，并统计同名人数"><a href="#查询同名学生名单，并统计同名人数" class="headerlink" title="查询同名学生名单，并统计同名人数"></a>查询同名学生名单，并统计同名人数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 找到同名的名字并统计个数</span></span><br><span class="line"><span class="keyword">select</span> sname, <span class="keyword">count</span>(*) <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sname</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*)&gt;<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">sname	count(*)</span><br><span class="line">李四	2</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 嵌套查询列出同名的全部学生的信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> sname <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">select</span> sname <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sname</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*)&gt;<span class="number">1</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">sid	sname	ssex</span><br><span class="line">10	李四	女</span><br><span class="line">11	李四	女</span><br></pre></td></tr></table></figure>
<h4 id="查询-1990-年出生的学生名单"><a href="#查询-1990-年出生的学生名单" class="headerlink" title="查询 1990 年出生的学生名单"></a>查询 1990 年出生的学生名单</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">YEAR</span>(student.Sage)=<span class="number">1990</span>;</span><br></pre></td></tr></table></figure>
<h4 id="查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列"><a href="#查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列" class="headerlink" title="查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列"></a>查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sc.cid, course.cname, <span class="keyword">AVG</span>(SC.SCORE) <span class="keyword">as</span> average <span class="keyword">from</span> sc, course</span><br><span class="line"><span class="keyword">where</span> sc.cid = course.cid</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sc.cid</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> average <span class="keyword">desc</span>,cid <span class="keyword">asc</span>;</span><br><span class="line"></span><br><span class="line">cid	cname	average</span><br><span class="line">02	数学	72.66667</span><br><span class="line">03	英语	68.50000</span><br><span class="line">01	语文	64.50000</span><br></pre></td></tr></table></figure>
<h4 id="查询平均成绩大于等于-85-的所有学生的学号、姓名和平均成绩"><a href="#查询平均成绩大于等于-85-的所有学生的学号、姓名和平均成绩" class="headerlink" title="查询平均成绩大于等于 85 的所有学生的学号、姓名和平均成绩"></a>查询平均成绩大于等于 85 的所有学生的学号、姓名和平均成绩</h4><p>having也可以用来截取结果表，在这里就先得到平均成绩总表，再截取AVG大于85的即可.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sid	sname	aver</span><br><span class="line">01	赵雷	89.66667</span><br><span class="line">07	郑竹	93.50000</span><br></pre></td></tr></table></figure>
<h4 id="查询课程名称为「数学」，且分数低于-60-的学生姓名和分数"><a href="#查询课程名称为「数学」，且分数低于-60-的学生姓名和分数" class="headerlink" title="查询课程名称为「数学」，且分数低于 60 的学生姓名和分数"></a>查询课程名称为「数学」，且分数低于 60 的学生姓名和分数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.sname, sc.score <span class="keyword">from</span> student, sc, course</span><br><span class="line"><span class="keyword">where</span> student.sid = sc.sid</span><br><span class="line"><span class="keyword">and</span> course.cid = sc.cid</span><br><span class="line"><span class="keyword">and</span> course.cname = <span class="string">"数学"</span></span><br><span class="line"><span class="keyword">and</span> sc.score &lt; <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">sname	score</span><br><span class="line">李云	30.0</span><br></pre></td></tr></table></figure>
<h4 id="查询所有学生的课程及分数情况（存在学生没成绩，没选课的情况）"><a href="#查询所有学生的课程及分数情况（存在学生没成绩，没选课的情况）" class="headerlink" title="查询所有学生的课程及分数情况（存在学生没成绩，没选课的情况）"></a>查询所有学生的课程及分数情况（存在学生没成绩，没选课的情况）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.sname, cid, score <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> sc</span><br><span class="line"><span class="keyword">on</span> student.sid = sc.sid;</span><br><span class="line"></span><br><span class="line">sname	cid	score</span><br><span class="line">赵雷	01	80.0</span><br><span class="line">赵雷	02	90.0</span><br><span class="line">赵雷	03	99.0</span><br><span class="line">钱电	01	70.0</span><br><span class="line">钱电	02	60.0</span><br><span class="line">钱电	03	80.0</span><br><span class="line">孙风	01	80.0</span><br><span class="line">孙风	02	80.0</span><br></pre></td></tr></table></figure>
<h4 id="查询任何一门课程成绩在-70-分以上的姓名、课程名称和分数"><a href="#查询任何一门课程成绩在-70-分以上的姓名、课程名称和分数" class="headerlink" title="查询任何一门课程成绩在 70 分以上的姓名、课程名称和分数"></a>查询任何一门课程成绩在 70 分以上的姓名、课程名称和分数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.sname, course.cname,sc.score <span class="keyword">from</span> student,course,sc</span><br><span class="line"><span class="keyword">where</span> sc.score&gt;<span class="number">70</span></span><br><span class="line"><span class="keyword">and</span> student.sid = sc.sid</span><br><span class="line"><span class="keyword">and</span> sc.cid = course.cid;</span><br><span class="line"></span><br><span class="line">sname	cname	score</span><br><span class="line">赵雷	语文	80.0</span><br><span class="line">赵雷	数学	90.0</span><br><span class="line">赵雷	英语	99.0</span><br><span class="line">钱电	英语	80.0</span><br><span class="line">孙风	语文	80.0</span><br><span class="line">孙风	数学	80.0</span><br><span class="line">孙风	英语	80.0</span><br></pre></td></tr></table></figure>
<h4 id="查询存在不及格的课程"><a href="#查询存在不及格的课程" class="headerlink" title="查询存在不及格的课程"></a>查询存在不及格的课程</h4><p>可以用group by 来取唯一，也可以用distinct</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- group by</span></span><br><span class="line"><span class="keyword">select</span> cid <span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">where</span> score&lt; <span class="number">60</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cid;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- distinct</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">DISTINCT</span> sc.CId</span><br><span class="line"><span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">where</span> sc.score &lt;<span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">cid</span><br><span class="line">01</span><br><span class="line">02</span><br><span class="line">03</span><br></pre></td></tr></table></figure>
<h4 id="查询课程编号为-01-且课程成绩在-80-分及以上的学生的学号和姓名"><a href="#查询课程编号为-01-且课程成绩在-80-分及以上的学生的学号和姓名" class="headerlink" title="查询课程编号为 01 且课程成绩在 80 分及以上的学生的学号和姓名"></a>查询课程编号为 01 且课程成绩在 80 分及以上的学生的学号和姓名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.sid,student.sname</span><br><span class="line"><span class="keyword">from</span> student,sc</span><br><span class="line"><span class="keyword">where</span> cid=<span class="string">"01"</span></span><br><span class="line"><span class="keyword">and</span> score&gt;=<span class="number">80</span></span><br><span class="line"><span class="keyword">and</span> student.sid = sc.sid;</span><br><span class="line"></span><br><span class="line">sid	sname</span><br><span class="line">01	赵雷</span><br><span class="line">03	孙风</span><br></pre></td></tr></table></figure>
<h4 id="求每门课程的学生人数"><a href="#求每门课程的学生人数" class="headerlink" title="求每门课程的学生人数"></a>求每门课程的学生人数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sc.CId,<span class="keyword">count</span>(*) <span class="keyword">as</span> 学生人数</span><br><span class="line"><span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sc.CId;</span><br><span class="line"></span><br><span class="line">CId	学生人数</span><br><span class="line">01	6</span><br><span class="line">02	6</span><br><span class="line">03	6</span><br></pre></td></tr></table></figure>
<h4 id="成绩不重复，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩"><a href="#成绩不重复，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩" class="headerlink" title="成绩不重复，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩"></a>成绩不重复，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩</h4><p>用having max()理论上也是对的，但是下面那种按分数排序然后取limit 1的更直观可靠</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.*, sc.score, sc.cid <span class="keyword">from</span> student, teacher, course,sc</span><br><span class="line"><span class="keyword">where</span> teacher.tid = course.tid</span><br><span class="line"><span class="keyword">and</span> sc.sid = student.sid</span><br><span class="line"><span class="keyword">and</span> sc.cid = course.cid</span><br><span class="line"><span class="keyword">and</span> teacher.tname = <span class="string">"张三"</span></span><br><span class="line"><span class="keyword">having</span> <span class="keyword">max</span>(sc.score);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> student.*, sc.score, sc.cid <span class="keyword">from</span> student, teacher, course,sc</span><br><span class="line"><span class="keyword">where</span> teacher.tid = course.tid</span><br><span class="line"><span class="keyword">and</span> sc.sid = student.sid</span><br><span class="line"><span class="keyword">and</span> sc.cid = course.cid</span><br><span class="line"><span class="keyword">and</span> teacher.tname = <span class="string">"张三"</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> score <span class="keyword">desc</span></span><br><span class="line"><span class="keyword">limit</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">sid	sname	sage	            ssex	score	cid</span><br><span class="line">01	赵雷	1990-01-01 00:00:00	男	90.0	02</span><br></pre></td></tr></table></figure>
<h4 id="成绩有重复的情况下，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩"><a href="#成绩有重复的情况下，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩" class="headerlink" title="成绩有重复的情况下，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩"></a>成绩有重复的情况下，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩</h4><p>为了验证这一题，先修改原始数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> sc <span class="keyword">SET</span> score=<span class="number">90</span></span><br><span class="line"><span class="keyword">where</span> <span class="keyword">sid</span> = <span class="string">"07"</span></span><br><span class="line"><span class="keyword">and</span> cid =<span class="string">"02"</span>;</span><br></pre></td></tr></table></figure>
<p>and cid =”02”;<br>这样张三老师教的02号课就有两个学生同时获得90的最高分了。</p>
<p>这道题的思路继续上一题，我们已经查询到了符合限定条件的最高分了，这个时候只用比较这张表，找到全部score等于这个最高分的记录就可，看起来有点繁复。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.*, sc.score, sc.cid <span class="keyword">from</span> student, teacher, course,sc</span><br><span class="line"><span class="keyword">where</span> teacher.tid = course.tid</span><br><span class="line"><span class="keyword">and</span> sc.sid = student.sid</span><br><span class="line"><span class="keyword">and</span> sc.cid = course.cid</span><br><span class="line"><span class="keyword">and</span> teacher.tname = <span class="string">"张三"</span></span><br><span class="line"><span class="keyword">and</span> sc.score = (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">Max</span>(sc.score)</span><br><span class="line">    <span class="keyword">from</span> sc,student, teacher, course</span><br><span class="line">    <span class="keyword">where</span> teacher.tid = course.tid</span><br><span class="line">    <span class="keyword">and</span> sc.sid = student.sid</span><br><span class="line">    <span class="keyword">and</span> sc.cid = course.cid</span><br><span class="line">    <span class="keyword">and</span> teacher.tname = <span class="string">"张三"</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">sid	sname	sage	ssex	score	cid</span><br><span class="line">01	赵雷	1990-01-01 00:00:00	男	90.0	02</span><br><span class="line">07	郑竹	1989-07-01 00:00:00	女	90.0	02</span><br></pre></td></tr></table></figure>
<h4 id="查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩"><a href="#查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩" class="headerlink" title="查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩"></a>查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩</h4><p>同上，在这里用了inner join后会有概念是重复的记录：“01 课与 03课”=“03 课与 01 课”，所以这里取唯一可以直接用group by</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  a.cid, a.sid,  a.score <span class="keyword">from</span> sc <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span></span><br><span class="line">sc <span class="keyword">as</span> b</span><br><span class="line"><span class="keyword">on</span> a.sid = b.sid</span><br><span class="line"><span class="keyword">and</span> a.cid != b.cid</span><br><span class="line"><span class="keyword">and</span> a.score = b.score</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cid, <span class="keyword">sid</span>;</span><br><span class="line"></span><br><span class="line">cid	sid	score</span><br><span class="line">01	03	80.0</span><br><span class="line">02	03	80.0</span><br><span class="line">03	03	80.0</span><br></pre></td></tr></table></figure>
<h4 id="查询每门功成绩最好的前两名"><a href="#查询每门功成绩最好的前两名" class="headerlink" title="查询每门功成绩最好的前两名"></a>查询每门功成绩最好的前两名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.sid,a.cid,a.score <span class="keyword">from</span> sc <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> sc <span class="keyword">as</span> b</span><br><span class="line"><span class="keyword">on</span> a.cid = b.cid <span class="keyword">and</span> a.score&lt;b.score</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.cid, a.sid</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(b.cid)&lt;<span class="number">2</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> a.cid;</span><br><span class="line"></span><br><span class="line">sid	cid	score</span><br><span class="line">01	01	80.0</span><br><span class="line">03	01	80.0</span><br><span class="line">01	02	90.0</span><br><span class="line">07	02	90.0</span><br><span class="line">01	03	99.0</span><br><span class="line">07	03	98.0</span><br></pre></td></tr></table></figure>
<h4 id="统计每门课程的学生选修人数（超过-5-人的课程才统计）"><a href="#统计每门课程的学生选修人数（超过-5-人的课程才统计）" class="headerlink" title="统计每门课程的学生选修人数（超过 5 人的课程才统计）"></a>统计每门课程的学生选修人数（超过 5 人的课程才统计）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sc.cid, <span class="keyword">count</span>(<span class="keyword">sid</span>) <span class="keyword">as</span> cc <span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cid</span><br><span class="line"><span class="keyword">having</span> cc &gt;<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">cid	cc</span><br><span class="line">01	6</span><br><span class="line">02	6</span><br><span class="line">03	6</span><br></pre></td></tr></table></figure>
<h4 id="检索至少选修两门课程的学生学号"><a href="#检索至少选修两门课程的学生学号" class="headerlink" title="检索至少选修两门课程的学生学号"></a>检索至少选修两门课程的学生学号</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span>, <span class="keyword">count</span>(cid) <span class="keyword">as</span> cc <span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">sid</span></span><br><span class="line"><span class="keyword">having</span> cc&gt;=<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">sid	cc</span><br><span class="line">01	3</span><br><span class="line">02	3</span><br><span class="line">03	3</span><br><span class="line">04	3</span><br><span class="line">05	2</span><br><span class="line">06	2</span><br><span class="line">07	2</span><br></pre></td></tr></table></figure>
<h4 id="查询选修了全部课程的学生信息"><a href="#查询选修了全部课程的学生信息" class="headerlink" title="查询选修了全部课程的学生信息"></a>查询选修了全部课程的学生信息</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.*</span><br><span class="line"><span class="keyword">from</span> sc ,student</span><br><span class="line"><span class="keyword">where</span> sc.SId=student.SId</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sc.SId</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">count</span>(*) = (<span class="keyword">select</span> <span class="keyword">DISTINCT</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> course )</span><br><span class="line"></span><br><span class="line"><span class="keyword">sid</span>	sname	sage	ssex</span><br><span class="line"><span class="number">01</span>	赵雷	<span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>	男</span><br><span class="line"><span class="number">02</span>	钱电	<span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>	男</span><br><span class="line"><span class="number">03</span>	孙风	<span class="number">1990</span><span class="number">-05</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>	男</span><br><span class="line"><span class="number">04</span>	李云	<span class="number">1990</span><span class="number">-08</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>	男</span><br></pre></td></tr></table></figure>
<h4 id="查询各学生的年龄，只按年份来算"><a href="#查询各学生的年龄，只按年份来算" class="headerlink" title="查询各学生的年龄，只按年份来算"></a>查询各学生的年龄，只按年份来算</h4><h4 id="按照出生日期来算，当前月日-lt-出生年月的月日则，年龄减一"><a href="#按照出生日期来算，当前月日-lt-出生年月的月日则，年龄减一" class="headerlink" title="按照出生日期来算，当前月日 &lt; 出生年月的月日则，年龄减一"></a>按照出生日期来算，当前月日 &lt; 出生年月的月日则，年龄减一</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.SId <span class="keyword">as</span> 学生编号,student.Sname  <span class="keyword">as</span>  学生姓名,</span><br><span class="line"><span class="keyword">TIMESTAMPDIFF</span>(<span class="keyword">YEAR</span>,student.Sage,<span class="keyword">CURDATE</span>()) <span class="keyword">as</span> 学生年龄</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"></span><br><span class="line">学生编号	学生姓名	学生年龄</span><br><span class="line"><span class="number">01</span>	赵雷	<span class="number">30</span></span><br><span class="line"><span class="number">02</span>	钱电	<span class="number">29</span></span><br><span class="line"><span class="number">03</span>	孙风	<span class="number">30</span></span><br><span class="line"><span class="number">04</span>	李云	<span class="number">29</span></span><br><span class="line"><span class="number">05</span>	周梅	<span class="number">28</span></span><br><span class="line"><span class="number">06</span>	吴兰	<span class="number">28</span></span><br></pre></td></tr></table></figure>
<h4 id="查询本周过生日的学生"><a href="#查询本周过生日的学生" class="headerlink" title="查询本周过生日的学生"></a>查询本周过生日的学生</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">WEEKOFYEAR</span>(student.Sage)=<span class="keyword">WEEKOFYEAR</span>(<span class="keyword">CURDATE</span>());</span><br></pre></td></tr></table></figure>
<h4 id="查询下周过生日的学生"><a href="#查询下周过生日的学生" class="headerlink" title="查询下周过生日的学生"></a>查询下周过生日的学生</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">WEEKOFYEAR</span>(student.Sage)=<span class="keyword">WEEKOFYEAR</span>(<span class="keyword">CURDATE</span>())+<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h4 id="查询本月过生日的学生"><a href="#查询本月过生日的学生" class="headerlink" title="查询本月过生日的学生"></a>查询本月过生日的学生</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">MONTH</span>(student.Sage)=<span class="keyword">MONTH</span>(<span class="keyword">CURDATE</span>());</span><br></pre></td></tr></table></figure>
<h4 id="查询下月过生日的学生"><a href="#查询下月过生日的学生" class="headerlink" title="查询下月过生日的学生"></a>查询下月过生日的学生</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">MONTH</span>(student.Sage)=<span class="keyword">MONTH</span>(<span class="keyword">CURDATE</span>())+<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p><a href="https://www.jianshu.com/p/476b52ee4f1b">50道SQL练习题及答案与详细分析</a></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#数据表"><span class="toc-number">1.</span> <span class="toc-text">数据表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#练习题目"><span class="toc-number">2.</span> <span class="toc-text">练习题目</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询”01”课程比”02”课程成绩高的学生的信息及课程分数"><span class="toc-number">2.0.1.</span> <span class="toc-text">查询”01”课程比”02”课程成绩高的学生的信息及课程分数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询同时存在”01”课程和”02”课程的情况"><span class="toc-number">2.0.2.</span> <span class="toc-text">查询同时存在”01”课程和”02”课程的情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询存在”01”课程但可能不存在”02”课程的情况-不存在时显示为-null"><span class="toc-number">2.0.3.</span> <span class="toc-text">查询存在”01”课程但可能不存在”02”课程的情况(不存在时显示为 null)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询平均成绩大于等于-60-分的同学的学生编号和学生姓名和平均成绩"><span class="toc-number">2.0.4.</span> <span class="toc-text">查询平均成绩大于等于 60 分的同学的学生编号和学生姓名和平均成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询在-SC-表存在成绩的学生信息"><span class="toc-number">2.0.5.</span> <span class="toc-text">查询在 SC 表存在成绩的学生信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询所有同学的学生编号、学生姓名、选课总数、所有课程的成绩总和"><span class="toc-number">2.0.6.</span> <span class="toc-text">查询所有同学的学生编号、学生姓名、选课总数、所有课程的成绩总和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查有成绩的学生信息"><span class="toc-number">2.0.7.</span> <span class="toc-text">查有成绩的学生信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询「李」姓老师的数量"><span class="toc-number">2.0.8.</span> <span class="toc-text">查询「李」姓老师的数量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询学过「张三」老师授课的同学的信息"><span class="toc-number">2.0.9.</span> <span class="toc-text">查询学过「张三」老师授课的同学的信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询没有学全所有课程的同学的信息"><span class="toc-number">2.0.10.</span> <span class="toc-text">查询没有学全所有课程的同学的信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询至少有一门课与学号为”01”的同学所学相同的同学的信息"><span class="toc-number">2.0.11.</span> <span class="toc-text">查询至少有一门课与学号为”01”的同学所学相同的同学的信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询和”01”号的同学学习的课程完全相同的其他同学的信息"><span class="toc-number">2.0.12.</span> <span class="toc-text">查询和”01”号的同学学习的课程完全相同的其他同学的信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询没学过”张三”老师讲授的任一门课程的学生姓名"><span class="toc-number">2.0.13.</span> <span class="toc-text">查询没学过”张三”老师讲授的任一门课程的学生姓名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩"><span class="toc-number">2.0.14.</span> <span class="toc-text">查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#检索”-01-“课程分数小于-60，按分数降序排列的学生信息"><span class="toc-number">2.0.15.</span> <span class="toc-text">检索” 01 “课程分数小于 60，按分数降序排列的学生信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩"><span class="toc-number">2.0.16.</span> <span class="toc-text">按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询各科成绩最高分、最低分和平均分"><span class="toc-number">2.0.17.</span> <span class="toc-text">查询各科成绩最高分、最低分和平均分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#按各科成绩进行排序，并显示排名，-Score-重复时保留名次空缺"><span class="toc-number">2.0.18.</span> <span class="toc-text">按各科成绩进行排序，并显示排名， Score 重复时保留名次空缺</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询学生的总成绩，并进行排名，总分重复时不保留名次空缺"><span class="toc-number">2.0.19.</span> <span class="toc-text">查询学生的总成绩，并进行排名，总分重复时不保留名次空缺</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#统计各科成绩各分数段人数：课程编号，课程名称，-100-85-，-85-70-，-70-60-，-60-0-及所占百分比"><span class="toc-number">2.0.20.</span> <span class="toc-text">统计各科成绩各分数段人数：课程编号，课程名称，[100-85]，[85-70]，[70-60]，[60-0] 及所占百分比</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询各科成绩前三名的记录"><span class="toc-number">2.0.21.</span> <span class="toc-text">查询各科成绩前三名的记录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询每门课程被选修的学生数"><span class="toc-number">2.0.22.</span> <span class="toc-text">查询每门课程被选修的学生数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询出只选修两门课程的学生学号和姓名"><span class="toc-number">2.0.23.</span> <span class="toc-text">查询出只选修两门课程的学生学号和姓名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询男生、女生人数"><span class="toc-number">2.0.24.</span> <span class="toc-text">查询男生、女生人数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询名字中含有「风」字的学生信息"><span class="toc-number">2.0.25.</span> <span class="toc-text">查询名字中含有「风」字的学生信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询同名学生名单，并统计同名人数"><span class="toc-number">2.0.26.</span> <span class="toc-text">查询同名学生名单，并统计同名人数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询-1990-年出生的学生名单"><span class="toc-number">2.0.27.</span> <span class="toc-text">查询 1990 年出生的学生名单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列"><span class="toc-number">2.0.28.</span> <span class="toc-text">查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询平均成绩大于等于-85-的所有学生的学号、姓名和平均成绩"><span class="toc-number">2.0.29.</span> <span class="toc-text">查询平均成绩大于等于 85 的所有学生的学号、姓名和平均成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询课程名称为「数学」，且分数低于-60-的学生姓名和分数"><span class="toc-number">2.0.30.</span> <span class="toc-text">查询课程名称为「数学」，且分数低于 60 的学生姓名和分数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询所有学生的课程及分数情况（存在学生没成绩，没选课的情况）"><span class="toc-number">2.0.31.</span> <span class="toc-text">查询所有学生的课程及分数情况（存在学生没成绩，没选课的情况）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询任何一门课程成绩在-70-分以上的姓名、课程名称和分数"><span class="toc-number">2.0.32.</span> <span class="toc-text">查询任何一门课程成绩在 70 分以上的姓名、课程名称和分数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询存在不及格的课程"><span class="toc-number">2.0.33.</span> <span class="toc-text">查询存在不及格的课程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询课程编号为-01-且课程成绩在-80-分及以上的学生的学号和姓名"><span class="toc-number">2.0.34.</span> <span class="toc-text">查询课程编号为 01 且课程成绩在 80 分及以上的学生的学号和姓名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#求每门课程的学生人数"><span class="toc-number">2.0.35.</span> <span class="toc-text">求每门课程的学生人数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#成绩不重复，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩"><span class="toc-number">2.0.36.</span> <span class="toc-text">成绩不重复，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#成绩有重复的情况下，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩"><span class="toc-number">2.0.37.</span> <span class="toc-text">成绩有重复的情况下，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩"><span class="toc-number">2.0.38.</span> <span class="toc-text">查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询每门功成绩最好的前两名"><span class="toc-number">2.0.39.</span> <span class="toc-text">查询每门功成绩最好的前两名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#统计每门课程的学生选修人数（超过-5-人的课程才统计）"><span class="toc-number">2.0.40.</span> <span class="toc-text">统计每门课程的学生选修人数（超过 5 人的课程才统计）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#检索至少选修两门课程的学生学号"><span class="toc-number">2.0.41.</span> <span class="toc-text">检索至少选修两门课程的学生学号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询选修了全部课程的学生信息"><span class="toc-number">2.0.42.</span> <span class="toc-text">查询选修了全部课程的学生信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询各学生的年龄，只按年份来算"><span class="toc-number">2.0.43.</span> <span class="toc-text">查询各学生的年龄，只按年份来算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#按照出生日期来算，当前月日-lt-出生年月的月日则，年龄减一"><span class="toc-number">2.0.44.</span> <span class="toc-text">按照出生日期来算，当前月日 &lt; 出生年月的月日则，年龄减一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询本周过生日的学生"><span class="toc-number">2.0.45.</span> <span class="toc-text">查询本周过生日的学生</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询下周过生日的学生"><span class="toc-number">2.0.46.</span> <span class="toc-text">查询下周过生日的学生</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询本月过生日的学生"><span class="toc-number">2.0.47.</span> <span class="toc-text">查询本月过生日的学生</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询下月过生日的学生"><span class="toc-number">2.0.48.</span> <span class="toc-text">查询下月过生日的学生</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&text=常用MySQL"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&title=常用MySQL"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&is_video=false&description=常用MySQL"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=常用MySQL&body=Check out this article: http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&title=常用MySQL"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&title=常用MySQL"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&title=常用MySQL"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&title=常用MySQL"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/04/28/数据库/MySQL 指南/MySQL 锁2/&name=常用MySQL&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 John Doe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        
        <li><a href="/">Home</a></li>
        
        <li><a href="/archives/">Articles</a></li>
        
        <li><a href="/categories/">Categories</a></li>
        
        <li><a href="/search/">Search</a></li>
        
        <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
