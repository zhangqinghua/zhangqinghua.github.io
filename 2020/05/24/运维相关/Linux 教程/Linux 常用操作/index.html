<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="整理了一些 Linux 的基本命令或操作。 整机状态uptime 查询平均负载uptime 命令能够打印系统总共运行了多长时间和系统的平均负载。uptime 命令可以显示的信息显示依次为：现在时间、系统已经运行了多长时间、目前有多少登陆用户、系统在过去的 1 分钟、5 分钟和 15 分钟内的平均负载。 系统平均负载是指在特定时间间隔内运行队列中的平均进程数。如果每个 CPU 内核的当前活动进程数不">
<meta name="keywords" content="Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 常用操作">
<meta property="og:url" content="http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="整理了一些 Linux 的基本命令或操作。 整机状态uptime 查询平均负载uptime 命令能够打印系统总共运行了多长时间和系统的平均负载。uptime 命令可以显示的信息显示依次为：现在时间、系统已经运行了多长时间、目前有多少登陆用户、系统在过去的 1 分钟、5 分钟和 15 分钟内的平均负载。 系统平均负载是指在特定时间间隔内运行队列中的平均进程数。如果每个 CPU 内核的当前活动进程数不">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2021-03-16T09:41:46.907Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux 常用操作">
<meta name="twitter:description" content="整理了一些 Linux 的基本命令或操作。 整机状态uptime 查询平均负载uptime 命令能够打印系统总共运行了多长时间和系统的平均负载。uptime 命令可以显示的信息显示依次为：现在时间、系统已经运行了多长时间、目前有多少登陆用户、系统在过去的 1 分钟、5 分钟和 15 分钟内的平均负载。 系统平均负载是指在特定时间间隔内运行队列中的平均进程数。如果每个 CPU 内核的当前活动进程数不">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Linux 常用操作</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/05/28/数据库/Redis 教程/常见问题/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/05/22/数据库/MongoDB/MongoDB 常用操作/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&text=Linux 常用操作"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&title=Linux 常用操作"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&is_video=false&description=Linux 常用操作"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Linux 常用操作&body=Check out this article: http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&title=Linux 常用操作"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&title=Linux 常用操作"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&title=Linux 常用操作"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&title=Linux 常用操作"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&name=Linux 常用操作&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#整机状态"><span class="toc-number">1.</span> <span class="toc-text">整机状态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#uptime-查询平均负载"><span class="toc-number">1.0.1.</span> <span class="toc-text">uptime 查询平均负载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#top-实时查询系统运行情况"><span class="toc-number">1.0.2.</span> <span class="toc-text">top 实时查询系统运行情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询进程的线程消耗时间排行"><span class="toc-number">1.0.3.</span> <span class="toc-text">查询进程的线程消耗时间排行</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CPU-命令"><span class="toc-number">2.</span> <span class="toc-text">CPU 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vmstat-查看-CPU-概要"><span class="toc-number">2.0.1.</span> <span class="toc-text">vmstat 查看 CPU 概要</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mpstat-查看-CPU-明细"><span class="toc-number">2.0.2.</span> <span class="toc-text">mpstat 查看 CPU 明细</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pidstat-查看进程的-CPU-占用"><span class="toc-number">2.0.3.</span> <span class="toc-text">pidstat 查看进程的 CPU 占用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#内存命令"><span class="toc-number">3.</span> <span class="toc-text">内存命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#free-查看内存状态"><span class="toc-number">3.0.1.</span> <span class="toc-text">free 查看内存状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pidstat-查看进程内存占用"><span class="toc-number">3.0.2.</span> <span class="toc-text">pidstat 查看进程内存占用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#磁盘命令"><span class="toc-number">4.</span> <span class="toc-text">磁盘命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询磁盘剩余空间"><span class="toc-number">4.0.1.</span> <span class="toc-text">查询磁盘剩余空间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询某个目录所占空间大小"><span class="toc-number">4.0.2.</span> <span class="toc-text">查询某个目录所占空间大小</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#释放磁盘已删除文件"><span class="toc-number">4.0.3.</span> <span class="toc-text">释放磁盘已删除文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分区和格式化磁盘的"><span class="toc-number">4.0.4.</span> <span class="toc-text">分区和格式化磁盘的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#评估磁盘-I-O-性能"><span class="toc-number">4.0.5.</span> <span class="toc-text">评估磁盘 I/O 性能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询进程的磁盘状态"><span class="toc-number">4.0.6.</span> <span class="toc-text">查询进程的磁盘状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询文件状态"><span class="toc-number">4.0.7.</span> <span class="toc-text">查询文件状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#搜索文件"><span class="toc-number">4.0.8.</span> <span class="toc-text">搜索文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#网络命令"><span class="toc-number">5.</span> <span class="toc-text">网络命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询本机端口占用情况"><span class="toc-number">5.0.1.</span> <span class="toc-text">查询本机端口占用情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#测试远程端口开放状态"><span class="toc-number">5.0.2.</span> <span class="toc-text">测试远程端口开放状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#测试远程端口连通性"><span class="toc-number">5.0.3.</span> <span class="toc-text">测试远程端口连通性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他操作"><span class="toc-number">6.</span> <span class="toc-text">其他操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#修改Linux系统实例默认远程端口"><span class="toc-number">6.0.1.</span> <span class="toc-text">修改Linux系统实例默认远程端口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#复制文件"><span class="toc-number">7.</span> <span class="toc-text">复制文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#上传文件到服务器"><span class="toc-number">7.0.1.</span> <span class="toc-text">上传文件到服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#从服务器下载文件"><span class="toc-number">7.0.2.</span> <span class="toc-text">从服务器下载文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#历史操作"><span class="toc-number">8.</span> <span class="toc-text">历史操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">8.1.</span> <span class="toc-text">#</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常见问题"><span class="toc-number">9.</span> <span class="toc-text">常见问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#重装后无法登录"><span class="toc-number">9.0.1.</span> <span class="toc-text">重装后无法登录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SSH-远程连接报错：ssh-exchange-identification-read-Connection-reset-by-peer"><span class="toc-number">9.0.2.</span> <span class="toc-text">SSH 远程连接报错：ssh_exchange_identification: read: Connection reset by peer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除文件提示无法删除"><span class="toc-number">9.0.3.</span> <span class="toc-text">删除文件提示无法删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#假如生产环境出现-CPU-占用过高，请谈谈你的分析思路和定位？"><span class="toc-number">9.0.4.</span> <span class="toc-text">假如生产环境出现 CPU 占用过高，请谈谈你的分析思路和定位？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#下载工具"><span class="toc-number">10.</span> <span class="toc-text">下载工具</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Linux 常用操作
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Hexo</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-05-24T00:00:00.000Z" itemprop="datePublished">2020-05-24</time>
        
        (Updated: <time datetime="2021-03-16T09:41:46.907Z" itemprop="dateModified">2021-03-16</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Linux-系列/">Linux 系列</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Linux/">Linux</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>整理了一些 Linux 的基本命令或操作。</p>
<h2 id="整机状态"><a href="#整机状态" class="headerlink" title="整机状态"></a>整机状态</h2><h4 id="uptime-查询平均负载"><a href="#uptime-查询平均负载" class="headerlink" title="uptime 查询平均负载"></a>uptime 查询平均负载</h4><p><code>uptime</code> 命令能够打印系统总共运行了多长时间和系统的平均负载。<code>uptime</code> 命令可以显示的信息显示依次为：现在时间、系统已经运行了多长时间、目前有多少登陆用户、系统在过去的 1 分钟、5 分钟和 15 分钟内的平均负载。</p>
<p>系统平均负载是指在特定时间间隔内运行队列中的平均进程数。如果每个 CPU 内核的当前活动进程数不大于 3 的话，那么系统的性能是良好的。如果每个 CPU 内核的任务数大于 5，那么这台机器的性能有严重问题。如果你的 Linux 主机是 1 个双核 CPU 的话，当 load Average 为 6 的时候说明机器已经被充分使用了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 10:10                          系统当前时间</span></span><br><span class="line"><span class="comment"># up 3 days, 59 mins             主机已运行时间,时间越大，说明你的机器越稳定。</span></span><br><span class="line"><span class="comment"># 2 users                        用户连接数，是总连接数而不是用户数</span></span><br><span class="line"><span class="comment"># load averages: 2.87 2.50 2.29  系统平均负载，统计最近1，5，15分钟的系统平均负载</span></span><br><span class="line">zhangqinghua$ uptime</span><br><span class="line">10:10  up 3 days, 59 mins, 2 users, load averages: 2.87 2.50 2.29</span><br></pre></td></tr></table></figure>
<h4 id="top-实时查询系统运行情况"><a href="#top-实时查询系统运行情况" class="headerlink" title="top 实时查询系统运行情况"></a>top 实时查询系统运行情况</h4><p><code>top</code> 命令可以实时动态地查看系统的整体运行情况，是一个综合了多方信息监测系统性能和运行信息的实用工具。通过 <code>top</code> 命令所提供的互动式界面，用热键可以管理。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># top - 11:07:27                 当前系统时间</span></span><br><span class="line"><span class="comment"># up 31 days                     系统已经运行了31天</span></span><br><span class="line"><span class="comment"># 2 users                        2个用户当前登录</span></span><br><span class="line"><span class="comment"># load average                   系统负载，统计最近1，5，15分钟的系统平均负载</span></span><br><span class="line"><span class="comment"># Tasks:  82 total               总进程数</span></span><br><span class="line"><span class="comment"># 1 running                      正在运行的进程数</span></span><br><span class="line"><span class="comment"># 81 sleeping                    睡眠的进程数</span></span><br><span class="line"><span class="comment"># 0 stopped                      停止的进程数</span></span><br><span class="line"><span class="comment"># 0 zombie                       冻结进程数</span></span><br><span class="line"><span class="comment"># %Cpu(s)   0.3 us               用户空间占用CPU百分比</span></span><br><span class="line"><span class="comment"># %Cpu(s)   0.5 us               内核空间占用CPU百分比</span></span><br><span class="line"><span class="comment"># %Cpu(s)   0.0 ni               用户进程空间内改变过优先级的进程占用CPU百分比</span></span><br><span class="line"><span class="comment"># %Cpu(s)   99  id               空闲CPU百分比</span></span><br><span class="line"><span class="comment"># %Cpu(s)   0.0 wa               等待输入输出的CPU时间百分比</span></span><br><span class="line"><span class="comment"># %Cpu(s)   0.0 hi               硬中断（Hardware IRQ）占用CPU的百分比</span></span><br><span class="line"><span class="comment"># %Cpu(s)   0.0 si               软中断（Software Interrupts）占用CPU的百分比</span></span><br><span class="line"><span class="comment"># %Cpu(s)   0.0 st               ?</span></span><br><span class="line"><span class="comment"># KiB Mem :  3881692 total       物理内存总量</span></span><br><span class="line"><span class="comment"># KiB Mem :  2273716 used        使用的物理内存总量</span></span><br><span class="line"><span class="comment"># KiB Mem :  157092  free        空闲内存总量</span></span><br><span class="line"><span class="comment"># KiB Mem :  1450884 buff/cache  用作内核缓存的内存量</span></span><br><span class="line"><span class="comment"># KiB Swap:  0 total             交换区总量</span></span><br><span class="line"><span class="comment"># KiB Swap:  0 free              空闲交换区总量</span></span><br><span class="line"><span class="comment"># KiB Swap:  0 used              使用的交换区总量</span></span><br><span class="line"><span class="comment"># KiB Swap:  1331200 avail Mem   代表可用于进程下一次分配的物理内存数量</span></span><br><span class="line"></span><br><span class="line">top - 11:07:27 up 31 days,  2:16,  2 users,  load average: 0.01, 0.30, 0.33</span><br><span class="line">Tasks:  82 total,   1 running,  81 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.3 us,  0.5 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem :  3881692 total,   157092 free,  2273716 used,  1450884 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  1331200 avail Mem </span><br><span class="line"></span><br><span class="line"><span class="comment"># PID 进程Id</span></span><br><span class="line"><span class="comment"># USER   	进程所有者的用户名</span></span><br><span class="line"><span class="comment"># PR        优先级</span></span><br><span class="line"><span class="comment"># NI        nice值。负值表示高优先级，正值表示低优先级</span></span><br><span class="line"><span class="comment"># VIRT      进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES</span></span><br><span class="line"><span class="comment"># RES       进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA</span></span><br><span class="line"><span class="comment"># SHR       共享内存大小，单位kb</span></span><br><span class="line"><span class="comment"># S         进程状态。D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程</span></span><br><span class="line"><span class="comment"># %CPU      上次更新到现在的CPU时间占用百分比</span></span><br><span class="line"><span class="comment"># %MEM      进程使用的物理内存百分比</span></span><br><span class="line"><span class="comment"># TIME+     进程使用的CPU时间总计，单位1/100秒</span></span><br><span class="line"><span class="comment"># COMMAND   命令名/命令行</span></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line">29336 root      20   0 3570612 621528  13748 S   3.0 16.0  16:02.36 java</span><br><span class="line">23436 root      20   0 1294092  12612   6860 S   1.0  0.3  12:18.56 staragent-core</span><br><span class="line"> 1052 root      20   0 1005228  16268   3256 S   0.3  0.4  86:54.00 /usr/<span class="built_in">local</span>/clou</span><br><span class="line">32750 root      20   0 3921148 414736  13172 S   0.3 10.7   1:17.68 java</span><br></pre></td></tr></table></figure>
<p>在 <code>top</code> 命令执行过程中可以使用的一些交互命令：</p>
<ol>
<li><code>P</code>   根据CPU使用百分比大小进行排序；</li>
<li><code>M</code>   根据驻留内存大小进行排序；</li>
<li><code>T</code>   根据时间/累计时间进行排序；</li>
<li><code>c</code>   切换显示命令名称和完整命令行；</li>
<li><code>k</code>   终止一个进程；</li>
<li><code>q</code>   退出程序；</li>
</ol>
<h4 id="查询进程的线程消耗时间排行"><a href="#查询进程的线程消耗时间排行" class="headerlink" title="查询进程的线程消耗时间排行"></a>查询进程的线程消耗时间排行</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -m 显示所有的线程</span></span><br><span class="line"><span class="comment"># -p pid 进程使用CPU的时间</span></span><br><span class="line"><span class="comment"># -o 该参数后是用户自定义格式</span></span><br><span class="line">[root@iZwz9cp52a5yqx9b86ehecZ icebartech-mlen]<span class="comment"># ps -mp 29336 -o THREAD,tid,time</span></span><br><span class="line">USER     %CPU PRI SCNT WCHAN  USER SYSTEM   TID     TIME</span><br><span class="line">root      1.1   -    - -         -      -     - 00:18:56</span><br><span class="line">root      0.0  19    - futex_    -      - 29336 00:00:00</span><br><span class="line">root      0.0  19    - futex_    -      - 29337 00:00:24</span><br><span class="line">root      0.0  19    - futex_    -      - 29338 00:00:20</span><br></pre></td></tr></table></figure>
<h2 id="CPU-命令"><a href="#CPU-命令" class="headerlink" title="CPU 命令"></a>CPU 命令</h2><h4 id="vmstat-查看-CPU-概要"><a href="#vmstat-查看-CPU-概要" class="headerlink" title="vmstat 查看 CPU 概要"></a>vmstat 查看 CPU 概要</h4><p><code>vmstat</code> 用户查看 CPU 信息（包括但不限于），一般 <code>vmstat</code> 的使用是通过两个数字参数来完成，第一个参数是采样的时间间隔（s），第二个参数是采样的次数。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># r   运行和等待CPU时间片的进程数，原则上整个系统的运行队列不能超过总核数的2倍，否则代表系统压力过大</span></span><br><span class="line"><span class="comment"># b   等待资源的进程数，比如正在等待磁盘I/O，网络I/O等</span></span><br><span class="line"><span class="comment"># us  用户进程消耗CPU时间百分比，us值高，用户进程消耗CPU时间多。如果长期大于50%，优化程序</span></span><br><span class="line"><span class="comment"># sy  内核进程消耗的CPU时间百分比。us + sy 参考值为80%，如果大于，说明存在CPU不足</span></span><br><span class="line"></span><br><span class="line">[root@iZwz9cp52a5yqx9b86ehecZ ~]<span class="comment"># vmstat -n 2 3</span></span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache    si   so    bi    bo   <span class="keyword">in</span>   cs us sy id wa st</span><br><span class="line"> 1  0      0 143396  72548 1372116    0    0     0    15    8    3  1  0 99  0  0</span><br><span class="line"> 0  0      0 141380  72556 1372156    0    0     0    22 2964 3377  1  1 99  0  0</span><br><span class="line"> 0  0      0 142652  72556 1372164    0    0     0    82 2905 3296  0  0 99  0  0</span><br></pre></td></tr></table></figure>
<h4 id="mpstat-查看-CPU-明细"><a href="#mpstat-查看-CPU-明细" class="headerlink" title="mpstat 查看 CPU 明细"></a>mpstat 查看 CPU 明细</h4><p><code>mpstat</code> 用于查看所有的CPU信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ALL          查询所有CPU信息</span></span><br><span class="line"><span class="comment"># 2            每隔2秒采样一次</span></span><br><span class="line">[root@izwz98nlvwu8fv5c0warnfz ~]<span class="comment"># mpstat -P ALL 2</span></span><br><span class="line">Linux 3.10.0-693.2.2.el7.x86_64 (izwz98nlvwu8fv5c0warnfz)       01/22/2021      _x86_64_        (4 CPU)</span><br><span class="line"></span><br><span class="line">11:58:09 AM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">11:58:11 AM  all    0.13    0.00    0.13    0.00    0.00    0.00    0.00    0.00    0.00   99.75</span><br><span class="line">11:58:11 AM    0    0.00    0.00    0.50    0.00    0.00    0.00    0.00    0.00    0.00   99.50</span><br><span class="line">11:58:11 AM    1    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line">11:58:11 AM    2    0.50    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.50</span><br><span class="line">11:58:11 AM    3    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line"></span><br><span class="line">11:58:11 AM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">11:58:13 AM  all    0.38    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.62</span><br><span class="line">11:58:13 AM    0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line">11:58:13 AM    1    0.50    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.50</span><br><span class="line">11:58:13 AM    2    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line">11:58:13 AM    3    1.01    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   98.99</span><br></pre></td></tr></table></figure>
<h4 id="pidstat-查看进程的-CPU-占用"><a href="#pidstat-查看进程的-CPU-占用" class="headerlink" title="pidstat 查看进程的 CPU 占用"></a>pidstat 查看进程的 CPU 占用</h4><p><code>pidstat</code> 用于查看每个进程使用 CPU 和内存的用量分解信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -u 2         每个2秒采样一次</span></span><br><span class="line"><span class="comment"># -p 1282167   进程Id</span></span><br><span class="line"></span><br><span class="line">[root@iZj6ci1r3ycwolsv7h3gbiZ ~]<span class="comment"># pidstat -u 2 -p 1282167 </span></span><br><span class="line">Linux 4.18.0-193.28.1.el8_2.x86_64 (iZj6ci1r3ycwolsv7h3gbiZ)    01/22/2021      _x86_64_        (4 CPU)</span><br><span class="line"></span><br><span class="line">12:01:53 PM   UID       PID    %usr %system  %guest   %<span class="built_in">wait</span>    %CPU   CPU  Command</span><br><span class="line">12:01:55 PM     0   1282167    0.50    0.00    0.00    0.00    0.50     3  java</span><br><span class="line">12:01:57 PM     0   1282167    0.50    0.00    0.00    0.00    0.50     3  java</span><br><span class="line">12:01:59 PM     0   1282167    4.50    0.50    0.00    0.00    5.00     3  java</span><br></pre></td></tr></table></figure>
<h2 id="内存命令"><a href="#内存命令" class="headerlink" title="内存命令"></a>内存命令</h2><h4 id="free-查看内存状态"><a href="#free-查看内存状态" class="headerlink" title="free 查看内存状态"></a>free 查看内存状态</h4><p><code>free</code> 命令用于查看应用程序可用内存数。</p>
<p>经验值：</p>
<ol>
<li>应用程序可用内存/系统物理内存 &lt; 20% 内存不足；</li>
<li>应用程序可用内存/系统物理内存 &gt; 70% 内存充足；</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按照KB单位显示</span></span><br><span class="line">[root@izwz98nlvwu8fv5c0warnfz ~]<span class="comment"># free</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:        7734544     3901428     1668240        8744     2164876     3535576</span><br><span class="line">Swap:             0           0           0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按照MB单位显示</span></span><br><span class="line">[root@izwz98nlvwu8fv5c0warnfz ~]<span class="comment"># free -m</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           7553        3810        1629           8        2114        3452</span><br><span class="line">Swap:             0           0           0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按照GB单位显示</span></span><br><span class="line">[root@izwz98nlvwu8fv5c0warnfz ~]<span class="comment"># free -g</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:              7           3           1           0           2           3</span><br><span class="line">Swap:             0           0           0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动选取合适单位显示</span></span><br><span class="line">[root@izwz98nlvwu8fv5c0warnfz ~]<span class="comment"># free -h</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           7.4G        3.7G        1.6G        8.5M        2.1G        3.4G</span><br><span class="line">Swap:            0B          0B          0B</span><br></pre></td></tr></table></figure>
<h4 id="pidstat-查看进程内存占用"><a href="#pidstat-查看进程内存占用" class="headerlink" title="pidstat 查看进程内存占用"></a>pidstat 查看进程内存占用</h4><p>还可以使用 <code>pidstat</code> 用于查看每个进程使用内存的用量分解信息，参考上面。</p>
<h2 id="磁盘命令"><a href="#磁盘命令" class="headerlink" title="磁盘命令"></a>磁盘命令</h2><h4 id="查询磁盘剩余空间"><a href="#查询磁盘剩余空间" class="headerlink" title="查询磁盘剩余空间"></a>查询磁盘剩余空间</h4><p><code>df</code> 用于查看磁盘剩余空间。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@izwz98nlvwu8fv5c0warnfz ~]<span class="comment"># df -h</span></span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/vda1        40G   30G  7.5G  80% /</span><br><span class="line">devtmpfs        3.7G     0  3.7G   0% /dev</span><br><span class="line">tmpfs           3.7G     0  3.7G   0% /dev/shm</span><br><span class="line">tmpfs           3.7G  8.6M  3.7G   1% /run</span><br><span class="line">tmpfs           3.7G     0  3.7G   0% /sys/fs/cgroup</span><br><span class="line">tmpfs           756M     0  756M   0% /run/user/0</span><br></pre></td></tr></table></figure>
<h4 id="查询某个目录所占空间大小"><a href="#查询某个目录所占空间大小" class="headerlink" title="查询某个目录所占空间大小"></a>查询某个目录所占空间大小</h4><p><code>du</code> 用来查看某个目录所占空间大小，语法：du [-abckmsh] [文件或者目录名]。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不加任何选项和参数只列出目录（包含子目录）大小。</span></span><br><span class="line">$ du folder</span><br><span class="line">16	folder/SubFolder2</span><br><span class="line">240592	folder/SubFolder1</span><br><span class="line">240640	folder</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直查指定目录大小</span></span><br><span class="line">$ du --max-depth=1 /data/ -h</span><br><span class="line">1.9G	/data/deploy</span><br><span class="line">4.0K	/data/wwwlogs</span><br><span class="line">216M	/data/mysql</span><br><span class="line">2.1G	/data/</span><br><span class="line"></span><br><span class="line"><span class="comment"># -a 全部文件与目录大小都列出来</span></span><br><span class="line">$ du -a folder</span><br><span class="line">16	folder/.DS_Store</span><br><span class="line">8	folder/File2</span><br><span class="line">8	folder/SubFolder2/File2</span><br><span class="line">8	folder/SubFolder2/File1</span><br><span class="line">16	folder/SubFolder2</span><br><span class="line">240576	folder/SubFolder1/File2.ttc</span><br><span class="line">16	folder/SubFolder1/.DS_Store</span><br><span class="line">0	folder/SubFolder1/File1</span><br><span class="line">240592	folder/SubFolder1</span><br><span class="line">8	folder/File1</span><br><span class="line">240640	folder</span><br><span class="line"></span><br><span class="line"><span class="comment"># -c 最后加总</span></span><br><span class="line">$ du  -c folder</span><br><span class="line">16	folder/SubFolder2</span><br><span class="line">240592	folder/SubFolder1</span><br><span class="line">240640	folder</span><br><span class="line">240640	total </span><br><span class="line"></span><br><span class="line"><span class="comment"># -s：只列出总和</span></span><br><span class="line">$ du -s folder</span><br><span class="line">240640	folder</span><br><span class="line"></span><br><span class="line"><span class="comment"># -h：系统自动调节单位  -m：以MB为单位输出 -k：以KB为单位输出 </span></span><br><span class="line"><span class="comment"># -b：列出的值以bytes为单位输出，默认是以Kbytes</span></span><br><span class="line">$ du -h folder</span><br><span class="line">8.0K	folder/SubFolder2</span><br><span class="line">117M	folder/SubFolder1</span><br><span class="line">118M	folder</span><br></pre></td></tr></table></figure>
<h4 id="释放磁盘已删除文件"><a href="#释放磁盘已删除文件" class="headerlink" title="释放磁盘已删除文件"></a>释放磁盘已删除文件</h4><p>已删除的文件可能由于进程未结算，还占用空间。这时候需要杀掉进程或长期服务器才能把空间释放出来。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询已删除但未释放空间的文件（-h 以合适的单位显示）</span></span><br><span class="line">$ lsof | grep deleted -h</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对待这种进程不停对文件写日志的操作，要释放文件占用的磁盘空间，最好在线清空这个文件</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">""</span> &gt; myfile.iso</span><br></pre></td></tr></table></figure>
<h4 id="分区和格式化磁盘的"><a href="#分区和格式化磁盘的" class="headerlink" title="分区和格式化磁盘的"></a>分区和格式化磁盘的</h4><p>后续添加：<a href="https://www.cnblogs.com/zhang-jun-jie/p/9266810.html">https://www.cnblogs.com/zhang-jun-jie/p/9266810.html</a></p>
<h4 id="评估磁盘-I-O-性能"><a href="#评估磁盘-I-O-性能" class="headerlink" title="评估磁盘 I/O 性能"></a>评估磁盘 I/O 性能</h4><p><code>iostat</code> 用于评估磁盘 I/O 性能。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2      每隔2秒采样一次</span></span><br><span class="line"><span class="comment"># 3      共采样3次</span></span><br><span class="line"><span class="comment"># rkB/s  每秒读取数据量 kB</span></span><br><span class="line"><span class="comment"># wkB/s  每秒写入数据量 kB</span></span><br><span class="line"><span class="comment"># svctm  I/O请求的平均服务时间，单位毫秒。svctm和await的值相近，表示没有I/O等待，磁盘性能很好</span></span><br><span class="line"><span class="comment"># await  I/O请求的平均等待时间，单位毫秒，值越小，性能越好。如果svctm和await的值差距大，需要优化程序或更换磁盘</span></span><br><span class="line"><span class="comment"># util   一秒钟有百分几的时间用于I/O操作。接近100%时，表示磁盘带宽跑满，需要优化程序或增加磁盘</span></span><br><span class="line"></span><br><span class="line">[root@izwz98nlvwu8fv5c0warnfz ~]<span class="comment"># iostat -xdk 2 3</span></span><br><span class="line">Linux 3.10.0-693.2.2.el7.x86_64 (izwz98nlvwu8fv5c0warnfz)       01/22/2021      _x86_64_        (4 CPU)</span><br><span class="line"></span><br><span class="line">Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</span><br><span class="line">vda               0.04     2.55    0.05    2.16     2.39    36.06    34.81     0.01    2.96   12.86    2.75   0.13   0.03</span><br><span class="line">vdb               0.00     0.00    0.00    0.00     0.00     0.00    45.71     0.00    0.60    0.60    0.00   0.53   0.00</span><br><span class="line"></span><br><span class="line">Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</span><br><span class="line">vda               0.00     0.00    0.00    2.00     0.00    14.00    14.00     0.00    0.00    0.00    0.00   0.00   0.00</span><br><span class="line">vdb               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00</span><br><span class="line"></span><br><span class="line">Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</span><br><span class="line">vda               0.00     5.00    0.00    1.50     0.00    26.00    34.67     0.00    0.00    0.00    0.00   0.00   0.00</span><br><span class="line">vdb               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00</span><br></pre></td></tr></table></figure>
<h4 id="查询进程的磁盘状态"><a href="#查询进程的磁盘状态" class="headerlink" title="查询进程的磁盘状态"></a>查询进程的磁盘状态</h4><p>还可以使用 <code>pidstat</code> 用于查看每个进程使用内存的用量分解信息，参考上面。</p>
<h4 id="查询文件状态"><a href="#查询文件状态" class="headerlink" title="查询文件状态"></a>查询文件状态</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">stat</span> /data</span><br><span class="line">  文件：<span class="string">"/data"</span></span><br><span class="line">  大小：4096      	块：8          IO 块：4096   目录</span><br><span class="line">设备：fd01h/64769d	Inode：1572865     硬链接：5</span><br><span class="line">权限：(0755/drwxr-xr-x)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">最近访问：2020-05-15 18:00:35.958200010 +0800</span><br><span class="line">最近更改：2019-11-14 20:04:27.523461820 +0800</span><br><span class="line">最近改动：2019-11-14 20:04:27.523461820 +0800</span><br><span class="line">创建时间：-</span><br></pre></td></tr></table></figure>
<h4 id="搜索文件"><a href="#搜索文件" class="headerlink" title="搜索文件"></a>搜索文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将目前目录及其子目录下所有延伸档名是 c 的文件列出来 </span></span><br><span class="line">$ find  -name <span class="string">"*.jar"</span></span><br><span class="line">./file/icebartech-cutterbar.jar</span><br><span class="line">./file/icebartech-cutterbar-1.jar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将指定大小的文件搜索处理</span></span><br><span class="line">find . -<span class="built_in">type</span> f -size +800M</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 模糊搜索指定文件（目录、文件名）</span></span><br><span class="line">$ find /data -cmin -100 | egrep  <span class="string">"icebartech"</span></span><br><span class="line">/data/wwwlogs/sportcenter.icebartech.com_nginx.log</span><br><span class="line">/data/deploy/Java/icebartech-vastscene/logs/start.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将目前目录其其下子目录中所有一般文件列出</span></span><br><span class="line">$ find -<span class="built_in">type</span> f</span><br><span class="line">./deploy/logs/enweis/info.enweis.log</span><br><span class="line">./deploy/logs/enweis/error.enweis.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># 排除指定文件</span></span><br><span class="line">$ find /data -ctime -1 | egrep -v <span class="string">"enjoyshop"</span></span><br><span class="line">/data/wwwlogs/80_nginx.log</span><br><span class="line">/data/wwwlogs/sportcenter.icebartech.com_nginx.log</span><br><span class="line"></span><br><span class="line">$ find /data -ctime -1 | egrep -v <span class="string">"(enjoyshop|sportcenter)"</span></span><br><span class="line">/data/wwwlogs/80_nginx.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按时间查找</span></span><br><span class="line"><span class="comment"># +n：&gt;n -n: &lt;n n: =n</span></span><br><span class="line"><span class="comment"># mtime 修改实际（天） mmin 修改实际（分）</span></span><br><span class="line"><span class="comment"># atime 访问实际（天） amin 访问实际（分）</span></span><br><span class="line"><span class="comment"># ctime 创建实际（天） cmin 创建实际（分）</span></span><br><span class="line"><span class="comment"># /data 目录下一天内创建的文件</span></span><br><span class="line">$ find /data -ctime -1</span><br><span class="line">/data/wwwlogs/80_nginx.log</span><br><span class="line">/data/wwwlogs/enjoyshop.icebartech.com_nginx.log</span><br><span class="line">/data/wwwlogs/sportcenter.icebartech.com_nginx.log</span><br></pre></td></tr></table></figure>
<h2 id="网络命令"><a href="#网络命令" class="headerlink" title="网络命令"></a>网络命令</h2><h4 id="查询本机端口占用情况"><a href="#查询本机端口占用情况" class="headerlink" title="查询本机端口占用情况"></a>查询本机端口占用情况</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lsof -i:端口号 用于查看某一端口的占用情况，比如查看8000端口使用情况，lsof -i:8000</span></span><br><span class="line">$ lsof -i:8000</span><br><span class="line">COMMAND   PID USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME</span><br><span class="line">lwfs    22065 root    6u  IPv4 4395053      0t0  TCP *:irdmi (LISTEN)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 找出程序运行的端口（并不是所有的进程都能找到，没有权限的会不显示，使用 root 权限查看所有的信息。）</span></span><br><span class="line">$ netstat -ap | grep nginx</span><br><span class="line">tcp        0      0 0.0.0.0:http            0.0.0.0:*               LISTEN      24872/nginx: worker </span><br><span class="line">tcp        0      0 0.0.0.0:818             0.0.0.0:*               LISTEN      24872/nginx: worker </span><br><span class="line">tcp        0      0 0.0.0.0:https           0.0.0.0:*               LISTEN      24872/nginx: worker </span><br><span class="line">tcp        0      0 0.0.0.0:svn             0.0.0.0:*               LISTEN      24872/nginx: worker </span><br><span class="line">tcp        0      0 iZwz9cp52a5yqx9b8:https 119.123.69.251:65008    ESTABLISHED 24872/nginx: worker </span><br><span class="line">tcp        0      0 iZwz9cp52a5yqx9b8:https 119.123.69.251:65014    ESTABLISHED 24872/nginx: worker </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     175354591 24872/nginx: worker  </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     175354590 30572/nginx: master  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 找出运行在指定端口的进程</span></span><br><span class="line">$ netstat -pan | grep 60819</span><br><span class="line">tcp        0      0 0.0.0.0:60819           0.0.0.0:*               LISTEN      16586/java          </span><br><span class="line">tcp        1      0 127.0.0.1:60819         127.0.0.1:47942         CLOSE_WAIT  16586/java </span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看是否有未知IP在进行发包</span></span><br><span class="line">$ netstat -lntupa</span><br></pre></td></tr></table></figure>
<h4 id="测试远程端口开放状态"><a href="#测试远程端口开放状态" class="headerlink" title="测试远程端口开放状态"></a>测试远程端口开放状态</h4><p>我们可以使用 <code>nmap</code> 命令来查看目标服务器的端口开放状态。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">zhangqinghua$ nmap 120.77.246.50</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-05 15:10 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> gsm.icebartch.com (120.77.246.50)</span><br><span class="line">Host is up (0.0071s latency).</span><br><span class="line">Not shown: 995 filtered ports</span><br><span class="line">PORT     STATE  SERVICE</span><br><span class="line">22/tcp   open   ssh</span><br><span class="line">80/tcp   open   http</span><br><span class="line">443/tcp  open   https</span><br><span class="line">3306/tcp closed mysql</span><br><span class="line">3690/tcp open   svn</span><br></pre></td></tr></table></figure>
<h4 id="测试远程端口连通性"><a href="#测试远程端口连通性" class="headerlink" title="测试远程端口连通性"></a>测试远程端口连通性</h4><p>在确认了目标服务器的端口开放性之后，我们就可以使用 <code>telnet</code> 来测试端口的连通性了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 连通的情况，出现Escape character</span></span><br><span class="line">zhangqinghua$ telnet 120.77.246.50 22</span><br><span class="line">Trying 120.77.246.50...</span><br><span class="line">Connected to gsm.icebartch.com.</span><br><span class="line">Escape character is <span class="string">'^]'</span>.</span><br><span class="line">SSH-2.0-OpenSSH_7.4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不通的情况，一直卡死</span></span><br><span class="line">zhangqinghua$ telnet 120.77.246.50 21</span><br><span class="line">Trying 120.77.246.50...</span><br></pre></td></tr></table></figure>
<h2 id="其他操作"><a href="#其他操作" class="headerlink" title="其他操作"></a>其他操作</h2><p>脚本贴心的帮我们释放了一些内存资源，以便获取更多的资源进行挖矿。</p>
<p>众所周知，Linux 系统会随着长时间的运行，会产生很多缓存，清理方式就是写一个数字到 drop_caches 文件里，这个数字通常为 3。</p>
<p>sync 命令将所有未写的系统缓冲区写到磁盘中，执行之后就可以放心的释放缓存了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sync &amp;&amp; <span class="built_in">echo</span> 3 &gt;/proc/sys/vm/drop_caches</span><br></pre></td></tr></table></figure>
<h4 id="修改Linux系统实例默认远程端口"><a href="#修改Linux系统实例默认远程端口" class="headerlink" title="修改Linux系统实例默认远程端口"></a>修改Linux系统实例默认远程端口</h4><ol>
<li>修改配置<br>将 <code>/etc/ssh/sshd_config</code> 下 <code>Port 22</code> 改为 <code>Port 1022</code></li>
<li>重启 sshd 服务。<br><code>systemctl restart sshd</code> </li>
<li>开发防火墙<br>可选</li>
<li>重新登录<br><code>ssh -p 1022 root@xxxx</code></li>
</ol>
<h2 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h2><h4 id="上传文件到服务器"><a href="#上传文件到服务器" class="headerlink" title="上传文件到服务器"></a>上传文件到服务器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 上传文件到服务站指定目录</span></span><br><span class="line">scp users/test.txt root@127.0.0.1:/usr/<span class="built_in">local</span>/users</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传文件到服务器指定目录并修改文件名</span></span><br><span class="line">scp users/test.txt root@127.0.0.1:/usr/<span class="built_in">local</span>/users/tests2.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># （test 目录存在）上传 users 文件夹到服务器 /usr/local/test 目录</span></span><br><span class="line">scp -r users root@127.0.0.1:/usr/<span class="built_in">local</span>/<span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># （test 目录不存在）上传 users 文件夹到服务器指 /usr/local/ 目录并修改文件夹名称为 test</span></span><br><span class="line">scp -r users root@127.0.0.1:/usr/<span class="built_in">local</span>/<span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<h4 id="从服务器下载文件"><a href="#从服务器下载文件" class="headerlink" title="从服务器下载文件"></a>从服务器下载文件</h4><p>从远程复制到本地，只要将从本地复制到远程的命令的后2个参数调换顺序即可。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scp root@www.runoob.com:/home/root/others/music /home/space/music/1.mp3 </span><br><span class="line"></span><br><span class="line">scp -r www.runoob.com:/home/root/others/ /home/space/music/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果远程服务器防火墙有为scp命令设置了指定的端口，我们需要使用 -P 参数来设置命令的端口号，命令格式如下：</span></span><br><span class="line">scp -P 4588 remote@www.runoob.com:/usr/<span class="built_in">local</span>/sin.sh /home/administrator</span><br></pre></td></tr></table></figure></p>
<h2 id="历史操作"><a href="#历史操作" class="headerlink" title="历史操作"></a>历史操作</h2><h3 id=""><a href="#" class="headerlink" title="#"></a>#</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">history</span></span><br><span class="line">1093  clear</span><br><span class="line">1094  find /data | egrep <span class="string">".jar"</span> - ls</span><br><span class="line">1095  find /data | egrep <span class="string">"icebartech-pianoroom"</span> - ls</span><br><span class="line">1096  find /data/deploy/Java/icebartech- | egrep <span class="string">".jar"</span> - ls</span><br><span class="line">1097  find /data/deploy/Java/ | egrep <span class="string">".jar"</span> - ls</span><br><span class="line">1098  find /data/deploy/Java/ | egrep <span class="string">"icebartech-gsm"</span> - ls</span><br><span class="line">1099  find /data/deploy/Java/ | egrep <span class="string">"icebartech-gsm"</span> </span><br><span class="line">1100  <span class="built_in">history</span></span><br></pre></td></tr></table></figure>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h4 id="重装后无法登录"><a href="#重装后无法登录" class="headerlink" title="重装后无法登录"></a>重装后无法登录</h4><p>出现这个问题的原因是你本地保存的主机密钥与服务器的密钥不一致，通常因为你重装了服务器的系统，这样它的密钥就变了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">zhangqinghua$ ssh root@120.76.98.47</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!</span><br><span class="line">Someone could be eavesdropping on you right now (man-in-the-middle attack)!</span><br><span class="line">It is also possible that a host key has just been changed.</span><br><span class="line">The fingerprint <span class="keyword">for</span> the ECDSA key sent by the remote host is</span><br><span class="line">SHA256:O+8bUuRS7w2VG1Jk4cqFcfqxBBDLjma35OsXJ6ymznw.</span><br><span class="line">Please contact your system administrator.</span><br><span class="line">Add correct host key <span class="keyword">in</span> /Users/zhangqinghua/.ssh/known_hosts to get rid of this message.</span><br><span class="line">Offending ECDSA key <span class="keyword">in</span> /Users/zhangqinghua/.ssh/known_hosts:33</span><br><span class="line">ECDSA host key <span class="keyword">for</span> 120.76.98.47 has changed and you have requested strict checking.</span><br><span class="line">Host key verification failed.</span><br></pre></td></tr></table></figure>
<p>解决方法有 2 种：</p>
<ol>
<li>删除 <code>.ssh/known_hosts</code> 对应的前面记录。</li>
<li>清除对应的机器的缓存 <code>ssh-keygen -R 你的远程服务器ip地址</code>。</li>
</ol>
<h4 id="SSH-远程连接报错：ssh-exchange-identification-read-Connection-reset-by-peer"><a href="#SSH-远程连接报错：ssh-exchange-identification-read-Connection-reset-by-peer" class="headerlink" title="SSH 远程连接报错：ssh_exchange_identification: read: Connection reset by peer"></a>SSH 远程连接报错：ssh_exchange_identification: read: Connection reset by peer</h4><p>发现是公司网络问题，使用手机热点网络能连。被阿里云的云盾拦截了：<a href="https://help.aliyun.com/knowledge_detail/37914.html">https://help.aliyun.com/knowledge_detail/37914.html</a></p>
<h4 id="删除文件提示无法删除"><a href="#删除文件提示无法删除" class="headerlink" title="删除文件提示无法删除"></a>删除文件提示无法删除</h4><p>当使用 <code>rm</code> 删除文件和文件夹的时候提示：rm: 无法删除”bash”: 不允许的操作</p>
<p>删除属性：<br>chattr -i authorized_keys2<br>chattr -a authorized_keys2<br>chattr -u authorized_keys2</p>
<p>再次删除该文件，即可正常删除了</p>
<h4 id="假如生产环境出现-CPU-占用过高，请谈谈你的分析思路和定位？"><a href="#假如生产环境出现-CPU-占用过高，请谈谈你的分析思路和定位？" class="headerlink" title="假如生产环境出现 CPU 占用过高，请谈谈你的分析思路和定位？"></a>假如生产环境出现 CPU 占用过高，请谈谈你的分析思路和定位？</h4><p>需要结合 Linux 和 JDK 命令一块分析。</p>
<ol>
<li>top 命令找出 CPU 占用最高的进程；</li>
<li>ps -ef 或 jps 进一步定位，得知是一个怎样的后台程序；</li>
<li>定位到具体线程或者代码；</li>
<li>将需要的线程 Id 转换为 16 进制格式（英文小写）；</li>
<li>jstack </li>
</ol>
<h2 id="下载工具"><a href="#下载工具" class="headerlink" title="下载工具"></a>下载工具</h2><ol>
<li>wget</li>
<li>mwget</li>
<li>axel <a href="https://blog.kieng.cn/1147.html">https://blog.kieng.cn/1147.html</a></li>
</ol>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#整机状态"><span class="toc-number">1.</span> <span class="toc-text">整机状态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#uptime-查询平均负载"><span class="toc-number">1.0.1.</span> <span class="toc-text">uptime 查询平均负载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#top-实时查询系统运行情况"><span class="toc-number">1.0.2.</span> <span class="toc-text">top 实时查询系统运行情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询进程的线程消耗时间排行"><span class="toc-number">1.0.3.</span> <span class="toc-text">查询进程的线程消耗时间排行</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CPU-命令"><span class="toc-number">2.</span> <span class="toc-text">CPU 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vmstat-查看-CPU-概要"><span class="toc-number">2.0.1.</span> <span class="toc-text">vmstat 查看 CPU 概要</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mpstat-查看-CPU-明细"><span class="toc-number">2.0.2.</span> <span class="toc-text">mpstat 查看 CPU 明细</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pidstat-查看进程的-CPU-占用"><span class="toc-number">2.0.3.</span> <span class="toc-text">pidstat 查看进程的 CPU 占用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#内存命令"><span class="toc-number">3.</span> <span class="toc-text">内存命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#free-查看内存状态"><span class="toc-number">3.0.1.</span> <span class="toc-text">free 查看内存状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pidstat-查看进程内存占用"><span class="toc-number">3.0.2.</span> <span class="toc-text">pidstat 查看进程内存占用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#磁盘命令"><span class="toc-number">4.</span> <span class="toc-text">磁盘命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询磁盘剩余空间"><span class="toc-number">4.0.1.</span> <span class="toc-text">查询磁盘剩余空间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询某个目录所占空间大小"><span class="toc-number">4.0.2.</span> <span class="toc-text">查询某个目录所占空间大小</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#释放磁盘已删除文件"><span class="toc-number">4.0.3.</span> <span class="toc-text">释放磁盘已删除文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分区和格式化磁盘的"><span class="toc-number">4.0.4.</span> <span class="toc-text">分区和格式化磁盘的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#评估磁盘-I-O-性能"><span class="toc-number">4.0.5.</span> <span class="toc-text">评估磁盘 I/O 性能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询进程的磁盘状态"><span class="toc-number">4.0.6.</span> <span class="toc-text">查询进程的磁盘状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询文件状态"><span class="toc-number">4.0.7.</span> <span class="toc-text">查询文件状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#搜索文件"><span class="toc-number">4.0.8.</span> <span class="toc-text">搜索文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#网络命令"><span class="toc-number">5.</span> <span class="toc-text">网络命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询本机端口占用情况"><span class="toc-number">5.0.1.</span> <span class="toc-text">查询本机端口占用情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#测试远程端口开放状态"><span class="toc-number">5.0.2.</span> <span class="toc-text">测试远程端口开放状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#测试远程端口连通性"><span class="toc-number">5.0.3.</span> <span class="toc-text">测试远程端口连通性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他操作"><span class="toc-number">6.</span> <span class="toc-text">其他操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#修改Linux系统实例默认远程端口"><span class="toc-number">6.0.1.</span> <span class="toc-text">修改Linux系统实例默认远程端口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#复制文件"><span class="toc-number">7.</span> <span class="toc-text">复制文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#上传文件到服务器"><span class="toc-number">7.0.1.</span> <span class="toc-text">上传文件到服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#从服务器下载文件"><span class="toc-number">7.0.2.</span> <span class="toc-text">从服务器下载文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#历史操作"><span class="toc-number">8.</span> <span class="toc-text">历史操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">8.1.</span> <span class="toc-text">#</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常见问题"><span class="toc-number">9.</span> <span class="toc-text">常见问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#重装后无法登录"><span class="toc-number">9.0.1.</span> <span class="toc-text">重装后无法登录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SSH-远程连接报错：ssh-exchange-identification-read-Connection-reset-by-peer"><span class="toc-number">9.0.2.</span> <span class="toc-text">SSH 远程连接报错：ssh_exchange_identification: read: Connection reset by peer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除文件提示无法删除"><span class="toc-number">9.0.3.</span> <span class="toc-text">删除文件提示无法删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#假如生产环境出现-CPU-占用过高，请谈谈你的分析思路和定位？"><span class="toc-number">9.0.4.</span> <span class="toc-text">假如生产环境出现 CPU 占用过高，请谈谈你的分析思路和定位？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#下载工具"><span class="toc-number">10.</span> <span class="toc-text">下载工具</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&text=Linux 常用操作"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&title=Linux 常用操作"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&is_video=false&description=Linux 常用操作"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Linux 常用操作&body=Check out this article: http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&title=Linux 常用操作"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&title=Linux 常用操作"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&title=Linux 常用操作"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&title=Linux 常用操作"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/05/24/运维相关/Linux 教程/Linux 常用操作/&name=Linux 常用操作&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 John Doe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        
        <li><a href="/">Home</a></li>
        
        <li><a href="/archives/">Articles</a></li>
        
        <li><a href="/categories/">Categories</a></li>
        
        <li><a href="/search/">Search</a></li>
        
        <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
